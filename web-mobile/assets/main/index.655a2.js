System.register("chunks:///main.js",["cc"],(function(e,t){"use strict";var n,i,r,o,a,s,u,l,c,p,h,d,f,g,b,m,y,v,w,_,P,C,k,N,S,B,R,x,E,O,A,L,T,I,M,D,z,U,H,F,q,j,W,G,Y;return{setters:[function(e){n=e.cclegacy,i=e._decorator,r=e.find,o=e.Label,a=e.Node,s=e.resources,u=e.Prefab,l=e.instantiate,c=e.UITransform,p=e.Vec3,h=e.UIOpacity,d=e.tween,f=e.Component,g=e.Event,b=e.EventTarget,m=e.ScrollView,y=e.Color,v=e.log,w=e.AudioClip,_=e.director,P=e.AudioSource,C=e.Tween,k=e.ProgressBar,N=e.Slider,S=e.Button,B=e.SpriteFrame,R=e.Sprite,x=e.ParticleSystem2D,E=e.color,O=e.assetManager,A=e.ImageAsset,L=e.Texture2D,T=e.view,I=e.EditBox,M=e.macro,D=e.RichText,z=e.v3,U=e.Widget,H=e.screen,F=e.Size,q=e.Enum,j=e.Vec2,W=e.v2,G=e.EventHandler,Y=e.Graphics}],execute:function(){function e(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e=function(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),a=new k(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return S()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=c(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p={};function h(){}function d(){}function f(){}var g={};u(g,o,(function(){return this}));var b=Object.getPrototypeOf,m=b&&b(b(N([])));m&&m!==n&&i.call(m,o)&&(g=m);var y=f.prototype=h.prototype=Object.create(g);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,o,a,s){var u=c(e[r],e,o);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==typeof p&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=f,u(y,"constructor",f),u(f,"constructor",d),d.displayName=u(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},v(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new w(l(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(y),u(y,s,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=N,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function t(e,t,n,i,r,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(i,r)}function V(e){return function(){var n=this,i=arguments;return new Promise((function(r,o){var a=e.apply(n,i);function s(e){t(a,r,o,s,u,"next",e)}function u(e){t(a,r,o,s,u,"throw",e)}s(void 0)}))}}function K(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,J(e,t)}function J(e,t){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function te(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function ne(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n._RF.push({},"5c337le80BIP7ublEe2Cctw","BigDealGameModel",void 0);var ie=function(){function e(){}return e.setallData=function(){e._auctionHouseResponse=null,e._loginOtpResponse=null,e._loginDataResponse=null,e._playerBalancesResponse=null,e._profileUpdatedRes=null,e._playerInfoMinMax=null,e._auctionMinMaxPercentage=null,e._auctionCurrentPlay=null,e._auctionHouseListResponse=null,e._auctionAvatars=null,e._auctionWinner=null,e._auctionLiveState=null,e._minMaxRecentBid=null,e._upDateProfileResponse=null},X(e,null,[{key:"auctionHouseResponse",get:function(){return e._auctionHouseResponse},set:function(t){e._auctionHouseResponse=t}},{key:"loginOtpResponse",get:function(){return e._loginOtpResponse},set:function(t){e._loginOtpResponse=t}},{key:"loginDataResponse",get:function(){return e._loginDataResponse},set:function(t){e._loginDataResponse=t}},{key:"playerBalancesResponse",get:function(){return e._playerBalancesResponse},set:function(t){e._playerBalancesResponse=t}},{key:"auctionHouseListResponse",get:function(){return e._auctionHouseListResponse},set:function(t){e._auctionHouseListResponse=t}},{key:"profileUpdatedRes",get:function(){return e._profileUpdatedRes},set:function(t){e._profileUpdatedRes=t}},{key:"playerInfoMinMax",get:function(){return e._playerInfoMinMax},set:function(t){e._playerInfoMinMax=t}},{key:"auctionMinMaxPercentage",get:function(){return e._auctionMinMaxPercentage},set:function(t){e._auctionMinMaxPercentage=t}},{key:"auctionCurrentPlay",get:function(){return e._auctionCurrentPlay},set:function(t){e._auctionCurrentPlay=t}},{key:"auctionAvatars",get:function(){return e._auctionAvatars},set:function(t){e._auctionAvatars=t}},{key:"auctionWinner",get:function(){return e._auctionWinner},set:function(t){e._auctionWinner=t}},{key:"AuctionLiveState",get:function(){return e._auctionLiveState},set:function(t){e._auctionLiveState=t}},{key:"MinMaxRecentBid",get:function(){return e._minMaxRecentBid},set:function(t){e._minMaxRecentBid=t}},{key:"upDateProfileResponse",get:function(){return e._upDateProfileResponse},set:function(t){e._upDateProfileResponse=t}},{key:"uploadProfileRes",get:function(){return e._uploadProfileRes},set:function(t){e._uploadProfileRes=t}},{key:"uniqueBidApiResponse",get:function(){return e._uniqueBidApiResponse},set:function(t){e._uniqueBidApiResponse=t}},{key:"myAuctionResponse",get:function(){return e._myAuctionResponse},set:function(t){e._myAuctionResponse=t}},{key:"countryApiResponse",get:function(){return e._countryApiResponse},set:function(t){e._countryApiResponse=t}}]),e}();ie._auctionHouseResponse=null,ie._loginOtpResponse=null,ie._loginDataResponse=null,ie._playerBalancesResponse=null,ie._profileUpdatedRes=null,ie._playerInfoMinMax=null,ie._auctionMinMaxPercentage=null,ie._auctionCurrentPlay=null,ie._auctionHouseListResponse=null,ie._auctionAvatars=null,ie._auctionWinner=null,ie._auctionLiveState=null,ie._minMaxRecentBid=null,ie._upDateProfileResponse=null,ie._uploadProfileRes=null,ie._uniqueBidApiResponse=null,ie._myAuctionResponse=null,ie._countryApiResponse=null,n._RF.pop(),n._RF.push({},"64d40cPm75HMLF7GQPIjIQy","EventEmitter",void 0);var re=function(){function e(){this.events=void 0,this.hosts=void 0,this.events={},this.hosts={}}var t=e.prototype;return t.on=function(e,t,n){"object"!=typeof this.events[e]&&(this.events[e]=[],this.hosts[e]=[]),this.events[e].push(t),this.hosts[e].push(n)},t.removeListener=function(e,t,n){var i;"object"==typeof this.events[e]&&"object"==typeof this.hosts[e]&&(i=this.events[e].indexOf(t))>-1&&(this.events[e].splice(i,1),this.hosts[e].splice(i,1))},t.emit=function(e){var t,n,i,r;if("object"==typeof this.events[e]){i=this.events[e].slice(),n=this.hosts[e].slice(),r=i.length;for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];for(t=0;t<r;t++)null!==this.events[i[t]]?i[t].apply(n[t],a):i[t].apply(this,a)}},t.once=function(e,t,n){var i=arguments,r=this;this.on(e,(function(){r.removeListener(e,t,n),t.apply(r,i)}),n)},e}();n._RF.pop(),n._RF.push({},"ecf6ew4wsRFg5CbxVP05RIf","BigDealEvents",void 0);var oe,ae,se,ue={isLogin:!1,hostname:"",apiBaseURL:"",publicKeyPem:"",is_verified:!1,auctionIndex:0,isBidPlaced:!0,is_Decimal_Count:1,is_MinPrice:.1,countryCodeIndex:0};!function(e){e.TIME_UP="TIME_UP",e.ERROR_MSG_POPUP="ERROR_MSG_POPUP",e.ERROR_MSG_NOTIFY="ERROR_MSG_NOTIFY",e.IS_LOADER_ON="IS_LOADER_ON",e.IS_LOADER_OFF="IS_LOADER_OFF",e.CLOSE_ALL_POPUPS="CLOSE_ALL_POPUPS",e.AUCTION_SELECTION="AUCTION_SELECTION",e.SET_BID_HISTORY="SET_BID_HISTORY",e.PROFILE_UPDATE="PROFILE_UPDATE",e.COUNTRY_DETAILS_FETCHED="COUNTRY_DETAILS_FETCHED",e.ON_SELECT_AUCTION="ON_SELECT_AUCTION",e.ON_AUCTION_COMPLETE="ON_AUCTION_COMPLETE",e.REDIRECT_TO_HOME="REDIRECT_TO_HOME",e.AUCTION_Claim="AUCTION_Claim",e.COUNTRY_CODE_INDEX="COUNTRY_CODE_INDEX"}(oe||(oe={})),function(e){e.CLS_MIN_MAX_BID_PERCENTAGE="CLS_MIN_MAX_BID_PERCENTAGE",e.CLS_AUCTION_MIN_MAX_PERCENTAGE="CLS_AUCTION_MIN_MAX_PERCENTAGE",e.CLS_PLAYER_INFO_MIN_MAX="CLS_PLAYER_INFO_MIN_MAX",e.CLS_AUCTION_RESULT_READY="CLS_AUCTION_RESULT_READY",e.CLS_AUCTION_WINNER="CLS_AUCTION_WINNER",e.CLS_AUCTION_CURRENT_PLAY="CLS_AUCTION_CURRENT_PLAY",e.CLS_AUCTION_AVATARS="CLS_AUCTION_AVATARS",e.CLS_PLAYER_PLAY_CREDIT="CLS_PLAYER_PLAY_CREDIT",e.CLS_AUCTION_STATE="CLS_AUCTION_STATE",e.CLS_AUCTION_ERROR="CLS_AUCTION_ERROR",e.CLS_AUCTION_HOUSE_LOGO_UPDATE="CLS_AUCTION_HOUSE_LOGO_UPDATE",e.CLS_PRODUCT_MEDIA_UPDATE="CLS_PRODUCT_MEDIA_UPDATE",e.CLS_Min_Max_Recent_Bid="CLS_Min_Max_Recent_Bid",e.CLS_MIN_MAX_BID_CANCEL="CLS_MIN_MAX_BID_CANCEL"}(ae||(ae={})),function(e){e.MIN_MAX_BID_PERCENTAGE="min:max:bid:percentage",e.AUCTION_MIN_MAX_PERCENTAGE="auction:min:max:percentage",e.PLAYER_INFO_MIN_MAX="player:info:min:max",e.AUCTION_RESULT_READY="auction:result:ready",e.AUCTION_WINNER="auction:winner",e.AUCTION_CURRENT_PLAY="auction:current:play",e.AUCTION_AVATARS="auction:avatars",e.PLAYER_PLAY_CREDIT="player:plays:credit",e.AUCTION_STATE="auction:state",e.AUCTION_ERROR="auction:error",e.AUCTION_HOUSE_LOGO_UPDATE="auction:house:logo:updated",e.PRODUCT_MEDIA_UPDATE="product:media:updated"}(se||(se={}));var le,ce=new re,pe="Edit_Box_Event_Name";!function(e){e.ACCESS_TOKEN="accessToken",e.USER_ID="userId",e.REFRESH_TOKEN="refreshToken"}(le||(le={}));var he,de,fe,ge=function(){var e=localStorage.getItem("accessToken");return e||console.error("accessToken not found!"),e};n._RF.pop(),n._RF.push({},"c3bd7IuPupIEJ34hgkjutF4","TextHighlightManager",void 0);var be=i.ccclass,me=i.property,ye=be("TextHighlightManager")((fe=ne((de=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"maxLength",fe,Q(t)),t.fullText="",t.popupNode=null,t.showingPopup=!1,t.isEventOn=!1,t.canvas=null,t}Z(t,e);var n=t.prototype;return n.onLoad=function(){this.canvas=r("Canvas/TextHighlight")},n.initr=function(e){if(e&&0!==(null==e?void 0:e.length)){var t=this.getComponent(o);if(t){if(this.fullText=e,e.length>this.maxLength){var n=e.slice(0,3),i=e.slice(-3);t.string=n+"..."+i;var r=this.node;this.isEventOn||(this.isEventOn=!0,r.on(a.EventType.TOUCH_START,this.onHoverEnter,this),r.on(a.EventType.TOUCH_END,this.onHoverLeave,this),r.on(a.EventType.TOUCH_CANCEL,this.onHoverLeave,this))}else t.string=e;s.load("Popup",u,(function(e,t){!e&&t||console.error("Failed to load Popup prefab:",e)}))}else console.warn("Label component not found on this node")}},n.onHoverEnter=function(e){var t=this;this.showingPopup||(this.showingPopup=!0,s.load("Popup",u,(function(e,n){if(!e&&n){t.popupNode=l(n);var i=t.popupNode.getComponentInChildren(o);if(i&&(i.string=t.fullText),t.canvas=r("Canvas/TextHighlight"),t.canvas){t.canvas.addChild(t.popupNode);var a=t.node.getWorldPosition(),s=t.canvas.getComponent(c).convertToNodeSpaceAR(new p(a.x,a.y,0));s.y+=20,t.popupNode.setPosition(s);var u=t.popupNode.getComponent(h);u||(u=t.popupNode.addComponent(h)),u.opacity=0,d(u).to(.3,{opacity:255}).start()}else t.popupNode.destroy()}else console.error("Failed to load Popup prefab:",e)})))},n.onHoverLeave=function(){var e=this;if(this.popupNode&&this.popupNode.isValid){var t=this.popupNode.getComponent(h);t?d(t).to(.2,{opacity:0}).call((function(){e.canvas.destroyAllChildren(),e.popupNode=null,e.showingPopup=!1})).start():(this.popupNode.destroy(),this.popupNode=null,this.showingPopup=!1)}else this.showingPopup=!1},t}(f)).prototype,"maxLength",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),he=de))||he;n._RF.pop(),n._RF.push({},"addf1B+oFhI0qRooyQlQYp0","IndexedDBManager",void 0);var ve=function(){function t(){this.db=null,this.DB_NAME="BigDealDatabase",this.STORE_NAME="KeyValueStore",this.DB_VERSION=1}var n=t.prototype;return n.open=function(){var t=V(e().mark((function t(){var n=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var i=indexedDB.open(n.DB_NAME,n.DB_VERSION);i.onupgradeneeded=function(){var e=i.result;e.objectStoreNames.contains(n.STORE_NAME)||e.createObjectStore(n.STORE_NAME)},i.onsuccess=function(){n.db=i.result,e()},i.onerror=function(){console.error("IndexedDB open error:",i.error),t(i.error)}})));case 1:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n.setItem=function(){var t=V(e().mark((function t(n,i){var r=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.db){e.next=3;break}return e.next=3,this.open();case 3:return e.abrupt("return",new Promise((function(e,t){var o=r.db.transaction(r.STORE_NAME,"readwrite").objectStore(r.STORE_NAME).put(i,n);o.onsuccess=function(){return e()},o.onerror=function(){return t(o.error)}})));case 4:case"end":return e.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.getItem=function(){var t=V(e().mark((function t(n){var i=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.db){e.next=3;break}return e.next=3,this.open();case 3:if(n){e.next=6;break}return console.error("No key provided for getItem"),e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=i.db.transaction(i.STORE_NAME,"readonly").objectStore(i.STORE_NAME).get(n);r.onsuccess=function(){var t;return e(null!=(t=r.result)?t:null)},r.onerror=function(){return t(r.error)}})));case 7:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.deleteItem=function(){var t=V(e().mark((function t(n){var i=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.db){e.next=3;break}return e.next=3,this.open();case 3:return e.abrupt("return",new Promise((function(e,t){var r=i.db.transaction(i.STORE_NAME,"readwrite").objectStore(i.STORE_NAME).delete(n);r.onsuccess=function(){return e()},r.onerror=function(){return t(r.error)}})));case 4:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.clear=function(){var t=V(e().mark((function t(){var n=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.db){e.next=3;break}return e.next=3,this.open();case 3:return e.abrupt("return",new Promise((function(e,t){var i=n.db.transaction(n.STORE_NAME,"readwrite").objectStore(n.STORE_NAME).clear();i.onsuccess=function(){return e()},i.onerror=function(){return t(i.error)}})));case 4:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),X(t,null,[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}();ve._inst=void 0,n._RF.pop(),n._RF.push({},"ba1fbjCzJdGtZdrBIjgMymW","EventManager",void 0);var we=function(){function e(){}return e.clear=function(){e.dispatcher=null},e.getDispatcher=function(){return e.dispatcher||(e.dispatcher=new b),e.dispatcher},e}();we.dispatchCustomEvent=function(e,t,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!0),!t)return null;var r=new qe(e,i);r.detail=n,t.dispatchEvent(r)},we.dispatcher=void 0;var _e,Pe,Ce,ke,Ne,Se,Be,Re,xe,Ee,Oe,Ae,Le,Te,Ie,Me,De,ze,Ue,He,Fe,qe=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n)||this).detail=null,r.detail=i,r}Z(t,e);var n=t.prototype;return n.setUserDetail=function(e){this.detail=this.detail},n.getUserDetail=function(){return this.detail},t}(g);n._RF.pop(),n._RF.push({},"d09b9g+0VdE4acF9w7HDk08","AllBidHistoryManager",void 0);var je=i.ccclass,We=i.property,Ge=(_e=je("AllBidHistoryManager"),Pe=We(u),Ce=We(u),ke=We(a),Ne=We(a),Se=We(a),Be=We(a),Re=We(a),xe=We(m),Ee=We(a),_e((Le=ne((Ae=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"bidHistoryPrefab",Le,Q(e)),te(e,"myBidHistoryPrefab",Te,Q(e)),te(e,"bidHistoryParent",Ie,Q(e)),te(e,"myBidHistoryParent",Me,Q(e)),te(e,"showMoreButton",De,Q(e)),te(e,"bgNode",ze,Q(e)),te(e,"mainPanel",Ue,Q(e)),te(e,"bidScoll",He,Q(e)),te(e,"noBidsLabel",Fe,Q(e)),e.isAnimating=!1,e.localKey="",e.bidMap=new Map,e.nodeMap=new Map,e.myBidNodeMap=new Map,e.allBidEntries=[],e.displayIndex=0,e.displayChunkSize=20,e.isOpen=!1,e}Z(n,t);var i=n.prototype;return i.init=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAnimating&&!this.isOpen){e.next=2;break}return e.abrupt("return");case 2:if(this.isOpen=!0,this.localKey=null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.id,this.localKey){e.next=8;break}return v("Auction ID is not set, cannot initialize AllBidHistoryManager"),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"Auction is not set"),e.abrupt("return");case 8:return this.bidHistoryParent.removeAllChildren(),this.myBidHistoryParent.removeAllChildren(),this.nodeMap.clear(),this.bidMap.clear(),this.myBidNodeMap.clear(),e.next=15,this.loadFromStorage();case 15:return this.allBidEntries=Array.from(this.bidMap.entries()),this.displayIndex=0,this.allBidEntries.length>0?this.noBidsLabel.active=!1:this.noBidsLabel.active=!0,this.renderNextChunk(),e.next=21,this.setMyBidsInit();case 21:this.in();case 22:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.setMyBidsInit=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.localKey=null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.id,this.bidHistoryParent.removeAllChildren(),this.myBidHistoryParent.removeAllChildren(),this.nodeMap.clear(),this.bidMap.clear(),this.myBidNodeMap.clear(),e.next=8,this.loadFromStorage();case 8:this.allBidEntries=Array.from(this.bidMap.entries()),this.displayIndex=0,this.renderNextChunk(),this.renderMyLast10Bids();case 12:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addBid=function(e,t){var n=this.bidMap.has(e);this.bidMap.set(e,t),n?(this.updateNode(e,t),this.updateMyBidNode(e,t)):(this.createBidNode(e,t,this.nodeMap.size),this.createMyBidNode(e,t))},i.removeBid=function(e){if(console.log("this.bidMap befor AAAAA->"+this.bidMap.size),this.bidMap.get(e)){var t=this.bidMap.get(e);t&&(t.isUnique=!1,this.bidMap.set(e,t)),console.log("data remove data ",t),console.log("this.bidMap aaa AAAA ->"+this.bidMap.size),this.removeBidNode(e),this.removeMyBidNode(e),this.saveToStorage()}},i.loadFromStorage=function(){var t=V(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.inst.getItem(this.localKey)){e.next=5;break}return e.next=3,ve.inst.getItem(this.localKey);case 3:if(n=e.sent)try{this.bidMap=new Map(JSON.parse(n))}catch(e){console.error("Error parsing bid storage",e),this.bidMap.clear()}case 5:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.saveToStorage=function(){ve.inst.setItem(this.localKey,JSON.stringify(Array.from(this.bidMap.entries())))},i.createBidNode=function(e,t,n,i){var r,a,s;void 0===i&&(i=!0);var u=l(this.bidHistoryPrefab),c=null==(r=u.getChildByName("S. No."))?void 0:r.getComponent(o);c&&(c.string=(n+1).toString());var p=null==(a=u.getChildByName("Bid"))?void 0:a.getComponent(o);p&&(p.string=Number(t.bidPrice).toString(),p.color=t.isUnique?new y(0,255,0):new y(255,255,255));var h=null==(s=u.getChildByName("Time"))?void 0:s.getComponent(o);h&&(h.string=t.Time);var d=u.getChildByName("Unique");d&&d.children.length>=2&&(d.children[0].active=t.isUnique,d.children[1].active=!t.isUnique),this.bidHistoryParent.addChild(u),i&&u.setSiblingIndex(0),this.nodeMap.set(e,u)},i.updateNode=function(e,t){var n,i,r=this.nodeMap.get(e);if(r&&r.isValid){var a=null==(n=r.getChildByName("Bid"))?void 0:n.getComponent(o);a&&(a.string=Number(t.bidPrice).toString(),a.color=t.isUnique?new y(0,255,0):new y(255,255,255));var s=null==(i=r.getChildByName("Time"))?void 0:i.getComponent(o);s&&(s.string=t.Time);var u=r.getChildByName("Unique");u&&u.children.length>=2&&(u.children[0].active=t.isUnique,u.children[1].active=!t.isUnique)}},i.removeBidNode=function(e){var t=this.nodeMap.get(e);if(t){var n,i=null==(n=t.getChildByName("Bid"))?void 0:n.getComponent(o);i&&(i.color=new y(255,255,255))}},i.renderNextChunk=function(){var e,t=this,n=this.allBidEntries.length,i=!1;if(0===this.displayIndex){var r=Math.max(n-this.displayChunkSize,0),o=n;e=this.allBidEntries.slice(r,o),i=!0}else{var a=n-this.displayChunkSize-this.displayIndex,s=n-this.displayIndex;(e=this.allBidEntries.slice(Math.max(0,a),Math.max(0,s))).reverse(),i=!1}e.forEach((function(e,r){var o=e[0],a=e[1];t.nodeMap.has(o)||t.createBidNode(o,a,n-(t.displayIndex+r),i)})),this.displayIndex+=this.displayChunkSize,this.displayIndex>=n&&this.showMoreButton?this.showMoreButton.active=!1:this.showMoreButton.active=!0},i.createMyBidNode=function(e,t){var n,i=l(this.myBidHistoryPrefab),r=null==(n=i.getChildByName("Amount"))?void 0:n.getComponent(o);r&&(r.string=Number(t.bidPrice).toString(),r.color=t.isUnique?new y(0,255,0):new y(255,255,255)),this.myBidHistoryParent.insertChild(i,0),this.myBidNodeMap.set(e,i)},i.updateMyBidNode=function(e,t){var n,i=this.myBidNodeMap.get(e);if(i&&i.isValid){var r=null==(n=i.getChildByName("Amount"))?void 0:n.getComponent(o);r&&(r.string=Number(t.bidPrice).toString(),r.color=t.isUnique?new y(0,255,0):new y(255,255,255))}},i.removeMyBidNode=function(e){var t=this.myBidNodeMap.get(e);if(t){var n,i=null==(n=t.getChildByName("Amount"))?void 0:n.getComponent(o);i&&(i.color=new y(255,255,255))}},i.renderMyLast10Bids=function(){var e=this;this.myBidHistoryParent.removeAllChildren(),this.myBidNodeMap.clear(),this.allBidEntries.forEach((function(t){var n=t[0],i=t[1];e.createMyBidNode(n,i)}))},i.onShowMoreClicked=function(){this.renderNextChunk()},i.in=function(){if(!this.isAnimating&&this.mainPanel&&this.bgNode){this.isAnimating=!0,this.mainPanel.active=!0,this.mainPanel.setPosition(0,-2e3,0),this.bidScoll.scrollToTop(.1);var e=this.bgNode.getComponent(h);e&&(e.opacity=0,this.bgNode.active=!0,d(e).to(.3,{opacity:180}).start()),d(this.mainPanel).to(.3,{position:new p(0,0,0)}).call((function(){})).start()}},i.out=function(){var e=this;if(this.isOpen&&this.isAnimating&&this.mainPanel&&this.bgNode){this.isAnimating=!1;var t=this.bgNode.getComponent(h);t&&d(t).to(.3,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.mainPanel).to(.3,{position:new p(0,-2e3,0)}).call((function(){e.mainPanel.active=!1,e.isOpen=!1})).start()}},n}(f)).prototype,"bidHistoryPrefab",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=ne(Ae.prototype,"myBidHistoryPrefab",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=ne(Ae.prototype,"bidHistoryParent",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=ne(Ae.prototype,"myBidHistoryParent",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=ne(Ae.prototype,"showMoreButton",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=ne(Ae.prototype,"bgNode",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=ne(Ae.prototype,"mainPanel",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=ne(Ae.prototype,"bidScoll",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=ne(Ae.prototype,"noBidsLabel",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=Ae))||Oe);function Ye(e,t,n){if(void 0===n&&(n=8),e&&e.node){e.string=t;var i=e.node.getComponent(ye);i||((i=e.node.addComponent(ye)).maxLength=n),i.initr(t)}else console.warn("Invalid Label passed to applyHighlight")}n._RF.pop(),n._RF.push({},"7697aWtZKND6I8DiZoCg/nf","BidStorageManager",void 0);var Ve=function(){function t(e){this.bidMap=new Map,this.localKey="",this.setLocalKey(e)}var n=t.prototype;return n.setLocalKey=function(e){this.localKey=e},n.init=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFromStorage();case 2:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.addBid=function(e,t){this.bidMap.set(e,t),this.saveToStorage()},n.removeBid=function(e){var t=this.bidMap.get(e);t&&(t.isUnique=!1,this.bidMap.set(e,t))},n.getBid=function(e){return this.bidMap.get(e)},n.getAllBids=function(){return Array.from(this.bidMap.entries())},n.loadFromStorage=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.inst.getItem(this.localKey)){e.next=5;break}return e.next=3,ve.inst.getItem(this.localKey);case 3:if(n=e.sent)try{i=JSON.parse(n),this.bidMap=new Map(i)}catch(e){console.error("Error parsing bid data",e),this.bidMap.clear()}case 5:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.saveToStorage=function(){ve.inst.setItem(this.localKey,JSON.stringify(Array.from(this.bidMap.entries())))},n.getUniqueBidCount=function(){for(var e,t=0,n=ee(this.bidMap);!(e=n()).done;){e.value[1].isUnique&&t++}return t},t}();n._RF.pop(),n._RF.push({},"1c8fegG9xRLnJ4qI2PxCBRR","MyAudioManager",void 0);var Ke=function(){function e(){this._audioSource=void 0,this._isSoundOn=!0,this.SOUND_KEY="soundOn";var e=new a;e.name="__audioMgr__",_.getScene().addChild(e),_.addPersistRootNode(e),this._audioSource=e.addComponent(P);var t=localStorage.getItem(this.SOUND_KEY);this._isSoundOn=null===t||"true"===t}e.getInstance=function(){throw new Error("Method not implemented.")};var t=e.prototype;return t.toggleSound=function(){this._isSoundOn=!this._isSoundOn,localStorage.setItem(this.SOUND_KEY,this._isSoundOn.toString()),this._isSoundOn||this.stop()},t.playOneShot=function(e,t){var n=this;void 0===t&&(t=1),this._isSoundOn&&(e instanceof w?this._audioSource.playOneShot(e,t):s.load("Sounds/"+e,(function(e,i){e?console.log(e):n._audioSource.playOneShot(i,t)})))},t.play=function(e,t){var n=this;void 0===t&&(t=1),this._isSoundOn&&(e instanceof w?(this._audioSource.stop(),this._audioSource.clip=e,this._audioSource.play(),this.audioSource.volume=t):s.load("Sounds/"+e,(function(e,i){e?console.log(e):(n._audioSource.stop(),n._audioSource.clip=i,n._audioSource.play(),n.audioSource.volume=t)})))},t.stop=function(){this._audioSource.stop()},t.pause=function(){this._audioSource.pause()},t.resume=function(){this._isSoundOn&&this._audioSource.play()},X(e,[{key:"audioSource",get:function(){return this._audioSource}},{key:"isSoundOn",get:function(){return this._isSoundOn}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new e),this._inst}}]),e}();Ke._inst=void 0,n._RF.pop(),n._RF.push({},"6fa1ef6WetOj6Rjs46ccHjh","ApiUrls",void 0);var Xe={LOGIN:"v2/user/login",SEND_OTP:"v2/user/send-otp",REGISTRATION:"v1/user/",AUCTION_HOUSE:"v1/auction-house/auction-house-id?subdomain=",WALLET_BALANCE:"v1/user/wallet/balance/",UPLOAD_IMAGE:"v1/media/multiple",AUCTION_LIST:"v1/auction-house/auction/list",SHIPPING_INFO:"v1/shipping-info",LOGOUT:"v1/user/logout",UNIQUE_BIDS:"v1/auction/unique-bids/",TRANSFER:"ransfer/plays",PIN_TOGGLE:"v1/auction/pin-toggle/",SEND_OTP_XP_TRANSFER:"v1/user/send-otp-xptransfer",VERIFY_OTP_XP_TRANSFER:"v1/user/verify-otp-xptransfer",AUCTION_HOUSE_CONFIGS:"v1/auction-house/",TRANSACTION_HISTORY:function(e,t){return"v1/user/player-transaction/"+e+"?limit=30&page=0&entryType="+t},DELIVERY_STATUS:"v1/auction/update-delivery-status",COUNTRY_DETAILS:"v1/location/countries/list",VERIFY_DELIVERY_STATUS:"v1/auction/verify-delivery-status"};n._RF.pop(),n._RF.push({},"2af58UD7eFIEY0Xc5pEtG5T","ErrorHandler",void 0);var Ze=function(){function e(e){this.errorCodeData=void 0,this.errorType=void 0,this.errorPopNode=null,this.errorPopPrefab=null,this.errorCodeData=e.ErrorCodeData,this.errorType=e.ErrorType,console.log("ErrorType in error script:",this.errorType,this.errorCodeData),console.log("this.errorCodeData",this.errorCodeData);var t=JSON.parse(this.errorCodeData.message);console.log(t.message),we.getDispatcher().emit(oe.ERROR_MSG_POPUP,t.message||"Unknown error")}return e.prototype.showErrorPopup=function(){this.errorPopPrefab?console.log("Showing popup for error type:",this.errorType):console.warn("Popup prefab not loaded yet.")},e}();n._RF.pop(),n._RF.push({},"745518BdXxDiYiN5j/0EcQi","CookieUtils",void 0);var Je=function(){function e(){}return e.setCookie=function(e,t,n){void 0===n&&(n=3650);var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r=location.hostname,o=e+"="+encodeURIComponent(t)+"; path=/; domain="+r+"; expires="+i.toUTCString()+"; secure; SameSite=None";document.cookie=o,console.log("[CookieManager] Set: "+o)},e.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)")),n=t?decodeURIComponent(t[2]):null;return console.log("[CookieManager] Get: "+e+" = "+n),n},e.eraseCookie=function(e){this.setCookie(e,"",-1)},e.deleteCookie=function(e){var t=e+"=; path=/; domain="+location.hostname+"; expires=Thu, 01 Jan 1970 00:00:00 GMT; secure; SameSite=None";document.cookie=t,console.log("[CookieManager] Delete: "+t)},e.clearAllCookies=function(){for(var e,t=ee(document.cookie.split(";"));!(e=t()).done;){var n=e.value,i=n.indexOf("="),r=i>-1?n.substring(0,i).trim():n.trim();this.deleteCookie(r)}console.log("[CookieManager] All cookies cleared.")},e}();n._RF.pop();var Qe,$e,et,tt=new(function(){function e(){this._registry={},this._moduleCache={}}var t=e.prototype;return t.define=function(e,t,n){this._registry[e]={factory:t,resolveMap:n}},t.require=function(e){return this._require(e)},t.throwInvalidWrapper=function(e,t){throw new Error("Module '"+e+"' imported from '"+t+"' is expected be an ESM-wrapped CommonJS module but it doesn't.")},t._require=function(e,t){var n=this._moduleCache[e];if(n)return n.exports;var i={id:e,exports:{}};return this._moduleCache[e]=i,this._tryModuleLoad(i,e),i.exports},t._resolve=function(e,t){return this._resolveFromInfos(e,t)||this._throwUnresolved(e,t)},t._resolveFromInfos=function(e,t){var n,i;return e in cjsInfos?e:t&&null!=(n=null==(i=cjsInfos[t])?void 0:i.resolveCache[e])?n:void 0},t._tryModuleLoad=function(e,t){var n=!0;try{this._load(e,t),n=!1}finally{n&&delete this._moduleCache[t]}},t._load=function(e,t){var n=this._loadWrapper(t),i=n.factory,r=n.resolveMap,o=this._createRequire(e),a=r?this._createRequireWithResolveMap("function"==typeof r?r():r,o):o;i(e.exports,a,e)},t._loadWrapper=function(e){return e in this._registry?this._registry[e]:this._loadHostProvidedModules(e)},t._loadHostProvidedModules=function(e){return{factory:function(t,n,i){if("undefined"==typeof require)throw new Error("Current environment does not provide a require() for requiring '"+e+"'.");try{i.exports=require(e)}catch(t){throw new Error("Exception thrown when calling host defined require('"+e+"').",{cause:t})}}}},t._createRequire=function(e){var t=this;return function(n){return t._require(n,e)}},t._createRequireWithResolveMap=function(e,t){return function(n){var i=e[n];if(i)return t(i);throw new Error("Unresolved specifier "+n)}},t._throwUnresolved=function(e,t){throw new Error("Unable to resolve "+e+" from "+parent+".")},e}()),nt="file:///Users/admin/Project/CocosProject/AuctionX/assets/Socket_Io.js";tt.define(nt,(function(e,t,n,i,r){var o,a;o=self,a=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){var i=n(24),r=n(25),o=String.fromCharCode(30);e.exports={protocol:4,encodePacket:i,encodePayload:function(e,t){var n=e.length,r=new Array(n),a=0;e.forEach((function(e,s){i(e,!1,(function(e){r[s]=e,++a===n&&t(r.join(o))}))}))},decodePacket:r,decodePayload:function(e,t){for(var n=e.split(o),i=[],a=0;a<n.length;a++){var s=r(n[a],t);if(i.push(s),"error"===s.type)break}return i}}},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(0),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(i,e);var t,n=o(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this)).opts=e,t.query=e.query,t.readyState="",t.socket=e.socket,t}return(t=[{key:"onError",value:function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(e){var t=u.decodePacket(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){this.emit("packet",e)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,t),i}(n(1));e.exports=l},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;var p,h=n(1),d=n(30),f=n(15);t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(p=t.PacketType||(t.PacketType={}));var g=function(){function e(){u(this,e)}return c(e,[{key:"encode",value:function(e){return e.type!==p.EVENT&&e.type!==p.ACK||!f.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===p.EVENT?p.BINARY_EVENT:p.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==p.BINARY_EVENT&&e.type!==p.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}},{key:"encodeAsBinary",value:function(e){var t=d.deconstructPacket(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}]),e}();t.Encoder=g;var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}(n);function n(){return u(this,n),t.call(this)}return c(n,[{key:"add",value:function(e){var t;if("string"==typeof e)(t=this.decodeString(e)).type===p.BINARY_EVENT||t.type===p.BINARY_ACK?(this.reconstructor=new m(t),0===t.attachments&&r(s(n.prototype),"emit",this).call(this,"decoded",t)):r(s(n.prototype),"emit",this).call(this,"decoded",t);else{if(!f.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,r(s(n.prototype),"emit",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,i={type:Number(e.charAt(0))};if(void 0===p[i.type])throw new Error("unknown packet type "+i.type);if(i.type===p.BINARY_EVENT||i.type===p.BINARY_ACK){for(var r=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var a=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);i.nsp=e.substring(a,t)}else i.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}i.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var c=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!n.isPayloadValid(i.type,c))throw new Error("invalid payload");i.data=c}return i}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case p.CONNECT:return"object"===i(t);case p.DISCONNECT:return void 0===t;case p.CONNECT_ERROR:return"string"==typeof t||"object"===i(t);case p.EVENT:case p.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case p.ACK:case p.BINARY_ACK:return Array.isArray(t)}}}]),n}(h);t.Decoder=b;var m=function(){function e(t){u(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return c(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}()},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));for(var a,s,u=n.exec(e||""),l={},c=14;c--;)l[i[c]]=u[c]||"";return-1!=r&&-1!=o&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n}(0,l.path),l.queryKey=(a=l.query,s={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(s[t]=n)})),s),l}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;var u=n(20),l=n(14),c=n(5),p=n(16),h=n(31),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(a,e);var t,n=o(a);function a(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=n.call(this)).nsps={},r.subs=[],e&&"object"===i(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",r.opts=t,r.reconnection(!1!==t.reconnection),r.reconnectionAttempts(t.reconnectionAttempts||1/0),r.reconnectionDelay(t.reconnectionDelay||1e3),r.reconnectionDelayMax(t.reconnectionDelayMax||5e3),r.randomizationFactor(t.randomizationFactor||.5),r.backoff=new h({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==t.timeout?2e4:t.timeout),r._readyState="closed",r.uri=e;var o=t.parser||c;return r.encoder=new o.Encoder,r.decoder=new o.Decoder,r._autoConnect=!1!==t.autoConnect,r._autoConnect&&r.open(),r}return(t=[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=u(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var r=p.on(n,"open",(function(){i.onopen(),e&&e()})),o=p.on(n,"error",(function(n){i.cleanup(),i._readyState="closed",t.emitReserved("error",n),e?e(n):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout;0===a&&r();var s=setTimeout((function(){r(),n.close(),n.emit("error",new Error("timeout"))}),a);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(r),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(p.on(e,"ping",this.onping.bind(this)),p.on(e,"data",this.ondata.bind(this)),p.on(e,"error",this.onerror.bind(this)),p.on(e,"close",this.onclose.bind(this)),p.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new l.Socket(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var i=n[t];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var i=setTimeout((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(a.prototype,t),a}(n(17).StrictEventEmitter);t.Manager=d},function(e,t,n){var i=n(9),r=n(23),o=n(27),a=n(28);t.polling=function(e){var t=!1,n=!1,a=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,u=location.port;u||(u=s?443:80),t=e.hostname!==location.hostname||u!==e.port,n=e.secure!==s}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new r(e);if(!a)throw new Error("JSONP disabled");return new o(e)},t.websocket=a},function(e,t,n){var i=n(22),r=n(2);e.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(3),c=n(4),p=n(0),h=n(12),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,e);var t,n=a(i);function i(){return r(this,i),n.apply(this,arguments)}return(t=[{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;function n(){t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",(function(){--i||n()}))),this.writable||(i++,this.once("drain",(function(){--i||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;p.decodePayload(e,this.socket.binaryType).forEach((function(e,n,i){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this;function t(){e.write([{type:"close"}])}"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,p.encodePayload(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=h()),this.supportsBinary||e.sid||(e.b64=1),e=c.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}},{key:"name",get:function(){return"polling"}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,t),i}(l);e.exports=d},function(e,t){var n=Object.create(null);n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";var i=Object.create(null);Object.keys(n).forEach((function(e){i[n[e]]=e})),e.exports={PACKET_TYPES:n,PACKET_TYPES_REVERSE:i,ERROR_PACKET:{type:"error",data:"parser error"}}},function(e,t,n){var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},a=0,s=0;function u(e){var t="";do{t=r[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=u(+new Date);return e!==i?(a=0,i=e):e+"."+u(a++)}for(;s<64;s++)o[r[s]]=s;l.encode=u,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+o[e.charAt(s)];return t},e.exports=l},function(e,t){e.exports.pick=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;var p=n(5),h=n(16),d=n(17),f=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n=u(i);function i(e,t,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=n.call(this)).receiveBuffer=[],o.sendBuffer=[],o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=t,o.ids=0,o.acks={},o.receiveBuffer=[],o.sendBuffer=[],o.connected=!1,o.disconnected=!0,o.flags={},r&&r.auth&&(o.auth=r.auth),o.io._autoConnect&&o.open(),o}return(t=[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[h.on(e,"open",this.onopen.bind(this)),h.on(e,"packet",this.onpacket.bind(this)),h.on(e,"error",this.onerror.bind(this)),h.on(e,"close",this.onclose.bind(this))]}}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(f.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.unshift(e);var r={type:p.PacketType.EVENT,data:n,options:{}};r.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(this.acks[this.ids]=n.pop(),r.id=this.ids++);var o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,a=this.flags.volatile&&(!o||!this.connected);return a||(this.connected?this.packet(r):this.sendBuffer.push(r)),this.flags={},this}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:p.PacketType.CONNECT,data:t})})):this.packet({type:p.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case p.PacketType.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case p.PacketType.EVENT:case p.PacketType.BINARY_EVENT:this.onevent(e);break;case p.PacketType.ACK:case p.PacketType.BINARY_ACK:this.onack(e);break;case p.PacketType.DISCONNECT:this.ondisconnect();break;case p.PacketType.CONNECT_ERROR:var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=r(this._anyListeners.slice());try{for(n.s();!(t=n.n()).done;)t.value.apply(this,e)}catch(e){n.e(e)}finally{n.f()}}a(c(i.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];t.packet({type:p.PacketType.ACK,id:e,data:r})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitReserved("connect"),this.emitBuffered()}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:p.PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"active",get:function(){return!!this.subs}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,t),i}(d.StrictEventEmitter);t.Socket=g},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;var r="function"==typeof ArrayBuffer,o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);function u(e){return r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||a&&e instanceof Blob||s&&e instanceof File}t.isBinary=u,t.hasBinary=function e(t,n){if(!t||"object"!==i(t))return!1;if(Array.isArray(t)){for(var r=0,o=t.length;r<o;r++)if(e(t[r]))return!0;return!1}if(u(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return!0;return!1}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(i,e);var t,n=s(i);function i(){return r(this,i),n.apply(this,arguments)}return(t=[{key:"on",value:function(e,t){return o(l(i.prototype),"on",this).call(this,e,t),this}},{key:"once",value:function(e,t){return o(l(i.prototype),"once",this).call(this,e,t),this}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=o(l(i.prototype),"emit",this)).call.apply(t,[this,e].concat(r)),this}},{key:"emitReserved",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=o(l(i.prototype),"emit",this)).call.apply(t,[this,e].concat(r)),this}},{key:"listeners",value:function(e){return o(l(i.prototype),"listeners",this).call(this,e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,t),i}(n(1));t.StrictEventEmitter=c},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.io=t.Manager=t.protocol=void 0;var r=n(19),o=n(7),a=n(14);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return a.Socket}}),e.exports=t=u;var s=t.managers={};function u(e,t){"object"===i(e)&&(t=e,e=void 0),t=t||{};var n,a=r.url(e,t.path),u=a.source,l=a.id,c=a.path,p=s[l]&&c in s[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?n=new o.Manager(u,t):(s[l]||(s[l]=new o.Manager(u,t)),n=s[l]),a.query&&!t.query&&(t.query=a.queryKey),n.socket(a.path,t)}t.io=u;var l=n(5);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.connect=u;var c=n(7);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return c.Manager}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;var i=n(6);t.url=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":"),a=o?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}},function(e,t,n){var i=n(21);e.exports=function(e,t){return new i(e,t)},e.exports.Socket=i,e.exports.protocol=i.protocol,e.exports.Transport=n(3),e.exports.transports=n(8),e.exports.parser=n(0)},function(e,t,n){function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(8),p=n(1),h=n(0),d=n(6),f=n(4),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n=s(u);function u(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,u),t=n.call(this),e&&"object"===r(e)&&(a=e,e=null),e?(e=d(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=d(a.host).host),t.secure=null!=a.secure?a.secure:"undefined"!=typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=t.secure?"443":"80"),t.hostname=a.hostname||("undefined"!=typeof location?location.hostname:"localhost"),t.port=a.port||("undefined"!=typeof location&&location.port?location.port:t.secure?443:80),t.transports=a.transports||["polling","websocket"],t.readyState="",t.writeBuffer=[],t.prevBufferLen=0,t.opts=i({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},a),t.opts.path=t.opts.path.replace(/\/$/,"")+"/","string"==typeof t.opts.query&&(t.opts.query=f.decode(t.opts.query)),t.id=null,t.upgrades=null,t.pingInterval=null,t.pingTimeout=null,t.pingTimeoutTimer=null,"function"==typeof addEventListener&&(addEventListener("beforeunload",(function(){t.transport&&(t.transport.removeAllListeners(),t.transport.close())}),!1),"localhost"!==t.hostname&&(t.offlineEventListener=function(){t.onClose("transport close")},addEventListener("offline",t.offlineEventListener,!1))),t.open(),t}return(t=[{key:"createTransport",value:function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=h.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=i({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new c[e](n)}},{key:"open",value:function(){var e;if(this.opts.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){var t=this.createTransport(e,{probe:1}),n=!1,i=this;function r(){if(i.onlyBinaryUpgrades){var e=!this.supportsBinary&&i.transport.supportsBinary;n=n||e}n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(e){if(!n)if("pong"===e.type&&"probe"===e.data){if(i.upgrading=!0,i.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,i.transport.pause((function(){n||"closed"!==i.readyState&&(p(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())}))}else{var r=new Error("probe error");r.transport=t.name,i.emit("upgradeError",r)}})))}function o(){n||(n=!0,p(),t.close(),t=null)}function a(e){var n=new Error("probe error: "+e);n.transport=t.name,o(),i.emit("upgradeError",n)}function s(){a("transport closed")}function l(){a("socket closed")}function c(e){t&&e.name!==t.name&&o()}function p(){t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",s),i.removeListener("close",l),i.removeListener("upgrading",c)}u.priorWebsocketSuccess=!1,t.once("open",r),t.once("error",a),t.once("close",s),this.once("close",l),this.once("upgrading",c),t.open()}},{key:"onOpen",value:function(){if(this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}}},{key:"onHandshake",value:function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var e=this;function t(){e.onClose("forced close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():t()})):this.upgrading?i():t()),this}},{key:"onError",value:function(e){u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(u.prototype,t),u}(p);g.priorWebsocketSuccess=!1,g.protocol=h.protocol,e.exports=g},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=n(9),f=n(10),g=n(1),b=n(13).pick,m=n(2);function y(){}var v=null!=new d({xdomain:!1}).responseType,w=function(e){u(n,e);var t=c(n);function n(e){var i;if(o(this,n),i=t.call(this,e),"undefined"!=typeof location){var r="https:"===location.protocol,a=location.port;a||(a=r?443:80),i.xd="undefined"!=typeof location&&e.hostname!==location.hostname||a!==e.port,i.xs=e.secure!==r}var s=e&&e.forceBase64;return i.supportsBinary=v&&!s,i}return s(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e,{xd:this.xd,xs:this.xs},this.opts),new _(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this.request({method:"POST",data:e}),i=this;n.on("success",t),n.on("error",(function(e){i.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),n}(f),_=function(e){u(n,e);var t=c(n);function n(e,i){var r;return o(this,n),(r=t.call(this)).opts=i,r.method=i.method||"GET",r.uri=e,r.async=!1!==i.async,r.data=void 0!==i.data?i.data:null,r.create(),r}return s(n,[{key:"create",value:function(){var e=b(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var t=this.xhr=new d(e),i=this;try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.opts.extraHeaders[r])}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?i.onLoad():setTimeout((function(){i.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void setTimeout((function(){i.onError(e)}),0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=y:this.xhr.onreadystatechange=y,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"hasXDR",value:function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),n}(g);function P(){for(var e in _.requests)_.requests.hasOwnProperty(e)&&_.requests[e].abort()}_.requestsCount=0,_.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",P):"function"==typeof addEventListener&&addEventListener("onpagehide"in m?"pagehide":"unload",P,!1)),e.exports=w,e.exports.Request=_},function(e,t,n){var i=n(11).PACKET_TYPES,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,a=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=function(e,t,n){var s,u=e.type,l=e.data;return r&&l instanceof Blob?t?n(l):a(l,n):o&&(l instanceof ArrayBuffer||(s=l,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer))?t?n(l instanceof ArrayBuffer?l:l.buffer):a(new Blob([l]),n):n(i[u]+(l||""))}},function(e,t,n){var i,r=n(11),o=r.PACKET_TYPES_REVERSE,a=r.ERROR_PACKET;"function"==typeof ArrayBuffer&&(i=n(26));var s=function(e,t){if(i){var n=i.decode(e);return u(n,t)}return{base64:!0,data:e}},u=function(e,t){switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=function(e,t){if("string"!=typeof e)return{type:"message",data:u(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:s(e.substring(1),t)}:o[n]?e.length>1?{type:o[n],data:e.substring(1)}:{type:o[n]}:a}},function(e,t){!function(e){t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;n<r;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,i,r,o,a,s=.75*t.length,u=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),p=new Uint8Array(c);for(n=0;n<u;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),p[l++]=i<<2|r>>4,p[l++]=(15&r)<<4|o>>2,p[l++]=(3&o)<<6|63&a;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c,p=n(10),h=n(2),d=/\n/g,f=/\\n/g,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,e);var t,n=a(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).query=t.query||{},c||(c=h.___eio=h.___eio||[]),t.index=c.length;var r=u(t);return c.push((function(e){r.onData(e)})),t.query.j=t.index,t}return(t=[{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r(l(i.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}},{key:"doWrite",value:function(e,t){var n,i=this;if(!this.form){var r=document.createElement("form"),o=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=a,r.method="POST",r.setAttribute("accept-charset","utf-8"),o.name="d",r.appendChild(o),document.body.appendChild(r),this.form=r,this.area=o}function s(){u(),t()}function u(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=i.iframeId,n.src="javascript:0"}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n}this.form.action=this.uri(),u(),e=e.replace(f,"\\\n"),this.area.value=e.replace(d,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&s()}:this.iframe.onload=s}},{key:"supportsBinary",get:function(){return!1}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,t),i}(p);e.exports=g},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n(3),l=n(0),c=n(4),p=n(12),h=n(13).pick,d=n(29),f=d.WebSocket,g=d.usingBrowserWebSocket,b=d.defaultBinaryType,m="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(i,e);var t,n=o(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).supportsBinary=!e.forceBase64,t}return(t=[{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=m?{}:h(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=g&&!m?t?new f(e,t):new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||b,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=e.length,i=0,r=n;i<r;i++)!function(e){l.encodePacket(e,t.supportsBinary,(function(i){var r={};g||(e.options&&(r.compress=e.options.compress),t.opts.perMessageDeflate&&("string"==typeof i?Buffer.byteLength(i):i.length)<t.opts.perMessageDeflate.threshold&&(r.compress=!1));try{g?t.ws.send(i):t.ws.send(i,r)}catch(e){}--n||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[i])}},{key:"onClose",value:function(){u.prototype.onClose.call(this)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=p()),this.supportsBinary||(e.b64=1),(e=c.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}},{key:"check",value:function(){return!(!f||"__initialize"in f&&this.name===i.prototype.name)}},{key:"name",get:function(){return"websocket"}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,t),i}(u);e.exports=y},function(e,t,n){var i=n(2);e.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;var r=n(15);t.deconstructPacket=function(e){var t=[],n=e.data,o=e;return o.data=function e(t,n){if(!t)return t;if(r.isBinary(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(Array.isArray(t)){for(var a=new Array(t.length),s=0;s<t.length;s++)a[s]=e(t[s],n);return a}if("object"===i(t)&&!(t instanceof Date)){var u={};for(var l in t)t.hasOwnProperty(l)&&(u[l]=e(t[l],n));return u}return t}(n,t),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"===i(t))for(var o in t)t.hasOwnProperty(o)&&(t[o]=e(t[o],n));return t}(e.data,t),e.attachments=void 0,e}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])},"object"==typeof e&&"object"==typeof n?n.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof e?e.io=a():o.io=a(),Qe=n.exports,n.exports.io}),{}),tt.require(nt),n._RF.push({},"89ded4rS4ZIvrxOPvbCd0Ku","BigDealSocketManager",void 0);var it=(0,i.ccclass)("BigDealSocketManager")(((et=function(){function t(){this.socket=null,this.baseUrl="",this.connTimeoutMs=1e4,this.reconnecting=!1,this.reconnectAttempts=0,this.maxReconnectDelayMs=15e3,this.minReconnectDelayMs=1e3,this.keepAliveInterval=null,this.watchdogInterval=null,this.lastActivityTs=Date.now(),this.keepAliveMs=25e3,this.watchdogCheckMs=15e3,this.driftThresholdMs=6e4,this.offlineQueue=[],this.waiters=[],this.baseUrl=ue.apiBaseURL||"",this.setupLifecycleHandlers(),this.setupNetworkHandlers()}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.clearInstance=function(){var e,n,i;null!=(e=t.instance)&&e.socket&&t.instance.socket.disconnect(),null==(n=t.instance)||n.stopKeepAlive(),null==(i=t.instance)||i.stopWatchdog(),t.instance=null};var n=t.prototype;return n.init=function(){var t=V(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=this.socket)||!n.connected){e.next=2;break}return e.abrupt("return",this.socket);case 2:return e.abrupt("return",this.connect());case 3:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.connect=function(){var e=this;return new Promise((function(t,n){try{var i,r,o=null==ie||null==(i=ie.loginDataResponse)||null==(r=i.data)?void 0:r.accessToken,a=o?e.baseUrl+"v1?accesstoken="+encodeURIComponent(o):e.baseUrl+"v2";e.socket&&(e.teardownSocketListeners(),e.socket.disconnect(),e.socket=null),console.log("[Socket] Connecting:",a),e.socket=Qe.io(a,{transports:["websocket"],reconnection:!1,timeout:e.connTimeoutMs,autoConnect:!0,multiplex:!1}),e.socket.on("connect",(function(){console.log(" [Socket] connected",e.socket.id),ue.isBidPlaced=!0,e.lastActivityTs=Date.now(),e.reconnectAttempts=0,e.reconnecting=!1,e.registerSocketEvents(),e.startKeepAlive(),e.startWatchdog(),e.flushOfflineQueue(),e.bootstrapStreams(),e.waiters.splice(0).forEach((function(t){return t(e.socket)})),t(e.socket)})),e.socket.on("connect_error",(function(t){console.error(" [Socket] connect_error:",(null==t?void 0:t.message)||t),n(t),e.scheduleReconnect("connect_error")})),e.socket.on("connect_timeout",(function(){console.error(" [Socket] connect_timeout"),n(new Error("connect_timeout")),e.scheduleReconnect("connect_timeout")})),e.socket.on("disconnect",(function(t){console.warn(" [Socket] disconnected:",t),e.registerSocketEventsClosed(),e.stopKeepAlive(),e.scheduleReconnect("disconnect")})),e.socket.onAny((function(){e.lastActivityTs=Date.now()}))}catch(t){console.error(" [Socket] init error:",t),n(t),e.scheduleReconnect("exception")}}))},n.scheduleReconnect=function(e){var t=this;if(!this.reconnecting){this.reconnecting=!0,this.reconnectAttempts++;var n=Math.min(this.minReconnectDelayMs*Math.pow(2,this.reconnectAttempts-1),this.maxReconnectDelayMs)+Math.floor(500*Math.random());console.warn(" [Socket] Reconnect scheduled in "+n+"ms (attempt "+this.reconnectAttempts+") due to "+e),setTimeout((function(){if(t.socket&&!t.socket.connected)try{console.log("[Socket] Reconnecting now"),t.socket.connect()}catch(e){console.error("[Socket] reconnect error:",e)}finally{t.reconnecting=!1}else t.reconnecting=!1}),n)}},n.setupLifecycleHandlers=function(){var e=this;document.addEventListener("visibilitychange",(function(){var t,n;"visible"===document.visibilityState?(console.log(" [Page] visible  verifying socket"),null!=(t=e.socket)&&t.connected?e.safeEmit("client:ping",{resumed:!0}):e.onClickReconnect()):null!=(n=e.socket)&&n.connected&&e.safeEmit("client:ping",{hidden:!0})})),window.addEventListener("beforeunload",(function(){e.safeEmit("client:ping",{closing:!0})}))},n.setupNetworkHandlers=function(){var e=this;window.addEventListener("online",(function(){var t;console.log(" [Network] online"),null!=(t=e.socket)&&t.connected||e.onClickReconnect()})),window.addEventListener("offline",(function(){console.warn(" [Network] offline  pausing keepalive"),e.stopKeepAlive()}))},n.startKeepAlive=function(){var e=this;this.stopKeepAlive(),this.keepAliveInterval=setInterval((function(){var t;null!=(t=e.socket)&&t.connected&&(e.lastActivityTs=Date.now(),e.socket.emit("client:ping",{t:e.lastActivityTs}))}),this.keepAliveMs)},n.stopKeepAlive=function(){this.keepAliveInterval&&(clearInterval(this.keepAliveInterval),this.keepAliveInterval=null)},n.startWatchdog=function(){var e=this;this.stopWatchdog(),this.watchdogInterval=setInterval((function(){var t;if(Date.now()-e.lastActivityTs>e.driftThresholdMs)return console.warn(" [Socket] timer drift detected  forcing reconnect"),void e.onClickReconnect();null!=(t=e.socket)&&t.connected||(console.warn(" [Socket] watchdog sees disconnected socket  reconnecting"),e.onClickReconnect())}),this.watchdogCheckMs)},n.stopWatchdog=function(){this.watchdogInterval&&(clearInterval(this.watchdogInterval),this.watchdogInterval=null)},n.onClickReconnect=function(){if(this.socket)try{console.log(" [Socket] force reconnect"),this.teardownSocketListeners(),this.socket.disconnect(),this.socket.connect()}catch(e){console.error("[Socket] force reconnect error:",e),this.scheduleReconnect("force")}else this.connect()},n.sendMessage=function(e,t){var n;null!=(n=this.socket)&&n.connected?this.socket.emit(e,t):(console.warn("[Queue] socket offline  queued event "+e),this.offlineQueue.push({event:e,data:t}),this.scheduleReconnect("sendMessage"))},n.awaitConnected=function(){var e,t=this;return null!=(e=this.socket)&&e.connected?Promise.resolve(this.socket):new Promise((function(e){return t.waiters.push(e)}))},n.initsendMessege=function(){var e,t,n,i,r={player_id:null==(e=ie.loginDataResponse)||null==(t=e.data)?void 0:t.id,auction_id:null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.id};this.sendMessage("percentage:min:max",r),this.sendMessage("min:max:player:logs",r)},n.safeEmit=function(e,t){try{var n;null!=(n=this.socket)&&n.connected&&this.socket.emit(e,t)}catch(e){}},n.flushOfflineQueue=function(){var e;if(null!=(e=this.socket)&&e.connected&&0!==this.offlineQueue.length){console.log(" [Queue] flushing "+this.offlineQueue.length+" messages");for(var t,n=ee(this.offlineQueue.splice(0));!(t=n()).done;){var i=t.value;this.socket.emit(i.event,i.data)}}},n.bootstrapStreams=function(){var e,t,n,i=this,r=(null==(e=ie.auctionHouseListResponse)?void 0:e.data)||[],o=null==(t=ie.loginDataResponse)||null==(n=t.data)?void 0:n.id;r.forEach((function(e){var t={player_id:o,auction_id:null==e?void 0:e.id};i.safeEmit("percentage:min:max",t),i.safeEmit("min:max:player:logs",t)}))},n.registerSocketEvents=function(){var e=this;this.socket&&(this.socket.on("auction:current:play",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_CURRENT_PLAY,e)})),this.socket.on("auction:min:max:percentage",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_MIN_MAX_PERCENTAGE,e)})),this.socket.on("min:max:bid:percentage",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_MIN_MAX_PERCENTAGE,e)})),this.socket.on("auction:winner",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_WINNER,e)})),this.socket.on("auction:state",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_STATE,e)})),this.socket.on("auction:error",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_ERROR,e)})),this.socket.on("min:max:recent:bid",(function(e){we.getDispatcher().emit(ae.CLS_Min_Max_Recent_Bid,e)})),this.socket.on("auction:avatars",(function(e){we.getDispatcher().emit(ae.CLS_AUCTION_AVATARS,e)})),this.socket.on("min:max:bid:cancel",(function(e){we.getDispatcher().emit(ae.CLS_MIN_MAX_BID_CANCEL,e)})),this.socket.on("server:pong",(function(){e.lastActivityTs=Date.now()})))},n.registerSocketEventsClosed=function(){this.socket&&(this.socket.off("auction:current:play"),this.socket.off("auction:min:max:percentage"),this.socket.off("min:max:bid:percentage"),this.socket.off("auction:winner"),this.socket.off("auction:state"),this.socket.off("auction:error"),this.socket.off("min:max:recent:bid"),this.socket.off("auction:avatars"),this.socket.off("min:max:bid:cancel"),this.socket.off("server:pong"))},n.teardownSocketListeners=function(){try{var e;this.registerSocketEventsClosed(),null==(e=this.socket)||null==e.offAny||e.offAny()}catch(e){}},t}()).instance=null,$e=et))||$e;n._RF.pop(),n._RF.push({},"0ad70Z+091JKokrXUrrfuXD","APIManager",void 0);var rt="GET",ot="POST",at="PUT",st="https://api.auctionx.dev/",ut=function(e){try{JSON.parse(e)}catch(e){return!1}return!0};function lt(){return localStorage.getItem("accessToken")}function ct(){return localStorage.getItem("refreshToken")}function pt(e){localStorage.setItem("accessToken",e),Je.setCookie(le.ACCESS_TOKEN,e,30),ve.inst.setItem(le.ACCESS_TOKEN,e)}function ht(){return dt.apply(this,arguments)}function dt(){return(dt=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we.getDispatcher().emit(oe.IS_LOADER_ON),e.next=3,localStorage.removeItem("accessToken");case 3:return e.next=5,localStorage.removeItem("PlayerLoginObj");case 5:return e.next=7,localStorage.removeItem("PLAYER_BIDS_INFO");case 7:return e.next=9,Je.clearAllCookies();case 9:return mn(),e.next=12,C.stopAll();case 12:return e.next=14,it.clearInstance();case 14:return e.next=16,ie.setallData();case 16:we.getDispatcher().emit(oe.IS_LOADER_OFF),_.loadScene("MultipleAuction");case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function ft(){return gt.apply(this,arguments)}function gt(){return(gt=V(e().mark((function t(){var n,i,r,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ct()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,i=lt(),e.next=7,fetch(st+"v1/user/refresh-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i||""},body:JSON.stringify({refresh_token:n})});case 7:if((r=e.sent).ok){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,r.json();case 12:if(null==(o=e.sent)||!o.accessToken){e.next=17;break}return pt(o.accessToken),console.log("Token refreshed successfully"),e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 20:return e.prev=20,e.t0=e.catch(3),console.error("Token refresh failed",e.t0),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),t,null,[[3,20]])})))).apply(this,arguments)}var bt,mt,yt,vt,wt,_t,Pt,Ct,kt,Nt,St,Bt,Rt,xt,Et,Ot,At,Lt,Tt,It,Mt,Dt,zt,Ut,Ht,Ft,qt,jt,Wt,Gt,Yt,Vt,Kt,Xt,Zt,Jt,Qt,$t,en,tn,nn,rn,on,an,sn,un,ln,cn,pn,hn,dn,fn,gn,bn=function(){function t(){}return t.request=function(){var n=V(e().mark((function n(i,r,o,a,s,u){var l,c,p;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===o&&(o=null),void 0===a&&(a=!1),void 0===s&&(s=!0),void 0===u&&(u=!0),n.prev=4,i){n.next=7;break}throw new Error("API name is required");case 7:if(l=st+i,console.log("Requesting:",l),(c=new XMLHttpRequest).open(r,l,!0),s&&c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("accept","application/json"),c.setRequestHeader("Vary","Origin"),c.setRequestHeader("Vary","Access-Control-Request-Method"),c.setRequestHeader("Vary","Access-Control-Request-Headers"),c.setRequestHeader("Strict-Transport-Security","max-age=15724800; includeSubDomains"),!a){n.next=25;break}if(!(p=lt())){n.next=23;break}c.setRequestHeader("Authorization","Bearer "+p),n.next=25;break;case 23:return console.error("Authorization is null"),n.abrupt("return");case 25:return n.next=27,new Promise((function(n,l){c.onreadystatechange=V(e().mark((function p(){var h,d,f,g,b,m;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(4!==c.readyState){e.next=38;break}if(e.prev=1,h=c.responseText,d=c.status>=200&&c.status<300,401!==c.status||!a||!u){e.next=29;break}return console.warn("401 Unauthorized. Trying to refresh token..."),e.next=8,ft();case 8:if(!e.sent){e.next=24;break}return console.log("Retrying request after token refresh..."),e.prev=11,e.next=14,t.request(i,r,o,a,s,!1);case 14:f=e.sent,n(f),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),l(e.t0);case 21:return e.abrupt("return");case 24:return ht(),g={code:401,message:"Session expired. Please log in again."},t.showApiError(g),l(g),e.abrupt("return");case 29:h&&ut(h)?(b=JSON.parse(h),d?n(b):(t.showApiError(b),l(b))):d?n(h):(t.showApiError(h),l(h)),d||new Ze({ErrorCodeData:{code:c.status,message:h},ErrorType:i}).showErrorPopup(),e.next=38;break;case 33:e.prev=33,e.t1=e.catch(1),m={code:c.status,message:"Parsing failed",details:e.t1},t.showApiError(m),l(m);case 38:case"end":return e.stop()}}),p,null,[[1,33],[11,18]])}))),null!=o?c.send(JSON.stringify(o)):c.send()}));case 27:return n.abrupt("return",n.sent);case 30:return n.prev=30,n.t0=n.catch(4),t.showApiError(n.t0),new Ze({ErrorCodeData:{code:0,message:n.t0 instanceof Error?n.t0.message:String(n.t0)},ErrorType:i}).showErrorPopup(),n.abrupt("return",Promise.reject(n.t0));case 36:case"end":return n.stop()}}),n,null,[[4,30]])})));return function(e,t,i,r,o,a){return n.apply(this,arguments)}}(),t.getBaseUrl=function(){return st},t.showApiSuccess=function(e){console.log(" SUCCESS: "+e),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,e)},t.showApiError=function(e){var t="Something went wrong. Please try again.";null!=e&&e.message?t=e.message:"string"==typeof e?t=e:null!=e&&e.code&&(t="Error Code "+e.code),console.error(" ERROR: "+t),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,t)},t}();function mn(){ue.isLogin=!1,ue.hostname="",ue.apiBaseURL="",ue.publicKeyPem="",ue.is_verified=!1,ue.auctionIndex=0,ue.isBidPlaced=!0,ue.is_Decimal_Count=1,ue.is_MinPrice=.1}n._RF.pop(),n._RF.push({},"a81fe4wKZZAiqxgXMjcEskb","AuctionManager",void 0);var yn,vn,wn,_n,Pn,Cn,kn,Nn,Sn,Bn,Rn,xn,En,On=i.ccclass,An=i.property,Ln=(bt=On("AuctionManager"),mt=An(a),yt=An(a),vt=An(o),wt=An(o),_t=An(o),Pt=An(o),Ct=An(o),kt=An(a),Nt=An(a),St=An(k),Bt=An(N),Rt=An(o),xt=An(a),Et=An(a),Ot=An(S),At=An(S),Lt=An(S),Tt=An(B),It=An(B),Mt=An(R),Dt=An(R),zt=An(m),Ut=An(a),Ht=An(u),Ft=An(x),bt((Wt=ne((jt=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"onDisableNode",Wt,Q(e)),te(e,"onEnableNode",Gt,Q(e)),te(e,"userNameLabel",Yt,Q(e)),te(e,"winAmountLabel",Vt,Q(e)),te(e,"bidPriceLabel",Kt,Q(e)),te(e,"uniqueLabel",Xt,Q(e)),te(e,"msgLabel",Zt,Q(e)),te(e,"thombNode",Jt,Q(e)),te(e,"emogiNode",Qt,Q(e)),te(e,"progressBar",$t,Q(e)),te(e,"slider",en,Q(e)),te(e,"percentageLabel",tn,Q(e)),te(e,"setPinNode",nn,Q(e)),te(e,"isPinNode",rn,Q(e)),te(e,"selectButton",on,Q(e)),te(e,"openAuction",an,Q(e)),te(e,"placeBids",sn,Q(e)),te(e,"thombNodeImage",un,Q(e)),te(e,"emogiNodeImage",ln,Q(e)),te(e,"bidProgressM1",cn,Q(e)),te(e,"bidProgressM2",pn,Q(e)),te(e,"historyScrollView",hn,Q(e)),te(e,"historyParent",dn,Q(e)),te(e,"bidHistoryPrefab",fn,Q(e)),te(e,"particleSystem2D",gn,Q(e)),e.playerKeyboardHandler=null,e.socketEventHandler=null,e.bidStorageManager=null,e.gameManager=null,e.bidMap=new Map,e.allBidEntries=[],e.isPinned=!1,e.currentNumber=0,e.auctionId=null,e.auctionIndex=0,e.isUniquebidPrice=0,e}Z(n,t);var i=n.prototype;return i.start=function(){we.getDispatcher().on(oe.AUCTION_SELECTION,this.onUnselect,this),this.onEvents()},i.onEnable=function(){var e,t;this.auctionId==(null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.id)&&(this.playerKeyboardHandler.selectAuctionLabel(this.bidPriceLabel),this.socketEventHandler.selectAuctionLabel(this.bidPriceLabel))},i.onDestroy=function(){this.onEventsOff()},i.onEvents=function(){var e=we.getDispatcher();e.on(ae.CLS_AUCTION_MIN_MAX_PERCENTAGE,this.onAuctionMinMaxPercentage,this),e.on(ae.CLS_MIN_MAX_BID_CANCEL,this.onMinMaxCancelBid,this),e.on(oe.SET_BID_HISTORY,this.onMinMaxRecentBid,this)},i.onEventsOff=function(){var e=we.getDispatcher();e.off(ae.CLS_AUCTION_MIN_MAX_PERCENTAGE,this.onAuctionMinMaxPercentage,this),e.off(ae.CLS_MIN_MAX_BID_CANCEL,this.onMinMaxCancelBid,this),e.off(oe.SET_BID_HISTORY,this.onMinMaxRecentBid,this)},i.onSelect=function(){var e,t;console.log("onSelect"),ue.auctionIndex=this.auctionIndex,this.userNameLabel.color=E("#FF9CFB"),this.winAmountLabel.color=y.WHITE,""==this.msgLabel.string?(this.uniqueLabel.color=y.WHITE,this.msgLabel.color=y.WHITE):"Wow!"==this.msgLabel.string?(this.uniqueLabel.color=y.GREEN,this.msgLabel.color=y.GREEN):(this.uniqueLabel.color=y.RED,this.msgLabel.color=y.RED),this.thombNode.getComponent(R).grayscale=!1,this.emogiNode.getComponent(R).grayscale=!1,ue.is_Decimal_Count=(null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.decimal_count)||1,ue.is_MinPrice=1/Math.pow(10,ue.is_Decimal_Count),console.log("StaticProperties.is_MinPrice",ue.is_MinPrice,ue.is_Decimal_Count),this.onEnableNode.active=!0,this.onDisableNode.active=!1,this.playerKeyboardHandler.selectAuctionLabel(this.bidPriceLabel),this.socketEventHandler.selectAuctionLabel(this.bidPriceLabel),this.selectButton.interactable=!1,this.selectButton.node.active=!1,this.openAuction.interactable=!0,this.placeBids.interactable=!0,this.historyScrollView.enabled=!0,we.getDispatcher().emit(oe.AUCTION_SELECTION,this.auctionId),we.getDispatcher().emit(oe.ON_SELECT_AUCTION)},i.enterBid=function(){this.isUniquebidPrice=Number(this.bidPriceLabel.string),this.playerKeyboardHandler.onDone(),this.socketEventHandler.onEnterBid()},i.onUnselect=function(e){var t,n,i,r;if(e!=this.auctionId){this.userNameLabel.color=E(147,149,152),this.winAmountLabel.color=E(147,149,152),this.uniqueLabel.color=E(147,149,152),this.msgLabel.color=E(147,149,152),this.thombNode.getComponent(R).grayscale=!0,this.emogiNode.getComponent(R).grayscale=!0,this.onEnableNode.active=!1,this.onDisableNode.active=!0,this.selectButton.interactable=!0,this.selectButton.node.active=!0,this.openAuction.interactable=!1,this.placeBids.interactable=!1;var o=null==(t=ie.auctionHouseListResponse)||null==(n=t.data[ue.auctionIndex])?void 0:n.min_bid_price,a=null==(i=ie.auctionHouseListResponse)||null==(r=i.data[ue.auctionIndex])?void 0:r.max_bid_price,s="Enter between "+(o+ue.is_MinPrice)+" - "+(a-ue.is_MinPrice);this.bidPriceLabel.string=s,this.historyScrollView.scrollToLeft(0),this.historyScrollView.enabled=!1}},i.resetParticle=function(){this.particleSystem2D.forEach((function(e){e.resetSystem()}))},i.onGamePLay=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue.auctionIndex=this.auctionIndex,this.gameManager.isOnGame();case 2:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onPinSet=function(){if(!ue.isLogin)return console.log("please login to pin or unpin the auction"),void we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"please login to pin or unpin the auction");this.isPinned=!1,this.setPinNode.active=!0,this.isPinNode.active=!1,this.node.setSiblingIndex(0),this.setPinUnpin(!0)},i.onPinUnset=function(){if(!ue.isLogin)return console.log("please login to pin or unpin the auction"),void we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"please login to pin or unpin the auction");this.isPinned=!0,this.setPinNode.active=!1,this.isPinNode.active=!0;var e=this.node.parent.children.length-1;this.node.setSiblingIndex(e),this.setPinUnpin(!1)},i.setPinUnpin=function(){var t=V(e().mark((function t(n){var i,r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={is_pinned:n},r=""+Xe.PIN_TOGGLE+this.auctionId,e.next=5,bn.request(r,ot,i,!0);case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.error("setPinUnpin failed:",e.t0),e.t0;case 11:case"end":return e.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),i.getAuctionid=function(){return this.auctionId},i.init=function(){var t=V(e().mark((function t(n,i,r,o,a,s){var u,l,c,p,h,d,f,g;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userNameLabel.string=n.title.toString()||"",f=null==(u=ie.auctionHouseListResponse)||null==(l=u.data[i])?void 0:l.plays_consumed_on_bid,this.winAmountLabel.string=(null==n||null==(c=n.products)||null==(p=c.price)?void 0:p.toString())+"  |  "+f.toFixed(0)+"X",this.bidPriceLabel=s,this.auctionId=n.id,this.auctionIndex=i,this.playerKeyboardHandler=r,this.socketEventHandler=o,this.gameManager=a,ue.is_Decimal_Count=(null==(h=ie.auctionHouseListResponse)||null==(d=h.data[ue.auctionIndex])?void 0:d.decimal_count)||1,ue.is_MinPrice=1/Math.pow(10,ue.is_Decimal_Count),console.log("StaticProperties.is_MinPrice",ue.is_MinPrice,ue.is_Decimal_Count),this.bidStorageManager=new Ve(this.auctionId),e.next=15,this.bidStorageManager.init();case 15:return g=this.bidStorageManager.getUniqueBidCount(),this.uniqueLabel.string="Unique ("+g+")",n.is_pinned&&(this.isPinned=!1,this.setPinNode.active=!0,this.isPinNode.active=!1),this.onEnable(),i===ue.auctionIndex?this.onSelect():this.onUnselect(""),e.prev=20,e.next=23,this.loadFromStorage();case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(20),console.error("Error loading bids from storage:",e.t0);case 28:this.allBidEntries=Array.from(this.bidMap.entries()),this.renderMyBids();case 30:case"end":return e.stop()}}),t,this,[[20,25]])})));return function(e,n,i,r,o,a){return t.apply(this,arguments)}}(),i.animateBidPercentage=function(e,t){this.currentNumber=e,d({value:e}).delay(.286).to((t-e)/50,{value:t},{onUpdate:this.updateBidPercentageLabel.bind(this)}).start()},i.updateBidPercentageLabel=function(e){var t,n;this.currentNumber=Math.floor(e.value),null!=(t=this.slider)&&t.progress&&(this.slider.progress=this.currentNumber/100),null!=(n=this.progressBar)&&n.progress&&(this.progressBar.progress=this.currentNumber/100),this.percentageLabel&&(this.percentageLabel.string=this.currentNumber+"%"),this.bidProgressM1&&(this.bidProgressM1.fillRange=this.currentNumber/100),this.bidProgressM2&&(this.bidProgressM2.fillRange=this.currentNumber/100)},i.onAuctionMinMaxPercentage=function(e){var t,n;if(null!=e&&null!=(t=e.data)&&t.auction_id&&(null==e||null==(n=e.data)?void 0:n.auction_id)===this.auctionId){var i;ie.auctionMinMaxPercentage=e;var r=null==e||null==(i=e.data)?void 0:i.bid_percentage;if(!r)return;this.animateBidPercentage(this.currentNumber,r)}},i.onMinMaxRecentBid=function(e,t){console.log("onMinMaxRecentBid",e,t);try{var n,i;if(null!=e&&null!=(n=e.data)&&n.auction_id&&(null==e||null==(i=e.data)?void 0:i.auction_id)===this.auctionId){var r,o,a;ie.MinMaxRecentBid=e;var s=null==e||null==(r=e.data)?void 0:r.is_unique,u=null!=e&&null!=(o=e.data)&&o.uuid?null==e||null==(a=e.data)?void 0:a.uuid:"",l=t;if(l&&l>0){var c=Tn(),p={bidPrice:l.toString(),isUnique:s,Time:c};if(this.bidStorageManager.addBid(u,p),s&&u){var h=this.createBidHistory(l,s);h&&u&&(h.name=""+u),this.thombNode.getComponent(R).spriteFrame=this.thombNodeImage[0],this.emogiNode.getComponent(R).spriteFrame=this.emogiNodeImage[0];var d=this.bidStorageManager.getUniqueBidCount();this.uniqueLabel.string="Unique ("+d+")",this.msgLabel.string="Wow!",this.uniqueLabel.color=y.GREEN,this.msgLabel.color=y.GREEN,Ke.inst.play("Unique"),this.resetParticle()}else{var f=this.createBidHistory(l,s);f&&u&&(f.name=""+u),this.thombNode.getComponent(R).spriteFrame=this.thombNodeImage[1],this.emogiNode.getComponent(R).spriteFrame=this.emogiNodeImage[1],this.msgLabel.string="Try\nagain!",this.uniqueLabel.color=y.RED,this.msgLabel.color=y.RED,Ke.inst.play("NotUnique")}}}}catch(e){console.error("Error in onMinMaxRecentBid:",e)}},i.createBidHistory=function(e,t){var n,i=l(this.bidHistoryPrefab),r=null==(n=i.getChildByName("Label"))?void 0:n.getComponent(o);return r&&(r.string=null==e?void 0:e.toString()),this.historyParent.children.length<1&&(i.getChildByName("Label2").active=!1),this.historyParent.addChild(i),t&&(r.color=y.GREEN,i.getComponent(R).color=E(50,139,54,255)),i.setSiblingIndex(0),i},i.onMinMaxCancelBid=function(e){if(null!=e&&e.auction_id&&(null==e?void 0:e.auction_id)===this.auctionId){var t;this.bidStorageManager.removeBid(e.uuid);var n=this.bidStorageManager.getUniqueBidCount();this.uniqueLabel.string="Unique ("+n+")";var i=(null==(t=this.historyParent)?void 0:t.getChildByName(e.uuid))||null;if(i){var r,a=null==(r=i.getChildByName("Label"))?void 0:r.getComponent(o);a&&(a.color=new y(255,255,255))}}},i.renderMyBids=function(){var e=this;this.historyParent.removeAllChildren(),this.allBidEntries.forEach((function(t){t[0];var n=t[1];e.createBidHistory(Number(n.bidPrice),n.isUnique)}))},i.loadFromStorage=function(){var t=this;return new Promise(V(e().mark((function n(i,r){var o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ve.inst.getItem(t.auctionId)){e.next=6;break}return e.next=4,ve.inst.getItem(t.auctionId);case 4:if(o=e.sent)try{t.bidMap=new Map(JSON.parse(o))}catch(e){console.error("Error parsing bid storage",e),t.bidMap.clear()}case 6:i(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error accessing localStorage",e.t0),r(e.t0);case 13:case"end":return e.stop()}}),n,null,[[0,9]])}))))},n}(f)).prototype,"onDisableNode",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=ne(jt.prototype,"onEnableNode",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=ne(jt.prototype,"userNameLabel",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=ne(jt.prototype,"winAmountLabel",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kt=ne(jt.prototype,"bidPriceLabel",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=ne(jt.prototype,"uniqueLabel",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zt=ne(jt.prototype,"msgLabel",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=ne(jt.prototype,"thombNode",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=ne(jt.prototype,"emogiNode",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=ne(jt.prototype,"progressBar",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=ne(jt.prototype,"slider",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tn=ne(jt.prototype,"percentageLabel",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=ne(jt.prototype,"setPinNode",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rn=ne(jt.prototype,"isPinNode",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),on=ne(jt.prototype,"selectButton",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),an=ne(jt.prototype,"openAuction",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sn=ne(jt.prototype,"placeBids",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),un=ne(jt.prototype,"thombNodeImage",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ln=ne(jt.prototype,"emogiNodeImage",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cn=ne(jt.prototype,"bidProgressM1",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pn=ne(jt.prototype,"bidProgressM2",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hn=ne(jt.prototype,"historyScrollView",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dn=ne(jt.prototype,"historyParent",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fn=ne(jt.prototype,"bidHistoryPrefab",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gn=ne(jt.prototype,"particleSystem2D",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),qt=jt))||qt);function Tn(){var e=new Date;return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")}n._RF.pop(),n._RF.push({},"d73f0ZNG/BFrLVLbWGkFVZq","UniqueBidsAndCounts",void 0);var In,Mn,Dn,zn,Un,Hn,Fn,qn,jn,Wn=i.ccclass,Gn=i.property,Yn=(yn=Wn("UniqueBidsAndCounts"),vn=Gn(R),wn=Gn(B),_n=Gn(B),Pn=Gn(o),Cn=Gn(o),yn((Sn=ne((Nn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"showUnique",Sn,Q(t)),te(t,"isUniqueIcon",Bn,Q(t)),te(t,"isNotUniqueIcon",Rn,Q(t)),te(t,"uniqueCountLabel",xn,Q(t)),te(t,"isUniqueLabel",En,Q(t)),t}Z(t,e);var n=t.prototype;return n.setUniqueData=function(e){e?(this.showUnique.spriteFrame=this.isUniqueIcon,this.isUniqueLabel.color=y.GREEN,this.isUniqueLabel.node.children[0].active=!1):(this.showUnique.spriteFrame=this.isNotUniqueIcon,this.isUniqueLabel.color=y.RED,this.isUniqueLabel.node.children[0].active=!0)},n.setUniqueCount=function(e){this.uniqueCountLabel.string=e},t}(f)).prototype,"showUnique",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bn=ne(Nn.prototype,"isUniqueIcon",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rn=ne(Nn.prototype,"isNotUniqueIcon",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xn=ne(Nn.prototype,"uniqueCountLabel",[Pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),En=ne(Nn.prototype,"isUniqueLabel",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kn=Nn))||kn);n._RF.pop(),n._RF.push({},"1227f0w1V1JII5W0IxHOG1c","UniqueHistory",void 0);var Vn,Kn,Xn,Zn,Jn,Qn=i.ccclass,$n=i.property,ei=(In=Qn("UniqueHistory"),Mn=$n(u),Dn=$n(a),zn=$n(Yn),In((Fn=ne((Hn=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"isHistoryPrefab",Fn,Q(e)),te(e,"isUniqueHistoryParent",qn,Q(e)),te(e,"uniqueBidsAndCounts",jn,Q(e)),e.bidMap=new Map,e.localKey="UniqueBidMap",e.nodeMap=new Map,e}Z(n,t);var i=n.prototype;return i.init=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUniqueHistoryParent.removeAllChildren(),this.nodeMap.clear(),this.bidMap.clear(),e.next=5,this.loadFromStorage();case 5:this.renderAllBids();case 6:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addBid=function(e,t){var n,i;if(this.localKey=null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.id,!this.bidMap.has(e)){this.bidMap.set(e,t),this.createBidNode(e,t.bidPrice);var r=this.nodeMap.size;this.uniqueBidsAndCounts.setUniqueCount(r.toString())}},i.removeBid=function(e,t){if(console.log("this.bidMap befor ->"+this.bidMap.size),this.bidMap.delete(e)){console.log("this.bidMap affff ->"+this.bidMap.size),this.removeBidNode(e);var n=this.nodeMap.size;this.uniqueBidsAndCounts.setUniqueCount(n.toString())}},i.loadFromStorage=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localKey!=(null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.id)&&(this.localKey=null==(r=ie.auctionHouseListResponse)||null==(o=r.data[ue.auctionIndex])?void 0:o.id),!ve.inst.getItem(this.localKey)){e.next=6;break}return e.next=4,ve.inst.getItem(this.localKey);case 4:if(a=e.sent)try{s=JSON.parse(a),u=s.filter((function(e){e[0];return!0===e[1].isUnique})),this.bidMap=new Map(u)}catch(e){console.error("Error parsing or filtering bid data from localStorage:",e),this.bidMap.clear()}case 6:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.createBidNode=function(e,t){var n;if(t){var i=l(this.isHistoryPrefab),r=null==(n=i.getChildByName("Amount"))?void 0:n.getComponent(o);r&&(r.string=null==t?void 0:t.toString()),this.isUniqueHistoryParent.addChild(i),i.setSiblingIndex(0),this.nodeMap.set(e,i)}},i.removeBidNode=function(e){var t=this.nodeMap.get(e);console.log(t,"removeBidNode unniqe history"),t&&t.isValid&&t.destroy(),this.nodeMap.delete(e)},i.renderAllBids=function(){var e=this;this.bidMap.forEach((function(t,n){e.createBidNode(n,t.bidPrice)}));var t=this.nodeMap.size;this.uniqueBidsAndCounts.setUniqueCount(t.toString())},n}(f)).prototype,"isHistoryPrefab",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qn=ne(Hn.prototype,"isUniqueHistoryParent",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jn=ne(Hn.prototype,"uniqueBidsAndCounts",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Un=Hn))||Un);n._RF.pop(),n._RF.push({},"9b9fbDfemtB+Yye45A2vZaw","AvatarIconsManager",void 0);var ti,ni,ii,ri,oi,ai,si,ui,li,ci,pi,hi,di,fi,gi,bi,mi,yi,vi,wi,_i,Pi,Ci,ki=i.ccclass,Ni=i.property,Si=(Vn=ki("AvatarIconsManager"),Kn=Ni(a),Vn((Jn=ne((Zn=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"image",Jn,Q(e)),e}Z(n,t);var i=n.prototype;return i.newImageNode=function(){var e=this;return new Promise((function(t,n){try{var i=l(e.image);e.node.addChild(i),t(i)}catch(e){console.error("newBidHistoryNode",e),n(e)}}))},i.setAvatarIcon=function(t,n){var i=this;return void 0===n&&(n=null),new Promise(V(e().mark((function r(o,a){var s,u,l,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.split("/").pop()||"",u=s.split(".")[0],console.log(u),!(l=!!i.node.getChildByName(u)&&i.node.getChildByName(u))){e.next=8;break}return n&&(n.spriteFrame=l.getComponent(R).spriteFrame),o(),e.abrupt("return");case 8:return e.prev=8,e.next=11,i.newImageNode();case 11:return(c=e.sent).name=u,e.next=15,Bi(t,c.getComponent(R));case 15:n&&(n.spriteFrame=c.getComponent(R).spriteFrame),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),console.error("[AvatarIconsManager] Failed to load avatar: "+t,e.t0);case 21:o();case 22:case"end":return e.stop()}}),r,null,[[8,18]])}))))},i.loadRemoteSprite=function(e){return new Promise((function(t,n){O.loadRemote(e,(function(e,i){if(e||!(i instanceof A))return n(e||new Error("Invalid ImageAsset"));var r=new L;r.image=i;var o=new B;o.texture=r,t(o)}))}))},n}(f)).prototype,"image",[Kn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xn=Zn))||Xn);function Bi(e,t){return new Promise((function(n,i){O.loadRemote(e,{ext:".png",xhrResponseType:"blob"},(function(e,r){if(e||!(r instanceof A))return i(e||new Error("Invalid image asset"));var o=new L;o.image=r;var a=new B;a.texture=o,t.spriteFrame=a,n()}))}))}n._RF.pop(),n._RF.push({},"e398dsW9jlNo5iin0C2TEqr","CustomPopUp",void 0);var Ri,xi,Ei,Oi,Ai,Li,Ti,Ii,Mi,Di,zi,Ui,Hi,Fi,qi,ji,Wi,Gi,Yi,Vi,Ki,Xi,Zi,Ji,Qi,$i,er,tr=i.ccclass,nr=i.property,ir=(ti=tr("CustomPopUp"),ni=nr(o),ii=nr(o),ri=nr(R),oi=nr(S),ai=nr(S),si=nr(o),ui=nr(o),li=nr(S),ci=nr(B),pi=nr(a),ti((fi=ne((di=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"title",fi,Q(t)),te(t,"Msg",gi,Q(t)),te(t,"logo",bi,Q(t)),te(t,"btn1",mi,Q(t)),te(t,"btn2",yi,Q(t)),te(t,"btn1bl",vi,Q(t)),te(t,"btn2bl",wi,Q(t)),te(t,"ExitBtn",_i,Q(t)),te(t,"Logoframe",Pi,Q(t)),te(t,"isMaintenenceBg",Ci,Q(t)),t.isDelete=!1,t.isAction=!1,t.ActionType=null,t.cb1=null,t.cb2=null,t.Commoncb=null,t}Z(t,e);var n=t.prototype;return n.start=function(){T.getVisibleSize().width<T.getVisibleSize().height&&(this.node.scale=new p(.7,.7,1))},n.onLoad=function(){this.isMaintenenceBg.active=!1},n.setCallback=function(e,t){this.cb1=e,this.cb2=t},n.onExitLayer=function(){if(this.node){var e=this.node,t=e;d(e).to(.2,{scale:new p(0,0,1)}).call((function(){t.removeFromParent()})).start()}},n.onBtn1Click=function(e,t){this.isAction?this.ActionType?(this.ActionCommonPop(this.ActionType),this.Commoncb()):(this.onExitLayer(),this.Commoncb()):this.cb1?(this.cb1(e),this.onExitLayer()):this.onExitLayer()},n.onBtn2Click=function(e,t){this.cb2?e?this.cb2(e):this.cb2():this.onExitLayer()},n.setButtonIntractable=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.btn1.interactable=e,this.btn2.interactable=t},n.setActionOnClick=function(e,t,n){if(void 0===n&&(n=!1),n)return this.btn1.node.active=!1,this.btn1.node.active=!1,void(this.isMaintenenceBg.active=!0);this.isAction=!0,this.ActionType=e,this.Commoncb=t},n.ActionCommonPop=function(e){switch(e){case"common":this.onExitLayer();default:this.onExitLayer()}},t}(f)).prototype,"title",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gi=ne(di.prototype,"Msg",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bi=ne(di.prototype,"logo",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mi=ne(di.prototype,"btn1",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yi=ne(di.prototype,"btn2",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vi=ne(di.prototype,"btn1bl",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wi=ne(di.prototype,"btn2bl",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=ne(di.prototype,"ExitBtn",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pi=ne(di.prototype,"Logoframe",[ci],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=ne(di.prototype,"isMaintenenceBg",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hi=di))||hi);n._RF.pop(),n._RF.push({},"bcfdadoMgNNfozW1rBSGDAa","MyAuctionHistoryPrefab",void 0);var rr,or=i.ccclass,ar=i.property;!function(e){e.Clam_Winging_Price="Clam:Winging:Price",e.Winging_Price_Status="Winging:Price:Status",e.WIN_AUCTION_STATUS_CONFIRM="WIN_AUCTION_STATUS_CONFIRM"}(rr||(rr={}));var sr,ur,lr,cr,pr,hr,dr,fr,gr,br,mr,yr,vr,wr,_r,Pr=(Ri=or("MyAuctionHistoryPrefab"),xi=ar(o),Ei=ar(o),Oi=ar(o),Ai=ar(o),Li=ar(o),Ti=ar(o),Ii=ar(o),Mi=ar(a),Di=ar(a),zi=ar(a),Ui=ar(a),Hi=ar(o),Ri((ji=ne((qi=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"auctionLabel",ji,Q(t)),te(t,"myBidsLabel",Wi,Q(t)),te(t,"xpConsumedLabel",Gi,Q(t)),te(t,"player",Yi,Q(t)),te(t,"resultLabel",Vi,Q(t)),te(t,"typeLabel",Ki,Q(t)),te(t,"productNameLabel",Xi,Q(t)),te(t,"ClaimButton",Zi,Q(t)),te(t,"declined",Ji,Q(t)),te(t,"Status",Qi,Q(t)),te(t,"noanyone",$i,Q(t)),te(t,"statusButtonLabel",er,Q(t)),t.isClickd=!1,t.auctionId=null,t.is_Status=null,t}Z(t,e);var n=t.prototype;return n.setData=function(e,t,n,i,r,o,a,s,u,l,c,p){if(this.auctionLabel.string=t,this.auctionId=e,this.is_Status=p,this.myBidsLabel.string=n+" / "+o,this.player.string=r+" ",this.xpConsumedLabel.string=""+i,this.resultLabel.string=a+" / "+s,this.typeLabel.string=u,this.productNameLabel.string=l,this.isClickd=!1,"won"==c)switch(this.is_Status){case"claim":this.ClaimButton.active=!0;break;case"inProcess":this.statusButtonLabel.string="inProcess",this.ClaimButton.active=!1,this.Status.active=!0;break;case"orderPlaced":this.ClaimButton.active=!1,this.Status.active=!0,this.statusButtonLabel.string="OrderPlaced";break;case"delivered":this.ClaimButton.active=!1,this.Status.active=!0,this.statusButtonLabel.string="Delivered";break;case"confirmed":this.statusButtonLabel.string="Confirmed",this.ClaimButton.active=!1,this.Status.getComponent(S).interactable=!1,this.Status.active=!0;break;case"declined":this.ClaimButton.active=!1,this.declined.active=!0,this.Status.active=!1;break;default:this.noanyone.active=!0,this.ClaimButton.active=!1,this.Status.active=!1,this.declined.active=!1}else this.ClaimButton.active=!1,this.Status.active=!1,this.noanyone.active=!0},n.claim=function(){var e=this;this.isClickd||(this.isClickd=!0,we.getDispatcher().emit(rr.Clam_Winging_Price,this.auctionId),this.scheduleOnce((function(){e.isClickd=!1}),2))},n.othorStatus=function(){var e=this;this.isClickd||(this.isClickd=!0,we.getDispatcher().emit(rr.Winging_Price_Status,this.is_Status,this.auctionId),this.scheduleOnce((function(){e.isClickd=!1}),2))},t}(f)).prototype,"auctionLabel",[xi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wi=ne(qi.prototype,"myBidsLabel",[Ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gi=ne(qi.prototype,"xpConsumedLabel",[Oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yi=ne(qi.prototype,"player",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vi=ne(qi.prototype,"resultLabel",[Li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ki=ne(qi.prototype,"typeLabel",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xi=ne(qi.prototype,"productNameLabel",[Ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zi=ne(qi.prototype,"ClaimButton",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ji=ne(qi.prototype,"declined",[Di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qi=ne(qi.prototype,"Status",[zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$i=ne(qi.prototype,"noanyone",[Ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),er=ne(qi.prototype,"statusButtonLabel",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fi=qi))||Fi);n._RF.pop(),n._RF.push({},"41f54XXnoxH8rK/Eis5A1qZ","ClaimRewardPrize",void 0);var Cr=i.ccclass,kr=i.property,Nr=(sr=Cr("ClaimRewardPrize"),ur=kr(I),lr=kr(I),cr=kr(u),pr=kr(a),hr=kr(a),dr=kr(a),sr((br=ne((gr=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"address",br,Q(e)),te(e,"PinCode",mr,Q(e)),te(e,"customPopUp",yr,Q(e)),te(e,"popupBg",vr,Q(e)),te(e,"UiNode",wr,Q(e)),te(e,"winingpage",_r,Q(e)),e.isClick=!1,e.openY=-230,e.closeY=-1700,e.isButtonClicked=!1,e.auctionId=null,e}Z(n,t);var i=n.prototype;return i.start=function(){we.getDispatcher().on(rr.Clam_Winging_Price,this.init,this)},i.onDestroy=function(){we.getDispatcher().off(rr.Clam_Winging_Price,this.init,this)},i.init=function(e){this.address.string="",this.PinCode.string=ie.loginDataResponse.data.zipcode||"",this.isClick=!1,this.auctionId=e,this.openPanel()},i.openPanel=function(){this.isButtonClicked||(this.isButtonClicked=!0),this.popupBg.active=!0;var e=this.popupBg.getComponent(h);e.opacity=0,d(e).to(.3,{opacity:255}).start(),this.UiNode.active=!0,d(this.UiNode).to(.25,{position:new p(0,this.openY,0)}).start()},i.closePanel=function(){var e=this;this.isButtonClicked&&(this.isButtonClicked=!1);var t=this.popupBg.getComponent(h);d(t).to(.25,{opacity:0},{onComplete:function(){e.popupBg.active=!1}}).start(),d(this.UiNode).to(.25,{position:new p(0,this.closeY,0)}).call((function(){e.UiNode.active=!1})).start()},i.onClickClaimReward=function(){var e;if(!this.isClick){this.isClick=!0;var t=null==(e=ie.loginDataResponse)?void 0:e.data,n=t.id,i=t.first_name,r=t.mobile_no,o=t.email,a=this.auctionId,s=this.address.string.trim(),u=this.PinCode.string.trim();if(s&&u){var l={user_Id:""+n,auction_Id:""+a,full_name:""+i,phone_number:""+r,email:""+o,full_shipping_address:""+s,zipcode:""+u};this.shippingAddress(l)}else this.showValidationAlert(o,s,u),this.isClick=!1}},i.shippingAddress=function(){var t=V(e().mark((function t(n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(Xe.SHIPPING_INFO,ot,n,!0);case 3:i=e.sent,this.closePanel(),d(this.node).delay(.5).call((function(){we.getDispatcher().emit(oe.AUCTION_Claim,n.auction_Id)})).start(),console.log("Shipping Info Submitted:",i),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Shipping API error:",e.t0),this.isClick=!1;case 13:case"end":return e.stop()}}),t,this,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),i.showValidationAlert=function(e,t,n){var i=this,r=l(this.customPopUp);r.setPosition(0,0),this.node.addChild(r),r.setScale(p.ZERO);var o=r.getComponent(ir);o.setCallback((function(){return i.setZoomOut(r)}),null);var a="Something went wrong.";t?e&&this.isStrictValidEmail(e)?n&&this.isValidIndianPincode(n)||(a=n?"Invalid Pin Code.":"Pin Code is required."):a=e?"Invalid email.":"Email is required.":a="Address is required.",o.Msg.string=a,o.title.string="ALERT!!",this.setZoom(r)},i.setZoomOut=function(e){d(e).to(.2,{scale:new p(0,0,1)}).call((function(){return e.destroy()})).start()},i.setZoom=function(e){d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.isValidIndianPincode=function(e){return/^[1-9][0-9]{5}$/.test(e)},i.isStrictValidEmail=function(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)},n}(f)).prototype,"address",[ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mr=ne(gr.prototype,"PinCode",[lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yr=ne(gr.prototype,"customPopUp",[cr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vr=ne(gr.prototype,"popupBg",[pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wr=ne(gr.prototype,"UiNode",[hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_r=ne(gr.prototype,"winingpage",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fr=gr))||fr);n._RF.pop(),n._RF.push({},"f7299u2e8RJgprJTvDpQOwH","LanguageManager",void 0);var Sr,Br,Rr,xr,Er,Or,Ar,Lr,Tr,Ir,Mr,Dr,zr,Ur,Hr,Fr,qr,jr,Wr,Gr,Yr,Vr,Kr,Xr,Zr,Jr,Qr,$r=function(){function t(){this.languageData={},this.currentLanguage="en"}var n=t.prototype;return n.init=function(){var t=V(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentLanguage=n||localStorage.getItem("language")||"en",e.next=3,this.loadLanguage(this.currentLanguage);case 3:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.loadLanguage=function(){var t=V(e().mark((function t(n){var i=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){s.load("i18n/"+n,(function(r,o){r?(console.error("Language file load error: "+r),t(r)):(i.languageData=o.json,i.currentLanguage=n,localStorage.setItem("language",n),console.log("this.languageData",i.languageData),i.setLanguage(n),e())}))})));case 1:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.setLanguage=function(){var t=V(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n==this.currentLanguage){e.next=3;break}return e.next=3,this.loadLanguage(n);case 3:we.getDispatcher().emit("language-changed");case 4:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.tWithVars=function(e,t){var n=this.languageData[e]||e;for(var i in t)n=n.replace("{{"+i+"}}",String(t[i]));return n},n.t=function(e,t){var n=this.languageData[e]||e;return t?n.replace(/\{\{(.*?)\}\}/g,(function(e,n){var i;return(null==(i=t[n.trim()])?void 0:i.toString())||""})):n},n.getLanguage=function(){return this.currentLanguage},X(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}();$r._instance=void 0,n._RF.pop(),n._RF.push({},"fe1750bRBtIfbwhOxmMbfUd","ShowWining",void 0);var eo,to=i.ccclass,no=i.property,io=(Sr=to("ShowWining"),Br=no(o),Rr=no(o),xr=no(R),Er=no(o),Or=no(o),Ar=no(S),Lr=no(u),Tr=no(a),Ir=no(o),Mr=no(o),Dr=no(o),zr=no(Nr),Sr((Fr=ne((Hr=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"wininHaderLabel",Fr,Q(e)),te(e,"winingLabel",qr,Q(e)),te(e,"winingBase",jr,Q(e)),te(e,"loseHaderLabel",Wr,Q(e)),te(e,"buttonLable",Gr,Q(e)),te(e,"submitButton",Yr,Q(e)),te(e,"isHistoryPrefab",Vr,Q(e)),te(e,"isHistoryParent",Kr,Q(e)),te(e,"winerName",Xr,Q(e)),te(e,"winingAmount",Zr,Q(e)),te(e,"winingAuction",Jr,Q(e)),te(e,"claimRewardPrize",Qr,Q(e)),e.isWining=!1,e.auction_id="",e}Z(n,t);var i=n.prototype;return i.start=function(){we.getDispatcher().on(oe.AUCTION_Claim,this.newAuctionButton,this)},i.init=function(){var e,t,n,i,r,o,a,s,u;this.isWining=!1,this.wininHaderLabel.node.active=!1,this.loseHaderLabel.node.active=!1;var l,c,p,h,d,f,g,b,m,y,v,w,_=localStorage.getItem("auctionHouseId");_&&_==(null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.id)||null==(n=ie.auctionWinner)||null==(i=n.winnerInfo)||!i.auction_id||(this.auction_id=null==(l=ie.auctionWinner)||null==(c=l.winnerInfo)?void 0:c.auction_id,this.getUniqueBidApi());(null==(r=ie.loginDataResponse)?void 0:r.data.id)===(null==(o=ie.auctionWinner)||null==(a=o.winnerInfo)?void 0:a.player_id)?(this.wininHaderLabel.node.active=!0,this.winerName.string="Winner Name : "+(null==(p=ie.auctionWinner)||null==(h=p.winnerInfo)?void 0:h.player_name),this.winingAmount.string="Bid Price : "+(null==(d=ie.auctionWinner)||null==(f=d.winnerInfo)?void 0:f.bid_price.toString()),this.winingLabel.string=$r.instance.t("enter_sms_code"),this.wininHaderLabel.string=$r.instance.t("hooray_you_win"),this.buttonLable.string=$r.instance.t("claim_your_prize"),this.isWining=!0):(this.loseHaderLabel.node.active=!0,this.winerName.string="Winner Name : "+(null==(g=ie.auctionWinner)||null==(b=g.winnerInfo)?void 0:b.player_name),this.winingAmount.string="Bid Price : "+(null==(m=ie.auctionWinner)||null==(y=m.winnerInfo)?void 0:y.bid_price.toString()),this.loseHaderLabel.string=$r.instance.t("hard_luck"),this.buttonLable.string=$r.instance.t("participate_new_auction"));null!=(s=ie.auctionWinner)&&null!=(u=s.winnerInfo)&&u.auction_id&&we.getDispatcher().emit(oe.ON_AUCTION_COMPLETE,null==(v=ie.auctionWinner)||null==(w=v.winnerInfo)?void 0:w.auction_id)},i.newAuctionButton=function(e){var t,n;e===(null==(t=ie.auctionWinner)||null==(n=t.winnerInfo)?void 0:n.auction_id)&&this.isWining&&(this.isWining=!1),this.buttonLable.string=$r.instance.t("participate_new_auction"),this.submitButton.interactable=!0},i.getUniqueBidApi=function(){var t=V(e().mark((function t(){var n=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(V(e().mark((function t(i,r){var o,a,s,u,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null==(o=ie.auctionWinner)?void 0:o.winnerInfo.auction_id,n.auction_id=u,e.next=4,bn.request(Xe.UNIQUE_BIDS+""+u,rt,null,!0);case 4:l=e.sent,console.log("uniquebidswin : ",l),ie.uniqueBidApiResponse=l,(null==(a=ie.uniqueBidApiResponse)||!a.data||(null==(s=ie.uniqueBidApiResponse)?void 0:s.data.length)>0)&&n.setHistoryData(),i();case 9:case"end":return e.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.onClickNextAuction=function(){this.submitButton.interactable=!1,this.isWining?this.claimRewardPrize.init(this.auction_id):(we.getDispatcher().emit(oe.REDIRECT_TO_HOME),this.node.active=!1)},i.setHistoryData=function(){var t=V(e().mark((function t(){var n,i,r,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isHistoryParent.removeAllChildren(),n=0;case 2:if(!(n<(null==(i=ie.uniqueBidApiResponse)?void 0:i.data.length))){e.next=12;break}return a=null==(r=ie.uniqueBidApiResponse)?void 0:r.data[n],e.next=6,this.newHistoryNode();case 6:(s=e.sent).getChildByName("Amount").getComponent(o).string=a.bid_price.toString(),s.getChildByName("PlayrName").getComponent(o).string=a.player_name.toString();case 9:n++,e.next=2;break;case 12:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.newHistoryNode=function(){var e=this;return new Promise((function(t,n){try{var i=l(e.isHistoryPrefab);e.isHistoryParent.addChild(i),t(i)}catch(e){console.error("newBidHistoryNode",e),n(e)}}))},n}(f)).prototype,"wininHaderLabel",[Br],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qr=ne(Hr.prototype,"winingLabel",[Rr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jr=ne(Hr.prototype,"winingBase",[xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wr=ne(Hr.prototype,"loseHaderLabel",[Er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gr=ne(Hr.prototype,"buttonLable",[Or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yr=ne(Hr.prototype,"submitButton",[Ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vr=ne(Hr.prototype,"isHistoryPrefab",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kr=ne(Hr.prototype,"isHistoryParent",[Tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xr=ne(Hr.prototype,"winerName",[Ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zr=ne(Hr.prototype,"winingAmount",[Mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jr=ne(Hr.prototype,"winingAuction",[Dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qr=ne(Hr.prototype,"claimRewardPrize",[zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ur=Hr))||Ur);function ro(t,n){return new Promise(V(e().mark((function i(r,o){var a,s,u,l,c,p,h,d,f,g;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.includes("-----BEGIN PUBLIC KEY-----")&&n.includes("-----END PUBLIC KEY-----")){e.next=3;break}throw new Error("Invalid PEM format: Missing BEGIN/END PUBLIC KEY headers");case 3:for("-----BEGIN PUBLIC KEY-----","-----END PUBLIC KEY-----",a=n.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace(/\s/g,""),s=atob(a),u=new Uint8Array(s.length),l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return e.next=11,window.crypto.subtle.importKey("spki",u.buffer,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]);case 11:return c=e.sent,p=new TextEncoder,h=p.encode(t.toString()),e.next=16,window.crypto.subtle.encrypt({name:"RSA-OAEP"},c,h);case 16:d=e.sent,f=new Uint8Array(d),g=btoa(String.fromCharCode.apply(String,f)),r(g),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),o(new Error("Failed to encrypt bid: "+e.t0));case 25:case"end":return e.stop()}}),i,null,[[0,22]])}))))}n._RF.pop(),n._RF.push({},"e5f49cNHbtOG4e9rjkcpNij","EncryptionHelper",void 0),n._RF.pop(),n._RF.push({},"71e59zsJUlC/IVqCKsah/Yo","TimerBase",void 0);var oo,ao,so,uo,lo,co,po,ho,fo,go,bo,mo,yo,vo,wo,_o,Po,Co,ko,No=i.ccclass,So=(i.property,No("TimerBase")(eo=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).duration=0,t.effect=new C,t.TimerText=void 0,t}Z(t,e);var n=t.prototype;return n.start=function(){},n.initializeTime=function(e){this.duration=e,this.checkRequiredComponents(),this.UpdateTimerUI(),this.startTimer()},n.startTimer=function(){var e=this;this.schedule((function(){return e.countDown()}),1,M.REPEAT_FOREVER,0)},n.stopTimer=function(){this.unscheduleAllCallbacks()},n.countDown=function(){this.duration-=1,this.pulseEffect(),this.UpdateTimerUI(),this.duration<=0&&(this.unscheduleAllCallbacks(),this.node.emit("TimerFinished"))},n.UpdateTimerUI=function(){var e=this.duration/60,t=Math.floor(e),n=(60*(e-t)).toFixed(0).toString(),i=t.toString();"0"==n&&(n="00");var r=i+":"+n;i.length<=1&&(r=(i="0"+i)+":"+n),n.length<=1&&(r=i+":"+(n="0"+n)),this.TimerText.string=r},n.checkRequiredComponents=function(){this.TimerText=this.getComponentInChildren(o),null==this.TimerText&&(this.TimerText=this.addComponent(o),this.UpdateTimerUI(),this.TimerText.fontSize=50)},n.pulseEffect=function(){var e;null==(e=this.effect)||e.stop(),this.effect=d(this.node).to(.1,{scale:new p(1.1,1.1,1.1)}).to(.1,{scale:new p(1,1,1)}).start()},t}(f))||eo);n._RF.pop(),n._RF.push({},"368b9VM2apJcbTtdMPksT7p","EditProfilePicture",void 0);var Bo,Ro,xo,Eo,Oo,Ao,Lo,To,Io,Mo,Do,zo,Uo,Ho,Fo,qo,jo=i.ccclass,Wo=i.property,Go=(oo=jo("EditProfilePicture"),ao=Wo(a),so=Wo(a),uo=Wo(a),lo=Wo(R),co=Wo(R),po=Wo(R),ho=Wo(a),fo=Wo(Si),oo((mo=ne((bo=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"icons",mo,Q(e)),te(e,"uiNode",yo,Q(e)),te(e,"block",vo,Q(e)),te(e,"profile",wo,Q(e)),te(e,"profileImage",_o,Q(e)),te(e,"clickIconSprite",Po,Q(e)),te(e,"uplodeButton",Co,Q(e)),te(e,"avatarIconsManager",ko,Q(e)),e.selectAvatar="",e.isSelected=null,e.iconIndex=1,e.isCistonSelected=!1,e}Z(n,t);var i=n.prototype;return i.init=function(){var t=V(e().mark((function t(){var n,i,r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectAvatar=ie.loginDataResponse.data.avatar?ie.loginDataResponse.data.avatar:"assets/avatar/1.png",n=ue.apiBaseURL+this.selectAvatar,e.next=4,this.avatarIconsManager.setAvatarIcon(n,this.profile);case 4:return e.next=6,this.avatarIconsManager.setAvatarIcon(n,this.profileImage);case 6:return e.next=8,this.avatarIconsManager.setAvatarIcon(n,this.clickIconSprite);case 8:i=1;case 9:if(!(i<=this.icons.length)){e.next=19;break}return(r=this.icons[i-1]).getComponent(S).clickEvents[0].customEventData=""+i,o=r.getChildByName("Icon").getComponent(R),a=ue.apiBaseURL+"assets/avatar/"+i+".png",e.next=16,this.avatarIconsManager.setAvatarIcon(a,o);case 16:i++,e.next=9;break;case 19:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onProfileClick=function(){this.block.active=!0,this.uiNode.active=!0,this.setZoom(this.uiNode),console.log("test game")},i.onSelect=function(){!this.isCistonSelected&&this.isSelected&&(this.profile.spriteFrame=this.isSelected.getChildByName("Icon").getComponent(R).spriteFrame,this.clickIconSprite.spriteFrame=this.isSelected.getChildByName("Icon").getComponent(R).spriteFrame,this.selectAvatar="assets/avatar/"+this.iconIndex+".png"),this.setZoomOut(this.uiNode),this.uiNode.active=!1,this.block.active=!1},i.closeClick=function(){this.setZoomOut(this.uiNode),this.uiNode.active=!1,this.block.active=!1},i.onClick=function(e,t){this.isSelected&&(this.isSelected.getComponent(S).interactable=!0,this.isSelected.getChildByName("Icon").getComponent(R).grayscale=!1,this.isSelected.getChildByName("Shadow").active=!1),this.isCistonSelected=!1;var n=e.target;this.isSelected=n,n.getComponent(S).interactable=!1,n.getChildByName("Icon").getComponent(R).grayscale=!0,this.isSelected.getChildByName("Shadow").active=!0,this.iconIndex=Number(t)},i.onClose=function(){this.setZoomOut(this.uiNode)},i.setZoomOut=function(e){d(e).to(.2,{scale:new p(0,0,1)}).call((function(){e.active=!1})).start()},i.setZoom=function(e){e.active=!0,e.setScale(p.ZERO),d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.uploadImageButtonTo=function(){var t=V(e().mark((function t(){var n,i=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isSelected?(this.isSelected.getComponent(S).interactable=!0,this.isSelected.getChildByName("Icon").getComponent(R).grayscale=!1,this.isSelected.getChildByName("Shadow").active=!1):(this.isSelected=this.uplodeButton,this.isSelected.getComponent(S).interactable=!1,this.isSelected.getChildByName("Shadow").active=!0),this.isCistonSelected=!0,(n=document.createElement("input")).type="file",n.accept="image/*",n.style.display="none",n.addEventListener("change",V(e().mark((function t(r){var o,a,s,u,l,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=r.target.files)&&0!==o.length){e.next=4;break}return console.warn("No file selected."),e.abrupt("return");case 4:return a=o[0],console.log("file.size",a.size),s=new FormData,Array.from(o).forEach((function(e){s.append("media",e,e.name)})),e.prev=8,we.getDispatcher().emit(oe.IS_LOADER_ON),e.next=12,fetch(ue.apiBaseURL+"v1/user/"+ie.loginDataResponse.data.id+"/avatar",{method:"PUT",headers:{Authorization:"Bearer "+ge()},body:s});case 12:if((u=e.sent).ok){e.next=15;break}throw new Error("Upload failed: "+u.statusText);case 15:return e.next=17,u.json();case 17:l=e.sent,ie.uploadProfileRes=l,console.log("Uploaded successfully:",l),we.getDispatcher().emit(oe.IS_LOADER_OFF),i.selectAvatar=ie.uploadProfileRes.data.avatar,e.next=28;break;case 24:e.prev=24,e.t0=e.catch(8),we.getDispatcher().emit(oe.IS_LOADER_OFF),console.error("Upload failed:",e.t0);case 28:n.remove(),(c=new FileReader).onload=function(){var e=new Image;e.onload=function(){var t=new A(e),n=new L;n.image=t;var r=new B;r.texture=n;var o=i.clickIconSprite.node;if(o){var a=o.getComponent(R);a&&(a.spriteFrame=r,i.profile.spriteFrame=r,i.profileImage.spriteFrame=r)}else console.warn("Target node not found.")},e.src=c.result},c.readAsDataURL(a);case 32:case"end":return e.stop()}}),t,null,[[8,24]])})))),document.body.appendChild(n),n.click();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n}(f)).prototype,"icons",[ao],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yo=ne(bo.prototype,"uiNode",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vo=ne(bo.prototype,"block",[uo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wo=ne(bo.prototype,"profile",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_o=ne(bo.prototype,"profileImage",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Po=ne(bo.prototype,"clickIconSprite",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Co=ne(bo.prototype,"uplodeButton",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ko=ne(bo.prototype,"avatarIconsManager",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),go=bo))||go);n._RF.pop(),n._RF.push({},"9dd8f/jsZdD9qHcHwRLmmSf","loadingFram",void 0);var Yo,Vo,Ko,Xo,Zo,Jo,Qo,$o,ea,ta,na,ia,ra,oa,aa,sa,ua,la,ca,pa,ha,da,fa,ga,ba,ma,ya,va,wa,_a,Pa,Ca,ka,Na,Sa,Ba,Ra,xa,Ea,Oa,Aa,La,Ta,Ia,Ma,Da,za,Ua,Ha,Fa,qa,ja=i.ccclass,Wa=i.property;Bo=ja("loadingFram"),Ro=Wa(R),xo=Wa(R),Eo=Wa(a),Oo=Wa(a),Ao=Wa(a),Lo=Wa(o),Bo((Mo=ne((Io=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"loading",Mo,Q(t)),te(t,"BG",Do,Q(t)),te(t,"logo",zo,Q(t)),te(t,"BlockBg",Uo,Q(t)),te(t,"newLoading",Ho,Q(t)),te(t,"amount",Fo,Q(t)),te(t,"speed",qo,Q(t)),t}Z(t,e);var n=t.prototype;return n.__preload=function(){window.parent.document.getElementById("gameFrame")&&(window.parent.document.getElementById("gameFrame").style.opacity="1"),setTimeout((function(){window.parent.document.getElementById("splashScreen")&&window.parent.document.getElementById("splashScreen").remove(),window.parent.document.getElementById("logo")&&window.parent.document.getElementById("logo").remove(),window.parent.document.getElementById("PoweredBy")&&window.parent.document.getElementById("PoweredBy").remove()}),200)},n.onLoad=function(){this.schedule(this.loader,.02),we.getDispatcher().on(oe.IS_LOADER_ON,this.isLoderOn,this),we.getDispatcher().on(oe.IS_LOADER_OFF,this.isLoderOff,this)},n.onDestroy=function(){we.getDispatcher().off(oe.IS_LOADER_ON,this.isLoderOn,this),we.getDispatcher().off(oe.IS_LOADER_OFF,this.isLoderOff,this)},n.loader=function(e){this.loading.node.angle=(this.loading.node.angle-this.speed)%360},n.isLoderOn=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=0),t>0)return this.amount.string="Ampunt payable : "+t,void(this.newLoading.active=!0);e?(this.BG.color=E(0,0,0,150),this.logo.active=!1):this.BG.color=E(255,255,255,255),this.BlockBg.active=!0,this.schedule(this.loader,.02)},n.isLoderOff=function(){this.unschedule(this.loader),this.BlockBg.active=!1,this.newLoading&&(this.newLoading.active=!1)},n.loadingStop=function(){this.node.removeFromParent()},n.loadingDestroy=function(){this.node.destroy()},t}(f)).prototype,"loading",[Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Do=ne(Io.prototype,"BG",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zo=ne(Io.prototype,"logo",[Eo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Uo=ne(Io.prototype,"BlockBg",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ho=ne(Io.prototype,"newLoading",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fo=ne(Io.prototype,"amount",[Lo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qo=ne(Io.prototype,"speed",[Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7}}),To=Io));n._RF.pop(),n._RF.push({},"0861fRx3C9E14H9Zj16Pezk","UpdateProfileKYC",void 0);var Ga,Ya,Va,Ka,Xa,Za,Ja,Qa,$a,es,ts,ns,is,rs,os,as,ss,us,ls,cs,ps,hs,ds,fs,gs,bs=i.ccclass,ms=i.property,ys=(Yo=bs("UpdateProfileKYC"),Vo=ms(a),Ko=ms(I),Xo=ms(o),Zo=ms(o),Jo=ms(I),Qo=ms(I),$o=ms(I),ea=ms(I),ta=ms(S),na=ms(o),ia=ms(o),ra=ms(R),oa=ms(a),aa=ms(a),sa=ms(a),ua=ms(a),la=ms(a),ca=ms(o),pa=ms(o),ha=ms(Go),da=ms(a),fa=ms(S),ga=ms(R),ba=ms(R),Yo((va=ne((ya=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"profilePicButton",va,Q(e)),te(e,"userName",wa,Q(e)),te(e,"gender",_a,Q(e)),te(e,"country",Pa,Q(e)),te(e,"email",Ca,Q(e)),te(e,"zipCode",ka,Q(e)),te(e,"referralCode",Na,Q(e)),te(e,"phoneNumber",Sa,Q(e)),te(e,"finishLoginBtn",Ba,Q(e)),te(e,"countryCode",Ra,Q(e)),te(e,"loggedInWith",xa,Q(e)),te(e,"profileImage",Ea,Q(e)),te(e,"emailBox",Oa,Q(e)),te(e,"phoneNumberBox",Aa,Q(e)),te(e,"popupBg",La,Q(e)),te(e,"UiNode",Ta,Q(e)),te(e,"errorPopup",Ia,Q(e)),te(e,"errorMessageLabel",Ma,Q(e)),te(e,"buttonLabel",Da,Q(e)),te(e,"editProfilePicture",za,Q(e)),te(e,"closeButton",Ua,Q(e)),te(e,"ccDownButton",Ha,Q(e)),te(e,"emailFrame",Fa,Q(e)),te(e,"mobileFrame",qa,Q(e)),e.isButtonClicked=!1,e}Z(n,t);var i=n.prototype;return i.onClick=function(){var e=ie.loginDataResponse.data;this.userName.string=e.first_name||"",this.gender.string=e.gender||"MALE";var t=e.mobile_no?this.splitMobileNumber(e.mobile_no):null;e.is_verified||(e.email?(this.loggedInWith.string=e.email,this.emailBox.active=!1,this.phoneNumberBox.active=!0):(this.loggedInWith.string=e.mobile_no||"",this.emailBox.active=!0,this.phoneNumberBox.active=!1)),this.email.string=e.email||"",this.zipCode.string=e.zipcode||"",this.referralCode.string="",this.phoneNumber.string=(null==t?void 0:t.mobileNo)||"",this.countryCode.string=(null==t?void 0:t.countryCode)||"+91",e.is_verified?(this.referralCode.node.parent.active=!1,this.buttonLabel.string="Update Profile",this.email.enabled=!1,this.phoneNumber.enabled=!1,this.email.textLabel.color=new y(180,180,180),this.phoneNumber.textLabel.color=new y(180,180,180),this.mobileFrame.color=new y(180,180,180),this.emailFrame.color=new y(180,180,180),this.countryCode.color=new y(180,180,180),this.ccDownButton.interactable=!1,this.buttonLabel.string=$r.instance.t("update_profile")):(this.buttonLabel.string=$r.instance.t("finish_login"),this.closeButton.active=!1),this.editProfilePicture.init(),this.showPopup(this.UiNode)},i.splitMobileNumber=function(e){var t=null==e?void 0:e.slice(-10);return{countryCode:null==e?void 0:e.slice(0,length-10),mobileNo:t}},i.onFinishLoginClick=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fgfbdhnxjs"),n=ie.loginDataResponse.data,i=n.mobile_no?n.mobile_no:this.countryCode.string+this.phoneNumber.string,""!=this.phoneNumber.string&&(i=this.countryCode.string+this.phoneNumber.string),r={first_name:this.userName.string.trim(),gender:this.gender.string.trim(),country:this.country.string.trim(),email:this.email.string.trim(),mobile_no:i,zipcode:this.zipCode.string.trim(),referral_code:this.referralCode.string.trim(),avatar:""+this.editProfilePicture.selectAvatar},!(o=this.validateInputs(r))){e.next=10;break}return this.showError(o),console.error(o),e.abrupt("return");case 10:return e.prev=10,u=ie.loginDataResponse.data.id,e.next=14,bn.request(""+Xe.REGISTRATION+u,at,r,!0);case 14:l=e.sent,ie.upDateProfileResponse=l,this.updateLocalProfile(),c=void 0,c="Something went wrong. Please try again.",null!=(t=l)&&t.message?c=t.message:"string"==typeof t?c=t:null!=t&&t.code&&(c="Error Code "+t.code),console.error(" ERROR: "+c),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,c),we.getDispatcher().emit(oe.PROFILE_UPDATE),null!=(a=this.editProfilePicture)&&null!=(s=a.isSelected)&&s.getChildByName("Icon")&&(this.profileImage.spriteFrame=this.editProfilePicture.isSelected.getChildByName("Icon").getComponent(R).spriteFrame),ue.is_verified?this.onClickCloseButton():(it.clearInstance(),_.loadScene("MultipleAuction")),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(10),console.error(" Profile update failed",e.t0),this.showError("Failed to update profile. Try again.");case 27:case"end":return e.stop()}var t,c}),t,this,[[10,23]])})));return function(){return t.apply(this,arguments)}}(),i.validateInputs=function(e){return!e.first_name||e.first_name.length<3?"Username must be at least 3 characters.":!e.first_name||e.first_name.length>14?"Username must be at upto 14 characters.":e.mobile_no&&this.isValidFullMobileNumber(e.mobile_no)?!e.zipcode||e.zipcode.length<3?"Enter a valid zip code.":e.gender?e.country?e.email&&this.isValidEmail(e.email)?null:"Enter a valid email address.":"Country is required.":"Gender is required.":"Enter a valid 10-digit phone number."},i.isValidFullMobileNumber=function(e){if(!e||"string"!=typeof e)return!1;return/^\+(\d{1,4})(\d{10})$/.test(e)},i.isValidEmail=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.toLowerCase())},i.updateLocalProfile=function(){var e=ie.upDateProfileResponse.data,t=ie.loginDataResponse.data;Object.assign(t,{first_name:e.first_name,last_name:e.last_name,email:e.email,mobile_no:e.mobile_no,avatar:e.avatar,referral_code:e.referral_code,wallet_address:e.wallet_address,gender:e.gender,country:e.country,city:e.city,zipcode:e.zipcode,is_verified:e.is_verified}),e.is_verified&&(localStorage.setItem("PlayerLoginObj",JSON.stringify(ie.loginDataResponse)),ve.inst.setItem("PlayerLoginObj",JSON.stringify(ie.loginDataResponse)))},i.showError=function(e){we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,e||"")},i.showPopup=function(e){var t=this;this.popupBg.active=!0;var n=this.popupBg.getComponent(h);n.opacity=0,d(n).to(.3,{opacity:255}).start(),e.active=!0,e.setScale(new p(0,0,1)),d(e).to(.3,{scale:new p(1.1,1.1,1)},{easing:"backOut",onComplete:function(){t.isButtonClicked=!1}}).start()},i.onClickCloseButton=function(){this.closePopup(this.UiNode),this.editProfilePicture.onClose()},i.closePopup=function(e){var t=this;d(e).to(.2,{scale:new p(0,0,1)},{easing:"backIn",onComplete:function(){e.active=!1}}).start();var n=this.popupBg.getComponent(h);d(n).to(.3,{opacity:0},{onComplete:function(){t.popupBg.active=!1}}).start(),this.isButtonClicked=!1},n}(f)).prototype,"profilePicButton",[Vo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wa=ne(ya.prototype,"userName",[Ko],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_a=ne(ya.prototype,"gender",[Xo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pa=ne(ya.prototype,"country",[Zo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ca=ne(ya.prototype,"email",[Jo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ka=ne(ya.prototype,"zipCode",[Qo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Na=ne(ya.prototype,"referralCode",[$o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sa=ne(ya.prototype,"phoneNumber",[ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ba=ne(ya.prototype,"finishLoginBtn",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ra=ne(ya.prototype,"countryCode",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xa=ne(ya.prototype,"loggedInWith",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ea=ne(ya.prototype,"profileImage",[ra],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oa=ne(ya.prototype,"emailBox",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Aa=ne(ya.prototype,"phoneNumberBox",[aa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),La=ne(ya.prototype,"popupBg",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ta=ne(ya.prototype,"UiNode",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ia=ne(ya.prototype,"errorPopup",[la],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ma=ne(ya.prototype,"errorMessageLabel",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Da=ne(ya.prototype,"buttonLabel",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),za=ne(ya.prototype,"editProfilePicture",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ua=ne(ya.prototype,"closeButton",[da],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ha=ne(ya.prototype,"ccDownButton",[fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fa=ne(ya.prototype,"emailFrame",[ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qa=ne(ya.prototype,"mobileFrame",[ba],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ma=ya))||ma);n._RF.pop(),n._RF.push({},"0ead9OeTRND4JJ4kaREl/l5","LoginScreen",void 0);var vs,ws,_s,Ps,Cs,ks,Ns,Ss,Bs,Rs,xs,Es,Os,As,Ls,Ts,Is,Ms,Ds,zs,Us,Hs,Fs,qs=i.ccclass,js=i.property,Ws=(Ga=qs("LoginScreen"),Ya=js(o),Va=js(I),Ka=js(I),Xa=js([I]),Za=js(u),Ja=js(ys),Qa=js(So),$a=js(o),es=js(S),ts=js(S),ns=js(D),Ga((os=ne((rs=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"countryCode",os,Q(e)),te(e,"phoneNumber",as,Q(e)),te(e,"emailEditBox",ss,Q(e)),te(e,"isOTPBox",us,Q(e)),te(e,"customPopUp",ls,Q(e)),te(e,"updateProfileKYC",cs,Q(e)),te(e,"timerBase",ps,Q(e)),te(e,"InvalidOTPMsg",hs,Q(e)),te(e,"submitButton",ds,Q(e)),te(e,"resendOTP",fs,Q(e)),te(e,"codeSentWith",gs,Q(e)),e.isSendOtp=!1,e.isOtpClicked=!1,e.currentIndex=0,e.LoginWith="",e}Z(n,t);var i=n.prototype;return i.start=function(){var e=this;this.timerBase.node.on("TimerFinished",this.otpTimeUp,this),this.isOTPBox.forEach((function(t,n){t.node.on("editing-did-began",(function(){return e.onEditBoxBegan(n)}),e),t.node.on("text-changed",(function(){return e.onTextChanged(n)}),e),t.node.on("editing-did-ended",e.onEditEnd,e)}))},i.init=function(){this.phoneNumber.string="",this.emailEditBox.string="",this.isOTPBox.forEach((function(e){e.string="",e.getComponentInChildren(o).string=""})),this.timerBase.stopTimer(),this.submitButton.interactable=!0,this.isSendOtp=!1},i.resendOtp=function(){this.offResend(),this.isSendOtp=!1,this.onLoginClick(),this.isOTPBox.forEach((function(e){return e.string=""})),this.resetOTPLabel()},i.onLoginClick=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submitButton.interactable=!1,n=this.countryCode.string,i=this.phoneNumber.string,r=this.emailEditBox.string,o=this.createOtpRequest(n,i,r)){e.next=9;break}return this.getLoginAlertMessage(n,i,r),this.submitButton.interactable=!0,e.abrupt("return",!1);case 9:return e.prev=9,a=$r.instance.t("enter_code_sent_to"),s=o.email||o.mobile_no||"",this.codeSentWith.string="<color=#ffffff>"+a+" </color><color=#00FFA3>"+s+"</color>",this.offResend(),e.next=16,bn.request(Xe.SEND_OTP,ot,o);case 16:return u=e.sent,ie.loginOtpResponse=u,this.timerBase.stopTimer(),this.timerBase.initializeTime(20),this.isSendOtp=!0,this.submitButton.interactable=!0,this.isOtpClicked=!1,this.isOTPBox[0].focus(),e.abrupt("return",!0);case 27:return e.prev=27,e.t0=e.catch(9),console.error("Send OTP Error:",e.t0),this.otpTimeUp(),this.submitButton.interactable=!0,e.abrupt("return",!1);case 33:case"end":return e.stop()}}),t,this,[[9,27]])})));return function(){return t.apply(this,arguments)}}(),i.createOtpRequest=function(e,t,n){return e&&t&&this.isValidPhoneNumber(t)?{mobile_no:""+e+t}:n&&this.isValidEmail(n)?{email:n}:null},i.onClickOtp=function(){var t=V(e().mark((function t(){var n,i,r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isOtpClicked){e.next=2;break}return e.abrupt("return",!1);case 2:if(this.isOtpClicked=!0,4===(n=this.getOTPCode()).length){e.next=9;break}return this.getOtpAlertMessage(n),this.isOtpClicked=!1,this.submitButton.interactable=!0,e.abrupt("return",!1);case 9:return i={hostname:ue.hostname,otpRequestId:ie.loginOtpResponse.data.otpRequestId,otp:n},e.prev=10,e.next=13,this.loginWithOTP(i);case 13:return r=e.sent,ie.loginDataResponse=r,Je.setCookie(le.ACCESS_TOKEN,r.data.accessToken,30),Je.setCookie(le.USER_ID,r.data.id,30),Je.setCookie(le.REFRESH_TOKEN,r.data.refreshToken,30),localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),ve.inst.setItem(le.ACCESS_TOKEN,r.data.accessToken),ve.inst.setItem(le.REFRESH_TOKEN,r.data.refreshToken),ve.inst.setItem(le.USER_ID,r.data.id),r.data.is_verified&&localStorage.setItem("PlayerLoginObj",JSON.stringify(r)),e.next=26,this.getWalletBalance();case 26:return this.timerBase.stopTimer(),r.data.is_verified?(it&&it.clearInstance(),_.loadScene("MultipleAuction")):this.updateProfileKYC.onClick(),e.abrupt("return",!0);case 31:return e.prev=31,e.t0=e.catch(10),console.error("Login or wallet fetch failed:",e.t0),e.abrupt("return",!1);case 35:return e.prev=35,this.isOtpClicked=!1,e.finish(35);case 38:case"end":return e.stop()}}),t,this,[[10,31,35,38]])})));return function(){return t.apply(this,arguments)}}(),i.loginWithOTP=function(t){return new Promise(V(e().mark((function n(i,r){var o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(Xe.LOGIN,ot,t);case 3:o=e.sent,i(o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),n,null,[[0,7]])}))))},i.getWalletBalance=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ie.loginDataResponse.data.id,e.prev=1,e.next=4,bn.request(Xe.WALLET_BALANCE+n,rt,null,!0);case 4:i=e.sent,ie.playerBalancesResponse=i,console.log("Wallet Balance:",i),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),console.error("Wallet Balance Error",e.t0),e.t0;case 13:case"end":return e.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),i.otpTimeUp=function(){this.resendOTP.interactable=!0;var e=$r.instance.t("didnt_receive_code"),t=$r.instance.t("resend");this.resendOTP.node.getComponent(D).string="<color=#ffffff>"+e+" </color><color=#0000ff><u>"+t+"</u></color>"},i.offResend=function(){this.resendOTP.interactable=!1;var e=$r.instance.t("didnt_receive_code"),t=$r.instance.t("resend");this.resendOTP.node.getComponent(D).string="<color=#969696>"+e+" </color><color=#969696><u>"+t+"</u></color>"},i.iInvalidOTP=function(e){this.InvalidOTPMsg.string=e,this.showPopup("ALERT!!",e),this.isOTPBox.forEach((function(e){e.node.getComponentInChildren(o).color=y.RED}))},i.resetOTPLabel=function(){this.InvalidOTPMsg.string="",this.isOTPBox.forEach((function(e){e.node.getComponentInChildren(o).color=y.WHITE}))},i.getOtpAlertMessage=function(e){var t="Something went wrong.";e?4!==e.length&&(t="OTP must be 4 digits."):t="OTP cannot be empty.",this.showPopup("ALERT!!",t)},i.getLoginAlertMessage=function(e,t,n){var i="Something went wrong.";"email"==this.LoginWith?n&&""!==n.trim()?this.isValidEmail(n)||(i="Please enter a valid email address."):i="Please enter your email address.":"phone"==this.LoginWith&&(t&&""!==t.trim()?this.isValidPhoneNumber(t)||(i="Please enter a valid phone number."):i="Please enter your phone number."),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,i||"Please try again, something went wrong.")},i.showPopup=function(e,t){var n=this,i=l(this.customPopUp);i.setPosition(0,0),i.setScale(p.ZERO),this.node.addChild(i);i.getComponent(ir).setCallback((function(){return n.setZoomOut(i)}),null),i.getComponent(ir).Msg.string=t,i.getComponent(ir).title.string=e,this.setZoom(i)},i.setZoom=function(e){d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.setZoomOut=function(e){d(e).to(.2,{scale:p.ZERO}).destroySelf().start()},i.onEditboxEditingBegan=function(){ce.emit(pe,!0)},i.onEditboxEditingEnd=function(){ce.emit(pe,!1)},i.onEditBoxBegan=function(e){this.onEditboxEditingBegan(),this.currentIndex=e,this.resetOTPLabel()},i.onTextChanged=function(e){var t=this.isOTPBox[e].string;3===e&&0!=t.length?(this.isOTPBox[e].string=t.charAt(0),this.focusPrevEditBox(e+1)):2===t.length?(this.isOTPBox[e].string=t.charAt(0),this.focusNextEditBox(e,t.charAt(1))):0===t.length?this.focusPrevEditBox(e):t.length>1&&this.focusPrevEditBox(e+1)},i.focusNextEditBox=function(e,t){e<this.isOTPBox.length-1&&(this.isOTPBox[e+1].string=t,this.isOTPBox[e+1].focus())},i.focusPrevEditBox=function(e){e>0&&this.isOTPBox[e-1].focus()},i.isValidPhoneNumber=function(e){return/^\d{10}$/.test(e)},i.isValidEmail=function(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)},i.isRealCountryCode=function(e){return Gs.has(e)},i.getOTPCode=function(){return this.isOTPBox.map((function(e){return e.string.trim()})).join("")},i.onEditEnd=function(){this.onEditboxEditingEnd()},n}(f)).prototype,"countryCode",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),as=ne(rs.prototype,"phoneNumber",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ss=ne(rs.prototype,"emailEditBox",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),us=ne(rs.prototype,"isOTPBox",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ls=ne(rs.prototype,"customPopUp",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cs=ne(rs.prototype,"updateProfileKYC",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ps=ne(rs.prototype,"timerBase",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hs=ne(rs.prototype,"InvalidOTPMsg",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ds=ne(rs.prototype,"submitButton",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fs=ne(rs.prototype,"resendOTP",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gs=ne(rs.prototype,"codeSentWith",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),is=rs))||is),Gs=new Set(["+1","+44","+91","+81","+61","+49","+33","+971","+86","+7"]);n._RF.pop(),n._RF.push({},"778aenarc1Bg7CfhDEq7nuy","LoginPopupManager",void 0);var Ys,Vs,Ks,Xs,Zs,Js,Qs,$s,eu,tu,nu,iu,ru,ou,au,su,uu,lu,cu,pu,hu,du,fu,gu,bu,mu,yu,vu,wu,_u,Pu,Cu,ku,Nu,Su,Bu,Ru,xu=i.ccclass,Eu=i.property,Ou=(vs=xu("LoginPopupManager"),ws=Eu(a),_s=Eu(a),Ps=Eu(a),Cs=Eu(a),ks=Eu(a),Ns=Eu(a),Ss=Eu(a),Bs=Eu(a),Rs=Eu(a),xs=Eu(Ws),vs((As=ne((Os=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"loginWithEmailNode",As,Q(e)),te(e,"loginWithWalletNode",Ls,Q(e)),te(e,"loginWithWhatsappNode",Ts,Q(e)),te(e,"buttonPanel",Is,Q(e)),te(e,"otpLoginPopup",Ms,Q(e)),te(e,"emailLoginPopup",Ds,Q(e)),te(e,"walletLoginPopup",zs,Q(e)),te(e,"sendOtp",Us,Q(e)),te(e,"popupBg",Hs,Q(e)),te(e,"loginScreen",Fs,Q(e)),e.isEmailOn=!1,e.isPopUPon=!1,e.isclicked=!1,e.isButtonClicked=!1,e}Z(n,t);var i=n.prototype;return i.init=function(){var t=V(e().mark((function t(){var n,i,r,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.popupBg.active){e.next=2;break}return e.abrupt("return");case 2:return this.popupBg.active=!0,this.popupBg.getComponent(h).opacity=0,we.getDispatcher().emit(oe.IS_LOADER_ON,!0),e.prev=6,e.next=9,this.getAuctionHouseConfigsPromise(null==(n=ie.auctionHouseResponse)||null==(i=n.data)||null==(r=i.currentAuctionHouse)?void 0:r.id);case 9:o=e.sent,we.getDispatcher().emit(oe.IS_LOADER_OFF,!0),this.applyLoginOptions(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error("Error fetching auction house configs:",e.t0);case 17:this.otpLoginPopup.active=!1,this.emailLoginPopup.active=!1,this.walletLoginPopup.active=!1,this.sendOtp.active=!1,this.popupBg.active=!1,this.buttonPanel.active=!0,this.showPopup(this.popupBg),this.loginScreen.init();case 25:case"end":return e.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),i.applyLoginOptions=function(e){this.loginWithEmailNode.active=e.data.config.loginWithEmail,this.loginWithWalletNode.active=e.data.config.loginWithWallet,this.loginWithWhatsappNode.active=e.data.config.loginWithWhatsapp},i.backClick=function(){this.sendOtp.active?(this.sendOtp.active=!1,this.isEmailOn?(this.isEmailOn=!1,this.emailLoginPopup.active=!0):this.otpLoginPopup.active=!0):(this.otpLoginPopup.active=!1,this.emailLoginPopup.active=!1,this.walletLoginPopup.active=!1,this.buttonPanel.active=!0),this.isButtonClicked=!1},i.onClickLoginWithOTP=function(){this.isButtonClicked||(this.isButtonClicked=!0,this.loginScreen.init(),this.loginScreen.LoginWith="phone",this.otpLoginPopup.active=!0,this.buttonPanel.active=!1)},i.onClickLoginWithEmail=function(){this.isButtonClicked||(this.isButtonClicked=!0,this.loginScreen.LoginWith="email",this.loginScreen.init(),this.isEmailOn=!0,this.emailLoginPopup.active=!0,this.buttonPanel.active=!1)},i.onClickLoginWithWallet=function(){this.isButtonClicked||(this.isButtonClicked=!0,this.loginScreen.LoginWith="wallet",this.walletLoginPopup.active=!0,this.buttonPanel.active=!1)},i.openOtpPanel=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isclicked){e.next=2;break}return e.abrupt("return");case 2:return this.isclicked=!0,e.next=5,this.loginScreen.onLoginClick();case 5:e.sent?(console.log("OTP login successful!"),this.otpLoginPopup.active=!1,this.emailLoginPopup.active=!1,this.sendOtp.active=!0,this.isclicked=!1):(console.log("OTP login failed."),this.isclicked=!1);case 7:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.showPopup=function(e){var t=this;this.popupBg.active=!0;var n=this.popupBg.getComponent(h);n.opacity=0,d(n).to(.3,{opacity:255}).start(),e.active=!0,e.setScale(new p(0,0,1)),d(e).to(.3,{scale:new p(1.15,1.15,1)},{easing:"backOut",onComplete:function(){t.isButtonClicked=!1}}).start()},i.onClose=function(){this.closePopup(this.popupBg),this.isEmailOn=!1},i.closePopup=function(e){var t=this;d(e).to(.2,{scale:new p(0,0,1)},{easing:"backIn",onComplete:function(){e.active=!1}}).start(),d(this.popupBg.getComponent(h)).to(.3,{opacity:0},{onComplete:function(){t.popupBg.active=!1}}).start(),this.isButtonClicked=!1},i.getAuctionHouseConfigsPromise=function(t){var n=Xe.AUCTION_HOUSE_CONFIGS+"/"+t+"/configs";return new Promise(V(e().mark((function t(i,r){var o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(n,rt);case 3:(o=e.sent).success?i(o):r(new Error(o.message||"Failed to fetch configs")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),t,null,[[0,7]])}))))},n}(f)).prototype,"loginWithEmailNode",[ws],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ls=ne(Os.prototype,"loginWithWalletNode",[_s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ts=ne(Os.prototype,"loginWithWhatsappNode",[Ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Is=ne(Os.prototype,"buttonPanel",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ms=ne(Os.prototype,"otpLoginPopup",[ks],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ds=ne(Os.prototype,"emailLoginPopup",[Ns],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zs=ne(Os.prototype,"walletLoginPopup",[Ss],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Us=ne(Os.prototype,"sendOtp",[Bs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hs=ne(Os.prototype,"popupBg",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fs=ne(Os.prototype,"loginScreen",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Es=Os))||Es);n._RF.pop(),n._RF.push({},"814b8Zxk3BJMbDw2cH1hnOA","SocketEventHandler",void 0);var Au,Lu,Tu,Iu,Mu,Du,zu,Uu,Hu,Fu,qu,ju,Wu,Gu=i.ccclass,Yu=i.property,Vu=(Ys=Gu("SocketEventHandler"),Vs=Yu(o),Ks=Yu(u),Xs=Yu(o),Zs=Yu(o),Js=Yu(R),Qs=Yu(a),$s=Yu(o),eu=Yu(Yn),tu=Yu(a),nu=Yu(u),iu=Yu(a),ru=Yu(ei),ou=Yu(Ge),au=Yu(Ou),su=Yu(a),uu=Yu(a),lu=Yu(o),Ys((hu=ne((pu=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"bidNumberLabel",hu,Q(e)),te(e,"isHistoryPrefab",du,Q(e)),te(e,"walletBalance",fu,Q(e)),te(e,"percentageLabel",gu,Q(e)),te(e,"bidSprite",bu,Q(e)),te(e,"winingPage",mu,Q(e)),te(e,"errorMessege",yu,Q(e)),te(e,"uniqueBidsAndCounts",vu,Q(e)),te(e,"LoginScreen",wu,Q(e)),te(e,"avatarPrefab",_u,Q(e)),te(e,"avatarParent",Pu,Q(e)),te(e,"uniqueHistorymanager",Cu,Q(e)),te(e,"allBidHistoryManager",ku,Q(e)),te(e,"loginPopupManager",Nu,Q(e)),te(e,"comingSoonPage",Su,Q(e)),te(e,"isHistoryParent",Bu,Q(e)),te(e,"avatarCounter",Ru,Q(e)),e.bidHistoryData=[],e.avatarNodedata=[],e.isHistoryToggle=!0,e.minBidNumber=0,e.sendBidPrice=0,e.maxBidNumber=99.99,e.currentNumber=0,e.currentAvatar="",e.bidPriceForUniqe=0,e.bidBoxMsg="",e.isAuctionState=!1,e.setBitsinLocal=[],e.currentValue=99.9,e.minValue=1.1,e.step=.1,e}Z(n,t);var i=n.prototype;return i.start=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.tickCountdown=function(){this.currentValue-=this.step,this.currentValue<this.minValue&&(this.unschedule(this.tickCountdown),this.currentValue=this.minValue),this.bidNumberLabel.string=this.currentValue.toFixed(1),this.onEnterBid()},i.init=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.onEvents();case 1:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onEvents=function(){var e,t,n,i,r=we.getDispatcher();r.on(ae.CLS_AUCTION_CURRENT_PLAY,this.onAuctionCurrentPlay,this),r.on(ae.CLS_AUCTION_MIN_MAX_PERCENTAGE,this.onAuctionMinMaxPercentage,this),r.on(ae.CLS_AUCTION_AVATARS,this.onAuctionAvatars,this),r.on(ae.CLS_AUCTION_WINNER,this.onAuctionWinner,this),r.on(ae.CLS_AUCTION_STATE,this.onAuctionState,this),r.on(ae.CLS_AUCTION_ERROR,this.onAuctionError,this),r.on(ae.CLS_Min_Max_Recent_Bid,this.onMinMaxRecentBid,this),r.on(ae.CLS_MIN_MAX_BID_CANCEL,this.onMinMaxCancelBid,this),r.on(oe.ON_SELECT_AUCTION,this.enterBetween,this),this.minBidNumber=(null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.min_bid_price)||0,this.maxBidNumber=(null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.max_bid_price)||99.99;var o="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice);this.bidBoxMsg=o,this.bidNumberLabel.string=o,this.setMessegeinBox(o),this.allBidHistoryManager.setMyBidsInit()},i.enterBetween=function(){var e,t,n,i;this.minBidNumber=(null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.min_bid_price)||0,this.maxBidNumber=(null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.max_bid_price)||99.99;var r="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice);this.bidBoxMsg=r},i.onDestroy=function(){var e=we.getDispatcher();e.off(ae.CLS_AUCTION_CURRENT_PLAY,this.onAuctionCurrentPlay,this),e.off(ae.CLS_AUCTION_MIN_MAX_PERCENTAGE,this.onAuctionMinMaxPercentage,this),e.off(ae.CLS_AUCTION_AVATARS,this.onAuctionAvatars,this),e.off(ae.CLS_AUCTION_WINNER,this.onAuctionWinner,this),e.off(ae.CLS_AUCTION_STATE,this.onAuctionState,this),e.off(ae.CLS_AUCTION_ERROR,this.onAuctionError,this),e.off(ae.CLS_Min_Max_Recent_Bid,this.onMinMaxRecentBid,this),e.off(ae.CLS_MIN_MAX_BID_CANCEL,this.onMinMaxCancelBid,this),e.off(oe.ON_SELECT_AUCTION,this.enterBetween,this)},i.selectAuctionLabel=function(e){this.bidNumberLabel=e},i.onEnterBid=function(){var t,n,i,r,o=this;if(console.log("is in onEnterBid"),!ue.isLogin)return this.bidNumberLabel.string=this.bidBoxMsg,void this.loginPopupManager.init();if(console.log("network check",ue.isBidPlaced),ue.isBidPlaced){Ke.inst.play("Click");var a=this.bidNumberLabel.string,s=Number(a);if(s<=this.minBidNumber||s>=this.maxBidNumber){var u="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice);this.bidNumberLabel.string=u}else{var l="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice);this.bidNumberLabel.string=l;var c=null==(t=ie.auctionHouseListResponse)||null==(n=t.data[ue.auctionIndex])?void 0:n.rsa_public_key;if(s&&c){var p,h;if(ue.isBidPlaced=!1,this.sendBidPrice=s,this.bidPriceForUniqe=s,this.bidNumberLabel.string=this.bidBoxMsg,null!=(i=ie.loginDataResponse)&&null!=(r=i.data)&&r.avatar)this.currentAvatar=null==(p=ie.loginDataResponse)||null==(h=p.data)?void 0:h.avatar;else""==this.currentAvatar&&(this.currentAvatar="assets/avatar/1.png");V(e().mark((function t(){var n,i,r,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(s,c);case 2:n=e.sent,i=ie.auctionHouseListResponse.data[ue.auctionIndex].id,r=ie.loginDataResponse.data,a={auction_id:i,player_id:r.id,bid_price:n,player_name:r.first_name,profile_image:""+ue.apiBaseURL+o.currentAvatar},it.getInstance().sendMessage("min:max:auction",a);case 7:case"end":return e.stop()}}),t)})))()}}}else{we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"please check your network connection.");var d="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice);this.bidNumberLabel.string=d}},i.onAuctionCurrentPlay=function(e){ie.auctionCurrentPlay=e,we.getDispatcher().emit(oe.IS_LOADER_OFF),console.log("onAuctionCurrentPlay",e),null!=e&&e.play_balance?(this.walletBalance.string=e.play_balance+"",ie.playerBalancesResponse.data.play_balance=e.play_balance):(this.walletBalance.string="0",ie.playerBalancesResponse.data.play_balance=e.play_balance?e.play_balance:0)},i.animateBidPercentage=function(e,t){this.currentNumber=e;var n=t-e>0?t-e:1;d({value:e}).delay(.286).to(n/50,{value:t},{onUpdate:this.updateBidPercentageLabel.bind(this)}).start()},i.updateBidPercentageLabel=function(e){this.currentNumber=Math.floor(e.value),this.bidSprite.fillRange=this.currentNumber/100,this.percentageLabel.string=this.currentNumber+"%"},i.onAuctionMinMaxPercentage=function(e){var t,n,i;if(null!=e&&null!=(t=e.data)&&t.auction_id&&(null==e||null==(n=e.data)?void 0:n.auction_id)===(null==(i=ie.auctionHouseListResponse.data[ue.auctionIndex])?void 0:i.id)){var r;ie.auctionMinMaxPercentage=e;var o=null==e||null==(r=e.data)?void 0:r.bid_percentage;if(console.log(o),!o&&0!=o)return;this.animateBidPercentage(this.currentNumber,o)}},i.onAuctionAvatars=function(e){var t;if(null!=e&&e.auction_id&&(null==e?void 0:e.auction_id)===(null==(t=ie.auctionHouseListResponse.data[ue.auctionIndex])?void 0:t.id))if(ie.auctionAvatars=e,this.avatarNodedata.length<=e.data.length){for(var n=0;n<this.avatarNodedata.length;n++)this.setUpdateAvatar(e.data[n].profile_image,n);for(var i=this.avatarNodedata.length;i<e.data.length;i++)this.setAvatar(e.data[i].profile_image,e.data[i].player_name)}else{this.avatarNodedata.length=0,this.avatarParent.removeAllChildren();for(var r=this.avatarNodedata.length;r<e.data.length;r++)this.setAvatar(e.data[r].profile_image,e.data[r].player_name)}},i.onAuctionWinner=function(e){var t,n,i;null!=e&&null!=(t=e.winnerInfo)&&t.auction_id&&(ie.auctionWinner=e,this.winingPage.getComponent(io).init(),this.winingPage.active=!0,localStorage.removeItem(null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.id))},i.onAuctionState=function(e){if(ie.AuctionLiveState=e,!this.isAuctionState&&"Auction Live"===(null==e?void 0:e.message)){var t=ie.AuctionLiveState.auctionId;this.comingSoonPage&&this.comingSoonPage.active&&(this.comingSoonPage.active=!1);try{this.getAuctionHouseListData().then((function(){console.log("Emit Auction ",t),we.getDispatcher().emit("onAuctionState:new:auction",t)}))}catch(e){}}},i.onAuctionError=function(e){var t;null!=e&&e.auction_id&&(null==e?void 0:e.auction_id)===(null==(t=ie.auctionHouseListResponse.data[ue.auctionIndex])?void 0:t.id)&&(this.sendBidPrice=0,ue.isBidPlaced=!0,we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,(null==e?void 0:e.message)||""))},i.onMinMaxRecentBid=function(e){var t;if(console.log("onMinMaxRecentBid solket event",e),null!=e&&e.auction_id&&(null==e?void 0:e.auction_id)===(null==(t=ie.auctionHouseListResponse.data[ue.auctionIndex])?void 0:t.id)){var n,i,r;ie.MinMaxRecentBid=e;var o=null==e||null==(n=e.data)?void 0:n.is_unique,a=null!=e&&null!=(i=e.data)&&i.uuid?null==e||null==(r=e.data)?void 0:r.uuid:"",s=this.bidPriceForUniqe;we.getDispatcher().emit(oe.SET_BID_HISTORY,ie.MinMaxRecentBid,s);var u=s;if(ue.isBidPlaced=!0,u&&u>0){var l=Tn(),c={bidPrice:u.toString(),isUnique:o,Time:l};this.allBidHistoryManager.addBid(a,c),o&&a?(this.bidPriceForUniqe=0,this.uniqueHistorymanager.addBid(a,c),this.uniqueBidsAndCounts.setUniqueData(!0),Ke.inst.play("Unique")):(this.bidPriceForUniqe=0,this.uniqueBidsAndCounts.setUniqueData(!1),Ke.inst.play("NotUnique"))}!function(e){void 0===e&&(e=200);"undefined"!=typeof navigator&&navigator.vibrate?navigator.vibrate(e):console.log("Vibration not supported.")}(300)}},i.onMinMaxCancelBid=function(e){console.log("onMinMaxCancelBid",e);var t=null==e?void 0:e.auction_id;null!=e&&e.uuid&&(this.uniqueHistorymanager.removeBid(e.uuid,t),this.allBidHistoryManager.removeBid(e.uuid))},i.historySetup=function(){var e=this,t=this.sendBidPrice;this.sendBidPrice=0;var n=ie.auctionHouseListResponse.data[ue.auctionIndex].id,i=localStorage.getItem(n),r=[];if(i&&(r=i.split(",")),0==t&&this.setBitsinLocal.length<r.length)this.setBitsinLocal=r,this.setBitsinLocal.forEach((function(t,n){n<=10&&(e.isHistoryParent.children[n]?e.resetBidHistoryNode(n,Number(t)):e.newBidHistoryNode(Number(t)))}));else if(t&&t>0){this.setBitsinLocal.length>=10&&this.setBitsinLocal.shift(),this.setBitsinLocal.push(t+""),this.setBitsinLocal.forEach((function(t,n){e.isHistoryParent.children[n]?e.resetBidHistoryNode(n,Number(t)):e.newBidHistoryNode(Number(t))}));this.setBitsinLocal.join(",")}},i.newBidHistoryNode=function(e){var t=this;return new Promise((function(n,i){try{if(e<=0)return n(null);var r=l(t.isHistoryPrefab);r.getChildByName("Amount").getComponent(o).string=e.toString(),t.isHistoryParent.addChild(r),r.setSiblingIndex(0),n(r)}catch(e){console.error("newBidHistoryNode",e),i(e)}}))},i.resetBidHistoryNode=function(e,t){if(!(t<=0)){var n=this.isHistoryParent.children[e];n.getChildByName("Amount").getComponent(o).string=t.toString(),this.isHistoryParent.addChild(n),n.setSiblingIndex(0)}},i.setMessegeinBox=function(e){var t=this;d(this.errorMessege.node).to(.2,{scale:z(0,0,0)},{easing:"backIn"}).call((function(){t.errorMessege.string=e})).to(.2,{scale:z(1,1,1)},{easing:"backOut"}).start()},i.getAuctionHouseListData=function(){return new Promise(V(e().mark((function t(n,i){var r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=ie.auctionHouseResponse.data.currentAuctionHouse.id,o=Xe.AUCTION_LIST+"?limit=30&page=0&state=live&auction_house_id="+r,e.next=5,bn.request(o,rt,null);case 5:a=e.sent,ie.auctionHouseListResponse=a,n(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Failed to get auction list",e.t0),i(e.t0);case 14:case"end":return e.stop()}}),t,null,[[0,10]])}))))},i.setAvatar=function(e,t){var n=l(this.avatarPrefab);if(Bi(e,n.getChildByName("Avatar").getComponent(R)),this.avatarParent.addChild(n),n.setSiblingIndex(0),n.name=t,this.avatarNodedata.push(n),this.avatarNodedata.length>10){var i=this.avatarNodedata.length-10;this.avatarCounter.string="+"+i,this.avatarCounter.node.setPosition(315,40,0)}else this.avatarCounter.string=""},i.setUpdateAvatar=function(e,t){Bi(e,this.avatarNodedata[t].getChildByName("Avatar").getComponent(R))},n}(f)).prototype,"bidNumberLabel",[Vs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),du=ne(pu.prototype,"isHistoryPrefab",[Ks],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fu=ne(pu.prototype,"walletBalance",[Xs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gu=ne(pu.prototype,"percentageLabel",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bu=ne(pu.prototype,"bidSprite",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mu=ne(pu.prototype,"winingPage",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yu=ne(pu.prototype,"errorMessege",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vu=ne(pu.prototype,"uniqueBidsAndCounts",[eu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wu=ne(pu.prototype,"LoginScreen",[tu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_u=ne(pu.prototype,"avatarPrefab",[nu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pu=ne(pu.prototype,"avatarParent",[iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cu=ne(pu.prototype,"uniqueHistorymanager",[ru],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ku=ne(pu.prototype,"allBidHistoryManager",[ou],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nu=ne(pu.prototype,"loginPopupManager",[au],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Su=ne(pu.prototype,"comingSoonPage",[su],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bu=ne(pu.prototype,"isHistoryParent",[uu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ru=ne(pu.prototype,"avatarCounter",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cu=pu))||cu);n._RF.pop(),n._RF.push({},"16e67mvbWdAwKpiur3eXQ7F","PlayerKeyboardHandler",void 0);var Ku=i.ccclass,Xu=i.property,Zu=(Au=Ku("PlayerKeyboardHandler"),Lu=Xu(o),Tu=Xu(a),Iu=Xu(u),Mu=Xu(Vu),Du=Xu(Ou),Au((Hu=ne((Uu=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"selectedDataLabel",Hu,Q(t)),te(t,"ismsgParent",Fu,Q(t)),te(t,"ismsgPrefab",qu,Q(t)),te(t,"socketEventHandler",ju,Q(t)),te(t,"loginPopupManager",Wu,Q(t)),t.selectedNumber="",t.selectedCashOutAmount=0,t.cashoutArray=[],t.minBidNumber=1,t.maxBidNumber=100,t.setMsg="",t}Z(t,e);var n=t.prototype;return n.init=function(){var e,t,n,i;this.minBidNumber=null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.min_bid_price,this.maxBidNumber=null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])?void 0:i.max_bid_price,this.selectedNumber="",this.setMsg="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice),""==this.selectedNumber?this.selectedDataLabel.string=this.setMsg:this.selectedDataLabel.string=this.selectedNumber.toString(),this.selectedCashOutAmount=0},n.selectAuctionLabel=function(e){var t,n,i,r;this.minBidNumber=null==(t=ie.auctionHouseListResponse)||null==(n=t.data[ue.auctionIndex])?void 0:n.min_bid_price,this.maxBidNumber=null==(i=ie.auctionHouseListResponse)||null==(r=i.data[ue.auctionIndex])?void 0:r.max_bid_price,this.selectedNumber="",this.setMsg="Enter between "+(this.minBidNumber+ue.is_MinPrice)+" - "+(this.maxBidNumber-ue.is_MinPrice),this.setMsg&&(this.selectedDataLabel.string=this.setMsg),this.selectedDataLabel=e},n.onKeyClick=function(e,t){if("x"===t)this.selectedNumber.length>0&&(this.selectedNumber=this.selectedNumber.substring(0,this.selectedNumber.length-1),this.setSelectedDataLabel(this.selectedNumber));else{var n=this.selectedNumber+t;if((n.includes(".")&&1==n.length||n.includes("0")&&1==n.length)&&this.minBidNumber>=1){return void this.newerromessege("Cannot add first digits is point and 0")}if(this.selectedNumber.includes(".")&&this.selectedNumber.split(".")[1].length>=ue.is_Decimal_Count&&"."!==t){var i="Cannot add more than "+ue.is_Decimal_Count+" digits after the decimal point";return void this.newerromessege(i)}if("."===t&&this.selectedNumber.includes(".")){this.newerromessege("Selected Number already contains a decimal point")}else if(parseFloat(n)>=this.maxBidNumber){var r="Maximum Selected Number is "+(this.maxBidNumber-ue.is_MinPrice)+".";this.newerromessege(r)}else this.selectedNumber=this.selectedNumber+t;this.setSelectedDataLabel(this.selectedNumber)}},n.onDone=function(){if(ue.isLogin){if(this.selectedCashOutAmount<=this.minBidNumber){var e="Selected Number must be greater than or equal to "+(this.minBidNumber+ue.is_MinPrice);return this.selectedNumber="",this.selectedCashOutAmount=0,void this.newerromessege(e)}this.socketEventHandler.onEnterBid(),this.selectedNumber="",this.selectedCashOutAmount=0}else this.loginPopupManager.init()},n.setSelectedDataLabel=function(e){this.selectedDataLabel.string=""==e?this.setMsg:e.toString(),this.selectedCashOutAmount=parseFloat(this.selectedDataLabel.string)},n.newerromessege=function(e){we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,e||"")},t}(f)).prototype,"selectedDataLabel",[Lu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fu=ne(Uu.prototype,"ismsgParent",[Tu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qu=ne(Uu.prototype,"ismsgPrefab",[Iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ju=ne(Uu.prototype,"socketEventHandler",[Mu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wu=ne(Uu.prototype,"loginPopupManager",[Du],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zu=Uu))||zu);n._RF.pop(),n._RF.push({},"1741deVeSxIF79baJNK1qly","BrowserBackButtonHandler",void 0);var Ju,Qu,$u,el,tl,nl,il,rl,ol,al,sl,ul,ll,cl,pl,hl,dl,fl,gl,bl,ml,yl,vl,wl,_l,Pl,Cl,kl,Nl,Sl,Bl,Rl,xl,El,Ol,Al,Ll,Tl,Il,Ml,Dl,zl,Ul,Hl,Fl,ql,jl,Wl,Gl,Yl,Vl,Kl,Xl,Zl,Jl,Ql=function(){function e(){}return e.init=function(){this.isInitialized||(this.isInitialized=!0,window.history.pushState({page:1},"",""),window.history.pushState({page:2},"",""),window.history.pushState({page:3},"",""),window.history.pushState({page:4},"",""),window.history.pushState({page:5},"",""),window.addEventListener("popstate",this.onBackPressed))},e.destroy=function(){this.isInitialized=!1,window.removeEventListener("popstate",this.onBackPressed)},e}();Ql.isInitialized=!1,Ql.onBackPressed=function(e){console.log("Back button pressed  staying in app"),we.getDispatcher().emit(oe.ERROR_MSG_POPUP,"Back button pressed"),window.history.pushState({page:2},"","")},n._RF.pop(),n._RF.push({},"bbf1eP3VeJF1a1X9xfpS6sL","GamePlay",void 0);var $l,ec,tc,nc,ic,rc,oc,ac,sc,uc,lc,cc=i.ccclass,pc=i.property,hc=(Ju=cc("GamePlay"),Qu=pc(o),$u=pc(o),el=pc(a),tl=pc(a),nl=pc(a),il=pc(a),rl=pc(o),ol=pc(Zu),al=pc(ys),sl=pc(a),ul=pc(a),ll=pc(R),cl=pc(Si),pl=pc(ei),hl=pc(a),dl=pc(o),fl=pc(o),gl=pc(o),bl=pc(a),ml=pc(a),yl=pc(a),vl=pc(a),wl=pc(m),_l=pc(m),Pl=pc(Vu),Cl=pc(Ge),Ju((Sl=ne((Nl=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"bidNumberLabel",Sl,Q(e)),te(e,"walletBalance",Bl,Q(e)),te(e,"uniqueHistory",Rl,Q(e)),te(e,"myBidsHistory",xl,Q(e)),te(e,"commingSoonPage",El,Q(e)),te(e,"winingPage",Ol,Q(e)),te(e,"rewardAmount",Al,Q(e)),te(e,"playerKeyboardHandler",Ll,Q(e)),te(e,"updateProfileKYC",Tl,Q(e)),te(e,"LoginButton",Il,Q(e)),te(e,"screenManager",Ml,Q(e)),te(e,"productImage",Dl,Q(e)),te(e,"avatarIconsManager",zl,Q(e)),te(e,"uniqueHistorymanager",Ul,Q(e)),te(e,"wallet",Hl,Q(e)),te(e,"auctionCategoryTitel",Fl,Q(e)),te(e,"playsConsumedOnBid",ql,Q(e)),te(e,"auctiontitle",jl,Q(e)),te(e,"uiHome",Wl,Q(e)),te(e,"keyBordHome",Gl,Q(e)),te(e,"Uigame",Yl,Q(e)),te(e,"keyBordGame",Vl,Q(e)),te(e,"myBidScroll",Kl,Q(e)),te(e,"uniqueBidScroll",Xl,Q(e)),te(e,"socketEventHandler",Zl,Q(e)),te(e,"allBidHistoryManager",Jl,Q(e)),e.isHistoryToggle=!1,e.currentAvatar="",e.originalHeight=void 0,e}Z(n,t);var i=n.prototype;return i.onLoad=function(){we.getDispatcher().emit(oe.IS_LOADER_ON,!1),this.originalHeight=window.innerHeight,Ql.init(),this.setupResizeHandler()},i.setupResizeHandler=function(){var e=this;window.addEventListener("resize",(function(){var t,n=window.innerHeight<.7*e.originalHeight,i=null==(t=e.screenManager)?void 0:t.getComponent(U);i&&(i.enabled=!n)}))},i.requestFullscreenIfMobile=function(){this.isTablet()||/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)&&!H.fullScreen()&&(H.requestFullScreen(),console.log("Attempting to enter full screen mode..."))},i.isTablet=function(){var e=navigator.userAgent.toLowerCase();return e.includes("ipad")||e.includes("android")&&!e.includes("mobile")||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},i.isOnHome=function(){this.uiHome.active=!0,this.keyBordHome.active=!0,this.Uigame.active=!1,this.keyBordGame.active=!1},i.isOnGame=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we.getDispatcher().emit(oe.IS_LOADER_ON,!1),this.uiHome.active=!1,this.keyBordHome.active=!1,this.Uigame.active=!0,this.keyBordGame.active=!0,this.isHistoryToggle=!0,this.onclickChangeHistory(),e.prev=7,e.next=10,this.initFromGameFlow();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Error in GamePlay initFromGameFlow:",e.t0);case 15:this.initUIComponents(),this.allBidHistoryManager.setMyBidsInit();case 17:case"end":return e.stop()}}),t,this,[[7,12]])})));return function(){return t.apply(this,arguments)}}(),i.initFromGameFlow=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadAuctionAssets();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error loading auction assets:",e.t0);case 8:if(this.setAuctionData(),this.setPublicKey(),!(null!=ie.loginDataResponse)){e.next=22;break}return e.prev=12,e.next=15,this.handleLoggedInUserFlow();case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(12),console.error("Error in handleLoggedInUserFlow:",e.t1);case 20:e.next=23;break;case 22:this.handleGuestUserFlow();case 23:return e.next=25,this.init();case 25:we.getDispatcher().emit(oe.IS_LOADER_OFF);case 26:case"end":return e.stop()}}),t,this,[[0,5],[12,17]])})));return function(){return t.apply(this,arguments)}}(),i.loadAuctionAssets=function(){var t=V(e().mark((function t(){var n,i,r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null==(n=ie.auctionHouseListResponse)||null==(i=n.data[ue.auctionIndex])||null==(r=i.products)||null==(o=r.productMedias[0])?void 0:o.medias.local_path)){e.next=4;break}return e.next=4,dc(""+ue.apiBaseURL+a,this.productImage);case 4:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.setPublicKey=function(){var e,t,n=null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.rsa_public_key;n?ue.publicKeyPem=n:console.warn("public_key not found")},i.initUIComponents=function(){this.playerKeyboardHandler.init(),this.playerKeyboardHandler.selectAuctionLabel(this.bidNumberLabel),this.socketEventHandler.selectAuctionLabel(this.bidNumberLabel);this.socketEventHandler.updateBidPercentageLabel({value:0}),it.getInstance().initsendMessege()},i.handleLoggedInUserFlow=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ie.loginDataResponse.data,this.currentAvatar=n.avatar||"assets/avatar/1.png",n.is_verified){e.next=6;break}return this.updateProfileKYC.onClick(),we.getDispatcher().emit(oe.IS_LOADER_OFF),e.abrupt("return");case 6:return ue.is_verified=!0,ue.isLogin=!0,this.LoginButton.active=!1,this.wallet.active=!0,this.updateWalletBalance(),e.next=13,this.uniqueHistorymanager.init();case 13:return e.next=15,this.avatarIconsManager.setAvatarIcon(""+ue.apiBaseURL+this.currentAvatar);case 15:(i=localStorage.getItem("ReceivedAuctionWinner"))&&(ie.auctionWinner=JSON.parse(i),this.winingPage.getComponent(io).init(),this.winingPage.active=!0,this.commingSoonPage.active=!1);case 17:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.handleGuestUserFlow=function(){ue.isLogin=!1,this.LoginButton.active=!0,this.wallet.active=!1},i.init=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==((null==(n=(a=ie).auctionHouseListResponse)?void 0:n.data)||[]).length){e.next=8;break}return this.commingSoonPage.active=!0,we.getDispatcher().emit(oe.IS_LOADER_OFF),console.log("CommingSoonPage"),e.abrupt("return");case 8:this.commingSoonPage.active=!1,null!=(s=null==(i=a.loginDataResponse)?void 0:i.data)&&s.id&&(it.getInstance().sendMessage("player:wallet:balance",s.id),this.LoginButton.active=!1,this.wallet.active=!0),u=null==(r=a.playerBalancesResponse)||null==(o=r.data)?void 0:o.play_balance,this.walletBalance.string=void 0!==u?u.toString():"0",e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(0),console.error("GamePlay init error:",e.t0),e.t0;case 19:case"end":return e.stop()}}),t,this,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),i.updateWalletBalance=function(){var e,t,n=null==(e=ie.playerBalancesResponse)||null==(t=e.data)?void 0:t.play_balance;null!=n&&(this.walletBalance.string=n.toString())},i.onclickChangeHistory=function(){Ke.inst.play("clickButtonsound"),this.isHistoryToggle=!this.isHistoryToggle,this.uniqueHistory.active=this.isHistoryToggle,this.myBidsHistory.active=!this.isHistoryToggle,this.isHistoryToggle?this.uniqueBidScroll.scrollToTop(.1):this.myBidScroll.scrollToTop(.1)},i.setAuctionData=function(){var e,t,n,i=null==(e=ie.auctionHouseListResponse)?void 0:e.data[ue.auctionIndex];i&&(this.auctionCategoryTitel.string=i.auctionCategory.title,this.playsConsumedOnBid.string=i.plays_consumed_on_bid+"X",this.auctiontitle.string=i.title,this.rewardAmount.string=(null==(t=i.products)||null==(n=t.price)?void 0:n.toString())||"")},n}(f)).prototype,"bidNumberLabel",[Qu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bl=ne(Nl.prototype,"walletBalance",[$u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rl=ne(Nl.prototype,"uniqueHistory",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xl=ne(Nl.prototype,"myBidsHistory",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),El=ne(Nl.prototype,"commingSoonPage",[nl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ol=ne(Nl.prototype,"winingPage",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Al=ne(Nl.prototype,"rewardAmount",[rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ll=ne(Nl.prototype,"playerKeyboardHandler",[ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tl=ne(Nl.prototype,"updateProfileKYC",[al],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Il=ne(Nl.prototype,"LoginButton",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ml=ne(Nl.prototype,"screenManager",[ul],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dl=ne(Nl.prototype,"productImage",[ll],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zl=ne(Nl.prototype,"avatarIconsManager",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ul=ne(Nl.prototype,"uniqueHistorymanager",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hl=ne(Nl.prototype,"wallet",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fl=ne(Nl.prototype,"auctionCategoryTitel",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ql=ne(Nl.prototype,"playsConsumedOnBid",[fl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jl=ne(Nl.prototype,"auctiontitle",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wl=ne(Nl.prototype,"uiHome",[bl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gl=ne(Nl.prototype,"keyBordHome",[ml],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yl=ne(Nl.prototype,"Uigame",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vl=ne(Nl.prototype,"keyBordGame",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kl=ne(Nl.prototype,"myBidScroll",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xl=ne(Nl.prototype,"uniqueBidScroll",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zl=ne(Nl.prototype,"socketEventHandler",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jl=ne(Nl.prototype,"allBidHistoryManager",[Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kl=Nl))||kl);function dc(e,t){return new Promise((function(n){O.loadRemote(e,{ext:".png",xhrResponseType:"blob"},(function(e,i){if(e||!(i instanceof A))return console.warn("Failed to load remote image:",e),n();try{var r=new L;r.image=i;var o=new B;o.texture=r,null!=t&&t.isValid?t.spriteFrame=o:console.warn("Sprite is invalid or null")}catch(e){console.error("RemoteAvatar error:",e)}n()}))}))}n._RF.pop(),n._RF.push({},"87e2dYQUD9MkqhnXN5OiXZz","DetailsPanelManager",void 0);var fc,gc,bc,mc,yc,vc,wc,_c,Pc,Cc,kc,Nc,Sc,Bc,Rc,xc,Ec,Oc,Ac,Lc=i.ccclass,Tc=i.property,Ic=($l=Lc("DetailsPanelManager"),ec=Tc(a),tc=Tc(a),nc=Tc(D),ic=Tc(m),$l((ac=ne((oc=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"mainPanel",ac,Q(t)),te(t,"bgNode",sc,Q(t)),te(t,"richText",uc,Q(t)),te(t,"bidScroll",lc,Q(t)),t.isAnimating=!1,t.isOpen=!1,t}Z(t,e);var n=t.prototype;return n.init=function(){var e,t;if(!this.isAnimating&&!this.isOpen){this.isOpen=!0;var n=Mc((null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.terms_and_conditions)||"No Terms And Conditions");this.richText.string=n,this.mainPanel.active=!1,this.bgNode.active=!1;var i=this.bgNode.getComponent(h);i&&(i.opacity=0),this.inPopUp()}},n.inPopUp=function(){var e=this;if(this.bgNode.active=!0,!this.isAnimating&&this.mainPanel&&this.bgNode&&this.bidScroll){this.isAnimating=!0,this.mainPanel.active=!0,this.bidScroll.scrollToTop(.1);var t=this.bgNode.getComponent(h);t&&(t.opacity=0,d(t).to(.3,{opacity:180}).start()),d(this.mainPanel).to(.3,{position:new p(0,0,0)}).call((function(){e.isAnimating=!1})).start()}},n.out=function(){var e=this;if(this.mainPanel&&this.bgNode){var t=this.bgNode.getComponent(h);t&&d(t).to(.3,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.mainPanel).to(.3,{position:new p(0,-2e3,0)}).call((function(){e.mainPanel.active=!1,e.isAnimating=!1,e.isOpen=!1})).start()}},t}(f)).prototype,"mainPanel",[ec],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sc=ne(oc.prototype,"bgNode",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),uc=ne(oc.prototype,"richText",[nc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lc=ne(oc.prototype,"bidScroll",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rc=oc))||rc);function Mc(e){return e.replace(/<br\s*\/?>/gi,"\n").trim()}n._RF.pop(),n._RF.push({},"cee92rwc91Lhaj+ehnZx3MX","AuctionListManager",void 0);var Dc=i.ccclass,zc=i.property,Uc=(fc=Dc("AuctionListManager"),gc=zc(u),bc=zc(a),mc=zc(Zu),yc=zc(Vu),vc=zc(Ic),wc=zc(hc),_c=zc(o),Pc=zc(a),fc((Nc=ne((kc=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"AuctionManager",Nc,Q(e)),te(e,"AuctionManagerParent",Sc,Q(e)),te(e,"playerKeyboardHandler",Bc,Q(e)),te(e,"socketEventHandler",Rc,Q(e)),te(e,"detailsPanel",xc,Q(e)),te(e,"gameManager",Ec,Q(e)),te(e,"bidPriceLabel",Oc,Q(e)),te(e,"comingSoonPage",Ac,Q(e)),e.AuctionManagerNodes=[],e.saveAuctionId=[],e}Z(n,t);var i=n.prototype;return i.start=function(){var e=we.getDispatcher();e.on("onAuctionState:new:auction",this.AddNewAuction,this),e.on(oe.ON_AUCTION_COMPLETE,this.removeAuction,this)},i.initFromGameFlow=function(){var t=V(e().mark((function t(){var n,i,r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{for(i=null==(n=ie.auctionHouseListResponse)?void 0:n.data,r=0;r<i.length;r++)o=i[r],a=l(this.AuctionManager),this.AuctionManagerParent.addChild(a),a.getComponent(Ln).init(o,r,this.playerKeyboardHandler,this.socketEventHandler,this.gameManager,this.bidPriceLabel),this.AuctionManagerNodes.unshift(a),this.saveAuctionId.push(o.id)}catch(e){console.error("Error in AuctionListManager:",e)}case 1:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.AddNewAuction=function(){var t=V(e().mark((function t(n){var i,r,o,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,console.log("getAuctionHouseListData",n),r=null==(i=ie.auctionHouseListResponse)?void 0:i.data,o=0;case 4:if(!(o<r.length)){e.next=13;break}if(a=r[o],console.log("AuctionListManager",a),!this.saveAuctionId.includes(a.id)){e.next=9;break}return e.abrupt("continue",10);case 9:n==a.id&&(s=l(this.AuctionManager),this.AuctionManagerParent.addChild(s),s.getComponent(Ln).init(a,o,this.playerKeyboardHandler,this.socketEventHandler,this.gameManager,this.bidPriceLabel),this.AuctionManagerNodes.unshift(s),this.saveAuctionId.push(a.id));case 10:o++,e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error in AuctionListManager:",e.t0);case 18:case"end":return e.stop()}}),t,this,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),i.removeAuction=function(e){var t=this;if(0!==this.AuctionManagerNodes.length){var n=!1;this.AuctionManagerNodes.forEach((function(i,r){var o=i.getComponent(Ln);o.getAuctionid()===e?(i.destroy(),t.AuctionManagerNodes.splice(r,1)):n||(n=!0,o.onSelect())})),0===this.AuctionManagerNodes.length&&!1===n?(this.comingSoonPage.active=!0,ie.auctionHouseListResponse=null):this.AuctionManagerNodes[0].getComponent(Ln).onSelect()}},n}(f)).prototype,"AuctionManager",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sc=ne(kc.prototype,"AuctionManagerParent",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bc=ne(kc.prototype,"playerKeyboardHandler",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rc=ne(kc.prototype,"socketEventHandler",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xc=ne(kc.prototype,"detailsPanel",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ec=ne(kc.prototype,"gameManager",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oc=ne(kc.prototype,"bidPriceLabel",[_c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ac=ne(kc.prototype,"comingSoonPage",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cc=kc))||Cc);n._RF.pop(),n._RF.push({},"881a1wzPY5Dz708zAZZptDC","BuyPlaysManager",void 0);var Hc=function(){function t(){}return t.generateBuyPlaysLink=function(){var t=V(e().mark((function t(n){var i,r,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(" Sending buy plays request with payload:",n),e.prev=1,i=ge(),e.next=5,fetch(ue.apiBaseURL+"v1/transaction/buy-plays",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:if(o=e.sent,r.ok&&o.success){e.next=11;break}throw new Error(o.message||"Server error");case 11:o.data&&o.data.payment_url?(console.log(" Redirecting to payment URL:",o.data.payment_url),console.log("result.data.payment_url",o.data.payment_url),window.location.href=o.data.payment_url):(console.error(" Payment URL not found in response:",o),alert("Payment failed to initiate. Please try again.")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(" BuyPlaysManager Error:",e.t0),alert("Unable to process payment. Please check your internet connection or try again later.");case 18:case"end":return e.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),t.createOrderAndRedirect=function(){var t=V(e().mark((function t(n,i){var r,o,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=ge(),e.next=4,fetch("https://your-backend.com/api/create-paypal-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({player_id:n,amount:i})});case 4:return a=e.sent,e.next=7,a.json();case 7:(s=e.sent).success&&null!=(r=s.data)&&r.payment_url?(console.log("Redirecting to PayPal:",s.data.payment_url),window.location.href=s.data.payment_url):(console.error("Failed to get PayPal URL:",s.message||"Unknown error"),alert("Payment initiation failed. Please try again.")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error creating PayPal order:",e.t0),alert("Something went wrong. Please try again later.");case 15:case"end":return e.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}(),t}();n._RF.pop(),n._RF.push({},"48e2f9Z2kxHNKuxoJ7gIC4u","PayPalButtonManager",void 0);var Fc,qc,jc,Wc,Gc,Yc,Vc,Kc,Xc,Zc,Jc,Qc,$c,ep,tp,np,ip,rp,op,ap=function(){function t(){}return t.launch=function(e,t,n,i,r,o,a){var s=this;this.BASE_URL=e.endsWith("/")?e:e+"/",this.playerId=t,this.amount=n,this.plays=i,this.auctionHouseId=r,this.onSuccessCallback=o,this.onErrorCallback=a,this.ensureContainer(),this.loadPayPalScript((function(){return s.initButtons()}))},t.ensureContainer=function(){var e=document.getElementById("paypal-overlay");e&&e.remove(),document.body.style.overflow="hidden";var t=function(e,t){var n=document.createElement(e);return Object.assign(n.style,t),n},n=t("div",{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"9998"});n.id="paypal-overlay";var i=t("div",{backgroundColor:"white",padding:"2.5rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"400px",maxHeight:"80vh",overflowY:"auto",textAlign:"center",position:"relative",margin:"1rem"});i.id="paypal-popup";var r=t("button",{position:"absolute",top:"8px",right:"12px",border:"none",background:"transparent",fontSize:"20px",cursor:"pointer"});r.innerText="",r.onclick=function(){n.remove(),document.body.style.overflow=""},n.onclick=function(e){e.target===n&&(n.remove(),document.body.style.overflow="")};var o=document.createElement("div");o.id="paypal-button-container",i.append(r,o),n.appendChild(i),document.body.appendChild(n)},t.loadPayPalScript=function(e){var t=this;if(window.paypal)e();else{var n=document.querySelector('script[src*="paypal.com/sdk/js"]');if(n)n.addEventListener("load",e);else{var i=document.createElement("script");i.src="https://www.paypal.com/sdk/js?client-id=AeDelikdFzabP8JVrW7YL-3u2lAwAfruB4xDVNdQBa7jheDHR13pX8ggTeilBW5aHr77uXcvfxT9Bdsr&currency=USD&components=buttons,funding-eligibility&enable-funding=card",i.async=!0,i.onload=function(){console.log(" PayPal SDK loaded."),e()},i.onerror=function(){console.error(" Failed to load PayPal SDK."),alert(" PayPal SDK load failed. Please check your connection or refresh."),t.onErrorCallback&&t.onErrorCallback("PayPal SDK load failed")},document.head.appendChild(i)}}},t.initButtons=function(){var t,n,i=this,r=window.paypal;if(!r)return console.error(" PayPal SDK not available."),void(this.onErrorCallback&&this.onErrorCallback("PayPal SDK not available"));r.Buttons({style:{layout:"vertical",color:"blue",shape:"pill",label:"paypal"},createOrder:(n=V(e().mark((function t(){var n,r,o,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ge(),e.prev=1,e.next=4,fetch(i.BASE_URL+"v1/transaction/buy-plays-paypal",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({amount:i.amount,plays:i.plays,auction_house_id:i.auctionHouseId,player_id:i.playerId,currency_type:"USD"})});case 4:return o=e.sent,e.next=7,o.json();case 7:if(a=e.sent,s=null==a||null==(r=a.data)?void 0:r.client_txn_id){e.next=11;break}throw new Error("Missing order ID");case 11:return e.abrupt("return",s);case 14:throw e.prev=14,e.t0=e.catch(1),console.error(" createOrder error:",e.t0),i.onErrorCallback&&i.onErrorCallback(e.t0),e.t0;case 19:case"end":return e.stop()}}),t,null,[[1,14]])}))),function(){return n.apply(this,arguments)}),onApprove:(t=V(e().mark((function t(n,r){var o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.order.capture();case 3:o=e.sent,console.log(" Payment successful:",o),i.onSuccessCallback&&i.onSuccessCallback(o),(a=document.getElementById("paypal-overlay"))&&a.remove(),document.body.style.overflow="",e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(" onApprove capture failed:",e.t0),i.onErrorCallback&&i.onErrorCallback(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,11]])}))),function(e,n){return t.apply(this,arguments)}),onError:function(e){console.error(" PayPal error:",e),alert(" Something went wrong with PayPal. Please try again."),i.onErrorCallback&&i.onErrorCallback(e)}}).render("#paypal-button-container")},t}();ap.BASE_URL="",ap.playerId="",ap.plays=0,ap.amount=0,ap.auctionHouseId="",ap.onSuccessCallback=void 0,ap.onErrorCallback=void 0,n._RF.pop(),n._RF.push({},"6e6dfGsrMxBhqhmwojL8yH7","BuyXPManager",void 0);var sp,up,lp,cp,pp,hp,dp,fp,gp,bp=i.ccclass,mp=i.property,yp=(Fc=bp("BuyXPManager"),qc=mp(a),jc=mp(a),Wc=mp(I),Gc=mp(o),Yc=mp(S),Vc=mp(o),Kc=mp(o),Xc=mp(u),Fc((Qc=ne((Jc=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"bgNode",Qc,Q(t)),te(t,"uiNode",$c,Q(t)),te(t,"inputBox",ep,Q(t)),te(t,"infoLabel",tp,Q(t)),te(t,"buyButton",np,Q(t)),te(t,"getWayBy",ip,Q(t)),te(t,"xpTOusd",rp,Q(t)),te(t,"customPopUp",op,Q(t)),t.isButtonLocked=!1,t.convertPlays=0,t.playsString="",t}Z(t,e);var n=t.prototype;return n.start=function(){var e=this;this.bgNode.getComponent(h).opacity=0,this.uiNode.active=!1,this.inputBox.node.on("text-changed",(function(){return e.onTextChanged()}),this),this.xpTOusd.string=""},n.onTextChanged=function(){var e=Number(this.inputBox.string);if(!isNaN(e)&&e>0&&e%1==0)console.log("Valid input"),this.playsString=e.toString(),this.infoLabel.string=e.toString(),this.isChackPaymentMethod(null,this.getWayBy.string);else{var t=$r.instance.t("amount_to_be_paid");this.infoLabel.string=t,this.isChackPaymentMethod(null,this.getWayBy.string),console.log("Invalid input")}},n.isChackPaymentMethod=function(e,t){var n=t;if("INR UPI (India)"===n)this.infoLabel.string=this.inputBox.string;else if("Credit Card (Paypal)"===n){var i=Number(this.inputBox.string)/100;if(isNaN(i)||i<=0){var r=$r.instance.t("amount_to_be_paid");this.infoLabel.string=r}else this.infoLabel.string=i+""}},n.showBuyXPPanel=function(){this.uiNode.active=!0,this.bgNode.active=!0,this.inputBox.string="",this.getWayBy.string="Select",this.playsString="";var e=$r.instance.t("amount_to_be_paid");this.infoLabel.string=e,d(this.bgNode.getComponent(h)).to(.2,{opacity:255}).start(),d(this.uiNode).to(.2,{position:new p(0,0,0)}).call((function(){})).start(),this.buyButton.interactable=!0},n.hideBuyXPPanel=function(){var e=this;d(this.bgNode.getComponent(h)).to(.2,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.uiNode).to(.2,{position:new p(0,-1500,0)}).call((function(){e.uiNode.active=!1})).start()},n.onBuyButtonClick=function(){var e=this;if(!this.isButtonLocked){this.isButtonLocked=!0;var t=this.inputBox.string;console.log("Buying XP with amount:",t),this.scheduleOnce((function(){e.isButtonLocked=!1}),2)}},n.getPayment=function(){var e=this;if(this.inputBox.string.length<1){we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"Please enter a valid amount greater than 0.")}else{this.buyButton.interactable=!1;var t=ie.loginDataResponse.data.id,n=ie.auctionHouseResponse.data.currentAuctionHouse.id,i=+Number(this.inputBox.string),r=+Number(this.infoLabel.string);if(isNaN(i)||i<=0){return we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"Please enter a valid amount greater than 0."),void(this.buyButton.interactable=!0)}if("INR UPI (India)"===this.getWayBy.string)Hc.generateBuyPlaysLink({player_id:t,auction_house_id:n,amount:i,plays:r,currency_type:"INR"});else if("Credit Card (Paypal)"===this.getWayBy.string){var o=i;ap.launch(ue.apiBaseURL,t,r,o,n,(function(t){e.hideBuyXPPanel(),we.getDispatcher().emit(oe.IS_LOADER_ON,!0,o),e.showPopup("Payment Success!","You've successfully completed your payment. Enjoy your new XP!"),console.log(" Payment Success!",t)}),(function(e){console.log(" Payment Failed",e)}))}else{console.error("Unsupported payment method:",this.getWayBy.string);we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"Please select a payment method.")}this.scheduleOnce((function(){e.buyButton.interactable=!0}),1)}},n.showPopup=function(e,t){var n=this,i=l(this.customPopUp);i.setPosition(0,0),i.setScale(p.ZERO),this.node.addChild(i);i.getComponent(ir).setCallback((function(){return n.setZoomOut(i)}),null),i.getComponent(ir).Msg.string=t,i.getComponent(ir).title.string=e,this.setZoom(i)},n.setZoom=function(e){d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},n.setZoomOut=function(e){d(e).to(.2,{scale:p.ZERO}).destroySelf().start()},t}(f)).prototype,"bgNode",[qc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$c=ne(Jc.prototype,"uiNode",[jc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ep=ne(Jc.prototype,"inputBox",[Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tp=ne(Jc.prototype,"infoLabel",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),np=ne(Jc.prototype,"buyButton",[Yc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ip=ne(Jc.prototype,"getWayBy",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rp=ne(Jc.prototype,"xpTOusd",[Kc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),op=ne(Jc.prototype,"customPopUp",[Xc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zc=Jc))||Zc);n._RF.pop(),n._RF.push({},"5720davMkhFyrv0q6JS+DQg","msgBoxItem",void 0);var vp,wp,_p,Pp,Cp,kp=i.ccclass,Np=i.property,Sp=(sp=kp("msgBoxItem"),up=Np(a),lp=Np(a),cp=Np(a),sp((dp=ne((hp=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"arrowNode",dp,Q(t)),te(t,"poniNode",fp,Q(t)),te(t,"msgNode",gp,Q(t)),t.contantSizeY=0,t.potraitSizeY=130,t.landscapeSizeY=166,t.isActive=!0,t}Z(t,e);var n=t.prototype;return n.setZoom=function(e){d(e).to(.5,{scale:new p(1.02,1.02,0)},{easing:"backIn"}).to(.5,{scale:new p(1,1,0)},{easing:"backIn"}).start()},n.setDefaultView=function(){this.contantSizeY=0,this.arrowNode.getComponent(c).setContentSize(new F(110,this.contantSizeY)),this.msgNode.getChildByName("Label").getComponent(o).string="",this.poniNode.active=!1,this.msgNode.active=!1},n.setinitView=function(e){this.setDefaultView(),this.isActive=!0,this.msgNode.getChildByName("Label").getComponent(o).string=e,this.schedule(this.activeAnimation,1e-6)},n.activeAnimation=function(){this.isActive&&(this.contantSizeY+=15,this.potraitAnimation())},n.potraitAnimation=function(){this.contantSizeY>=this.potraitSizeY?(this.poniNode.active=!0,this.msgNode.active=!0,this.unschedule(this.activeAnimation),this.setZoom(this.msgNode.getChildByName("Label"))):this.arrowNode.getComponent(c).setContentSize(new F(110,this.contantSizeY))},n.landscapeAnimation=function(){this.contantSizeY>=this.landscapeSizeY?(this.poniNode.active=!0,this.unschedule(this.activeAnimation),this.setZoom(this.msgNode.getChildByName("Label"))):this.arrowNode.getComponent(c).setContentSize(new F(110,this.contantSizeY))},t}(f)).prototype,"arrowNode",[up],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fp=ne(hp.prototype,"poniNode",[lp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gp=ne(hp.prototype,"msgNode",[cp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pp=hp))||pp);n._RF.pop(),n._RF.push({},"3e529d6Op5J+4GI4Mai0R/B","msgBox",void 0);var Bp,Rp=i.ccclass,xp=i.property;!function(e){e[e.bottomRight=0]="bottomRight",e[e.bottomLeft=1]="bottomLeft",e[e.topRight=2]="topRight",e[e.topLeft=3]="topLeft",e[e.topMiddle=4]="topMiddle",e[e.bottomMiddle=5]="bottomMiddle"}(Bp||(Bp={}));var Ep,Op,Ap,Lp,Tp,Ip,Mp,Dp,zp,Up,Hp,Fp,qp,jp=(vp=Rp("msgBox"),wp=xp(a),vp((Cp=ne((Pp=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"msgItem",Cp,Q(t)),t}Z(t,e);var n=t.prototype;return n.start=function(){},n.setDefault=function(){for(var e=0;e<this.msgItem.length;e++)this.msgItem[e].active=!1,this.msgItem[e].getComponent(Sp).setDefaultView()},n.setinitView=function(e,t,n){this.setDefault();var i=e.y;"bottomRight"===n?(this.msgItem[Bp.bottomRight].active=!0,this.msgItem[Bp.bottomRight].getComponent(Sp).setinitView(t),i=e.y,this.node.setWorldPosition(new p(e.x,i,0))):"bottomLeft"===n?(this.msgItem[Bp.bottomLeft].active=!0,i=e.y,this.node.setWorldPosition(new p(e.x,i,0)),this.msgItem[Bp.bottomLeft].getComponent(Sp).setinitView(t)):"topLeft"===n?(this.msgItem[Bp.topRight].active=!0,this.msgItem[Bp.topRight].getComponent(Sp).setinitView(t),i=e.y,this.node.setWorldPosition(new p(e.x,i,0))):"topRight"===n?(this.msgItem[Bp.topLeft].active=!0,this.msgItem[Bp.topLeft].getComponent(Sp).setinitView(t),i=e.y,this.node.setWorldPosition(new p(e.x,i,0))):"topMiddle"===n?(this.msgItem[Bp.topMiddle].active=!0,this.msgItem[Bp.topMiddle].getComponent(Sp).setinitView(t),i=e.y+45,this.node.setWorldPosition(new p(e.x,i,0))):"bottomMiddle"===n&&(this.msgItem[Bp.bottomMiddle].active=!0,this.msgItem[Bp.bottomMiddle].getComponent(Sp).setinitView(t),i=e.y-45,this.node.setWorldPosition(new p(e.x,i,0)))},t}(f)).prototype,"msgItem",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_p=Pp))||_p);n._RF.pop(),n._RF.push({},"00738mbj0NJh548Knwft51/","TutorialItem",void 0);var Wp,Gp,Yp,Vp,Kp,Xp,Zp,Jp,Qp,$p,eh,th,nh,ih,rh,oh,ah,sh,uh,lh,ch,ph,hh,dh=i.ccclass,fh=i.property,gh=q({bottomRight:0,bottomLeft:1,topLeft:2,topRight:3,topMiddle:4,bottomMiddle:5}),bh=(Ep=dh("TutorialItem"),Op=fh(String),Ap=fh({type:j,tooltip:"ItemSize",visible:!0}),Lp=fh({type:Number,tooltip:"animation time",visible:!0}),Tp=fh(Boolean),Ip=fh({type:gh,tooltip:"Message Show Side",visible:!0}),Ep((zp=ne((Dp=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"key",zp,Q(t)),te(t,"size",Up,Q(t)),te(t,"time",Hp,Q(t)),te(t,"isMaskRect",Fp,Q(t)),te(t,"tag",qp,Q(t)),t}return Z(t,e),t}(f)).prototype,"key",[Op],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Up=ne(Dp.prototype,"size",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new j(0,0)}}),Hp=ne(Dp.prototype,"time",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Fp=ne(Dp.prototype,"isMaskRect",[Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qp=ne(Dp.prototype,"tag",[Ip],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return gh.bottomRight}}),Mp=Dp))||Mp);n._RF.pop(),n._RF.push({},"d1f12oYaWlHY6EKI4uNVVjb","SlotBaseTutorial",void 0);var mh,yh=i.ccclass,vh=i.property;!function(e){e[e.circle=0]="circle",e[e.rectangle=1]="rectangle"}(mh||(mh={}));var wh,_h,Ph,Ch,kh,Nh,Sh,Bh,Rh,xh,Eh,Oh,Ah,Lh,Th,Ih,Mh,Dh,zh,Uh,Hh,Fh,qh,jh,Wh,Gh=(Wp=yh("SlotBaseTutorial"),Gp=vh(a),Yp=vh(o),Vp=vh(a),Kp=vh(a),Xp=vh(a),Zp=vh(a),Jp=vh(a),Qp=vh(a),$p=vh(a),eh=vh(a),Wp((ih=ne((nh=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"maskNode",ih,Q(t)),te(t,"BtnLbl",rh,Q(t)),te(t,"ndMsgBox",oh,Q(t)),te(t,"skipBtn",ah,Q(t)),te(t,"nextBtn",sh,Q(t)),te(t,"replayNode",uh,Q(t)),te(t,"skipBtnNode",lh,Q(t)),te(t,"NextBtnNode",ch,Q(t)),te(t,"skipBtnNodeTop",ph,Q(t)),te(t,"NextBtnNodeTop",hh,Q(t)),t.index=0,t.msgNode=null,t.isMoving=!1,t.msgPopUp=null,t.currentMaskType=mh.circle,t.isFirstTime=!0,t.positionArray=["bottomRight","bottomLeft","topLeft","topRight","topMiddle","bottomMiddle"],t.tutorialStep=[{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L-1",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R-1",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L-1",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L-1",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R-1",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"R",text:"",size:new j(0,0),isMaskRect:!1},{pos:new p(0,0,0),time:.5,tag:"L",text:"",size:new j(0,0),isMaskRect:!1}],t.tutorialData={AuctionPin:"Tap here to pin this auction for quick access later.",Auction:"Tap here to unpin this auction from your favorites.",KeyBord:"Use the keyboard to type in your bid or search queries.",Balance:"Your current wallet balance is shown here.",Login:"Use this button to log in and access your account.",Menu:"Tap here to open the main menu and access all options.",Home:"This button brings you back to the home screen.",MyBids:"View all the bids you've placed in different auctions.",Redeem:"Use this option to redeem your rewards or XP.","How to":"Tap here to learn how the game or auction system works.",LogOut:"Click here to log out of your account safely.",SoundNoOff:"Toggle the game sounds on or off using this button.",CloseButton:"Close the current panel or window using this button.",MyProfile:"View and edit your profile and personal details here.",BuyXP:"Use this option to purchase XP for additional features.",Transactions:"View your past transactions and history here.",TransferXP:"Transfer XP to other users from this section.",MyAuction:"See the auctions you have created or are participating in."},t}Z(t,e);var n=t.prototype;return n.start=function(){},n.init=function(){this.index=0,this.BtnLbl.string="Next",this.gettingTutorialData(),this.node.active=!0},n.gettingTutorialData=function(e){void 0===e&&(e=!1);try{for(var t=0;t<this.replayNode.length;t++){this.replayNode[t].active=!1;var n=this.replayNode[t].getComponent(bh);this.tutorialStep[t].pos=this.replayNode[t].getWorldPosition(),this.tutorialStep[t].text=this.tutorialData[""+n.key],this.tutorialStep[t].size=W(0,0),this.tutorialStep[t].isMaskRect=n.isMaskRect,this.tutorialStep[t].tag=this.positionArray[n.tag],this.tutorialStep[t].time=n.time?n.time:.5,console.log("this.tutorialStep",this.tutorialStep)}}catch(e){console.log("Tutorial error: ",e)}d(this.maskNode[this.currentMaskType]).to(.8,{scale:new p(1.2,1.2,0)},{easing:"backIn"}).to(.8,{scale:new p(1,1,0)},{easing:"backIn"}).start(),e||this.onNextBtn(null,null)},n.onNextBtn=function(e,t,n){var i=this;void 0===n&&(n=!1),this.isFirstTime||this.gettingTutorialData(!0),this.isFirstTime=!1;try{var r=this;if(this.replayNode[r.index-1]&&(this.replayNode[r.index-1].active=!1),10==r.index&&we.getDispatcher().emit("openMenu"),(r.index<1||10==r.index)&&(this.skipBtn.setPosition(this.skipBtnNode.position),this.nextBtn.setPosition(this.NextBtnNode.position)),6!=r.index&&17!=r.index||(this.skipBtn.setPosition(this.skipBtnNodeTop.position),this.nextBtn.setPosition(this.NextBtnNodeTop.position)),"Got It"==this.BtnLbl.string)return we.getDispatcher().emit("closeMenu"),void(this.node.active=!1);this.ndMsgBox.getComponent(jp).setDefault(),3==this.index||4==this.index?this.tutorialStep[this.index].pos=this.replayNode[this.index].getWorldPosition().add(new p(0,-130,0)):this.tutorialStep[this.index].pos=this.replayNode[this.index].getWorldPosition(),this.tutorialStep[r.index].isMaskRect?(this.currentMaskType=mh.rectangle,this.maskNode[mh.circle].active=!1,this.maskNode[mh.circle].worldPosition=this.tutorialStep[this.index].pos):(this.maskNode[mh.rectangle].active=!1,this.maskNode[mh.rectangle].worldPosition=this.tutorialStep[this.index].pos,this.currentMaskType=mh.circle),this.maskNode[this.currentMaskType].active=!0,this.replayNode[r.index].active=!0,d(this.maskNode[this.currentMaskType]).to(.8,{scale:new p(1.2,1.2,0)},{easing:"backIn"}).to(.8,{scale:new p(1,1,0)},{easing:"backIn"}).start();var o=this.tutorialStep[this.index].size.x>0?this.tutorialStep[this.index].size:new j(0,0);if(r.maskNode[this.currentMaskType].getComponent(c).setContentSize(o.x,o.y),this.nextButtonInteractable(!1),this.isMoving)return;this.isMoving=!0;var a=this.tutorialStep[this.index];this.replayNode.length-1==this.index&&(this.BtnLbl.string="Got It"),d(this.maskNode[this.currentMaskType]).to(parseFloat(a.time.toString()),{worldPosition:a.pos},{easing:"backOut"}).call((function(){r.maskNode[i.currentMaskType].getComponent(c).setContentSize(o.x,o.y)})).call((function(){r.setDetailData(a)})).start(),n||this.index++}catch(e){console.log("Tutorial error: ",e)}},n.setDetailData=function(e){var t=this;this.ndMsgBox.getComponent(jp).setinitView(e.pos,e.text,e.tag),this.isMoving=!1,this.scheduleOnce((function(){t.nextButtonInteractable(!0)}),1)},n.nextButtonInteractable=function(e){this.nextBtn.getComponent(S).interactable=e},n.onSkipClick=function(e,t){we.getDispatcher().emit("closeMenu"),this.node.active=!1},t}(f)).prototype,"maskNode",[Gp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rh=ne(nh.prototype,"BtnLbl",[Yp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oh=ne(nh.prototype,"ndMsgBox",[Vp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ah=ne(nh.prototype,"skipBtn",[Kp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sh=ne(nh.prototype,"nextBtn",[Xp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),uh=ne(nh.prototype,"replayNode",[Zp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),lh=ne(nh.prototype,"skipBtnNode",[Jp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ch=ne(nh.prototype,"NextBtnNode",[Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ph=ne(nh.prototype,"skipBtnNodeTop",[$p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hh=ne(nh.prototype,"NextBtnNodeTop",[eh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),th=nh))||th);n._RF.pop(),n._RF.push({},"8928bIpLdVBmZ2K6KiNywHH","GameFlowManager",void 0);var Yh,Vh,Kh,Xh,Zh,Jh,Qh,$h,ed,td,nd,id,rd,od,ad,sd,ud,ld,cd,pd,hd,dd,fd,gd,bd,md,yd,vd=i.ccclass,wd=i.property;wh=vd("GameFlowManager"),_h=wd(R),Ph=wd(hc),Ch=wd(a),kh=wd(u),Nh=wd(Uc),Sh=wd(Vu),Bh=wd(u),Rh=wd(a),xh=wd(Ou),Eh=wd(Gh),Oh=wd(a),wh((Th=ne((Lh=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"gameLogo",Th,Q(e)),te(e,"gamePlay",Ih,Q(e)),te(e,"infoPerant",Mh,Q(e)),te(e,"infoPrefab",Dh,Q(e)),te(e,"auctionListManager",zh,Q(e)),te(e,"socketEventHandler",Uh,Q(e)),te(e,"customPopUp",Hh,Q(e)),te(e,"customPopUpParent",Fh,Q(e)),te(e,"loginPopupManager",qh,Q(e)),te(e,"slotBaseTutorial",jh,Q(e)),te(e,"showInfoButton",Wh,Q(e)),e.url_token="",e.url_auctionId="",e.url_playerId="",e.isLoggedInUser=!1,e}Z(n,t);var i=n.prototype;return i.onLoad=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r.instance.init("en");case 2:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){var t=V(e().mark((function t(){var n=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we.getDispatcher().emit(oe.IS_LOADER_ON,!1),this.slotBaseTutorial.node.active=!0,this.slotBaseTutorial.node.getComponent(U).updateAlignment(),this.slotBaseTutorial.node.active=!1,e.next=6,this.startGameFlow();case 6:window.addEventListener("online",(function(){n.customPopUpParent&&n.customPopUpParent.removeAllChildren()})),window.addEventListener("offline",(function(){return n.showPopup("Alert","Please check your network connection.",!1)}));case 8:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.startGameFlow=function(){var t=V(e().mark((function t(){var n,i,r,o=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setupAPI();case 2:return e.next=4,this.restoreLogin();case 4:return n=e.sent,e.prev=5,e.next=8,this.getAuctionHouse();case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(5),console.error("Error fetching auction house:",e.t0),this.showPopup("Error","Failed to fetch auction house data."),e.abrupt("return");case 15:return e.prev=15,e.next=18,this.getCountryDetails();case 18:we.getDispatcher().emit(oe.COUNTRY_DETAILS_FETCHED,ie.countryApiResponse),ue.countryCodeIndex=0,e.next=27;break;case 22:return e.prev=22,e.t1=e.catch(15),console.error("Error fetching auction house:",e.t1),this.showPopup("Error","Failed to fetch auction house data."),e.abrupt("return");case 27:return e.prev=27,e.next=30,this.getAuctionHouseList();case 30:e.next=37;break;case 32:return e.prev=32,e.t2=e.catch(27),console.error("Error fetching auction house list:",e.t2),this.showPopup("Error","Failed to fetch auction house list."),e.abrupt("return");case 37:return e.prev=37,e.next=40,this.loadImages();case 40:e.next=46;break;case 42:e.prev=42,e.t3=e.catch(37),console.error("Error loading images:",e.t3),this.showPopup("Error","Failed to load images.");case 46:if((i=window.parent.location.search)&&i.includes("token")&&(r=new URLSearchParams(i),this.url_token=r.get("token"),console.log("Token:",this.url_token)),console.log("GameFlowManager startGameFlow isLoggedIn:",n),!n){e.next=66;break}return e.prev=50,e.next=53,this.getWalletBalance();case 53:e.next=60;break;case 55:return e.prev=55,e.t4=e.catch(50),console.error("Error fetching wallet balance:",e.t4),this.showPopup("Error","Failed to fetch wallet balance."),e.abrupt("return");case 60:this.isLoggedInUser=!0,this.showInfoButton.active=!0,console.log("this.url_token",this.url_token),this.url_token&&bn.request(Xe.VERIFY_DELIVERY_STATUS+"?token="+this.url_token,rt,null,!0).then((function(e){if(console.log("Delivery status received:",e),o.url_auctionId=e.data.auction_id,"delivered"==e.data.delivery_status)try{we.getDispatcher().emit(rr.WIN_AUCTION_STATUS_CONFIRM,o.url_auctionId)}catch(e){localStorage.removeItem("savedQueryParams");var t=localStorage.getItem("savedBaseUrlParams");window.parent.location.href=t}else"confirmed"===e.data.delivery_status?o.showPopup("Delivery Status","Your delivery has been confirmed.",!0,!0):"declined"===e.data.delivery_status?o.showPopup("Delivery Status","Your delivery has been declined.",!0,!0):o.showPopup("Delivery Status","Delivery status is unknown.",!0,!0)})).catch((function(e){console.error("Error fetching delivery status:",e)})),e.next=67;break;case 66:this.url_token&&(console.log("else this.url_token",this.url_token),this.loginPopupManager.init(),this.isLoggedInUser=!1);case 67:return this.socketEventHandler.init(),e.prev=68,e.next=71,it.getInstance().init();case 71:e.next=76;break;case 73:e.prev=73,e.t5=e.catch(68),console.error("Error initializing socket:",e.t5);case 76:this.gamePlay.initFromGameFlow(),this.auctionListManager.initFromGameFlow();case 78:case"end":return e.stop()}}),t,this,[[5,10],[15,22],[27,32],[37,42],[50,55],[68,73]])})));return function(){return t.apply(this,arguments)}}(),i.setupAPI=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new URL(window.location.href),ue.hostname=n.host,i=n.searchParams,this.url_token=i.get("token"),ue.apiBaseURL="https://api.auctionx.dev/",ue.hostname="dinesh.auctionx.dev";case 7:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.restoreLogin=function(){var t=V(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(V(e().mark((function t(n){var i,r,o,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=localStorage.getItem("PlayerLoginObj"),r=localStorage.getItem(le.USER_ID)||Je.getCookie(le.USER_ID),o=localStorage.getItem("accessToken"),a=null,!i){e.next=9;break}ie.loginDataResponse=JSON.parse(i),a=JSON.parse(i),e.next=26;break;case 9:if(!r||!o){e.next=26;break}return e.prev=10,e.next=13,bn.request(Xe.REGISTRATION+""+r,rt,null,!0);case 13:s=e.sent,ie.loginDataResponse=s,localStorage.setItem("accessToken",ie.loginDataResponse.data.accessToken),localStorage.setItem("PlayerLoginObj",JSON.stringify(s)),ve.inst.setItem(le.ACCESS_TOKEN,ie.loginDataResponse.data.accessToken),ve.inst.setItem("PlayerLoginObj",JSON.stringify(s)),ue.isLogin=!0,a=s,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),console.warn("Failed to auto-login",e.t0);case 26:n(!!a);case 27:case"end":return e.stop()}}),t,null,[[10,23]])})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getAuctionHouse=function(){var t=V(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn.request(Xe.AUCTION_HOUSE+ue.hostname,rt);case 2:n=e.sent,ie.auctionHouseResponse=n;case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getCountryDetails=function(){var t=V(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(Xe.COUNTRY_DETAILS,rt);case 3:return n=e.sent,ie.countryApiResponse=n,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Error fetching country details:",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),i.getAuctionHouseList=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null==(n=ie.auctionHouseResponse)||null==(i=n.data)||null==(r=i.currentAuctionHouse)?void 0:r.id,a=localStorage.getItem("accessToken"),s=!!a,u=Xe.AUCTION_LIST+"?limit=30&page=0&state=live&auction_house_id="+o,e.next=6,bn.request(u,rt,null,s);case 6:l=e.sent,ie.auctionHouseListResponse=l;case 8:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getWalletBalance=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ie.loginDataResponse.data.id,e.next=3,bn.request(Xe.WALLET_BALANCE+""+n,rt,null,!0);case 3:i=e.sent,ie.playerBalancesResponse=i;case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.loadImages=function(){var t=V(e().mark((function t(){var n,i,r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null==(n=ie.auctionHouseResponse)||null==(i=n.data)||null==(r=i.currentAuctionHouse)||null==(o=r.medias)?void 0:o.local_path)||!this.gameLogo){e.next=5;break}return e.next=4,this.loadRemoteImage(""+ue.apiBaseURL+a,this.gameLogo);case 4:this.setImageSize(new F(400,130),this.gameLogo);case 5:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.loadRemoteImage=function(){var t=V(e().mark((function t(n,i){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){O.loadRemote(n,{ext:".png",xhrResponseType:"blob"},(function(t,n){if(t||!(n instanceof A))return console.warn("Failed to load image:",t),e();var r=new L;r.image=n;var o=new B;o.texture=r,i.spriteFrame=o,e()}))})));case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i.setImageSize=function(e,t){var n=t.getComponent(c),i=n.contentSize,r=e.height/i.height,o=e.width/i.width,a=Math.min(o,r);n.setContentSize(new F(i.width*a,i.height*a))},i.onLanguageClick=function(){var t=V(e().mark((function t(n,i){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r.instance.setLanguage(i);case 2:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i.createInfo=function(){ue.isLogin&&this.slotBaseTutorial.init()},i.showPopup=function(e,t,n,i){var r=this;void 0===n&&(n=!0),void 0===i&&(i=!1);var o=l(this.customPopUp);if(o.setPosition(0,0),o.setScale(p.ZERO),this.customPopUpParent.addChild(o),i){o.getComponent(ir).setCallback((function(){r.setZoomOut(o);var e=""+new URL(window.parent.location.href).origin;window.parent.location.href=e}),null)}else{o.getComponent(ir).setCallback((function(){return r.setZoomOut(o)}),null)}o.getComponent(ir).Msg.string=t,o.getComponent(ir).title.string=e,n||(o.getComponent(ir).btn1.node.active=!1),this.setZoom(o)},i.setZoom=function(e){d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.setZoomOut=function(e){d(e).to(.2,{scale:p.ZERO}).call((function(){return e.destroy()})).start()},n}(f)).prototype,"gameLogo",[_h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ih=ne(Lh.prototype,"gamePlay",[Ph],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mh=ne(Lh.prototype,"infoPerant",[Ch],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dh=ne(Lh.prototype,"infoPrefab",[kh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zh=ne(Lh.prototype,"auctionListManager",[Nh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Uh=ne(Lh.prototype,"socketEventHandler",[Sh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hh=ne(Lh.prototype,"customPopUp",[Bh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fh=ne(Lh.prototype,"customPopUpParent",[Rh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qh=ne(Lh.prototype,"loginPopupManager",[xh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jh=ne(Lh.prototype,"slotBaseTutorial",[Eh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wh=ne(Lh.prototype,"showInfoButton",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ah=Lh));n._RF.pop(),n._RF.push({},"53e87SC8OZCXafnuE1tZXgX","ShowProfile",void 0);var _d,Pd,Cd,kd,Nd,Sd,Bd,Rd,xd,Ed,Od,Ad,Ld,Td,Id,Md,Dd,zd,Ud,Hd,Fd,qd,jd,Wd,Gd,Yd,Vd,Kd,Xd,Zd,Jd,Qd,$d,ef=i.ccclass,tf=i.property,nf=(Yh=ef("ShowProfile"),Vh=tf(a),Kh=tf(o),Xh=tf(o),Zh=tf(o),Jh=tf(o),Qh=tf(o),$h=tf(o),ed=tf(o),td=tf(o),nd=tf(ys),id=tf(Si),rd=tf(R),Yh((sd=ne((ad=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"UiNode",sd,Q(t)),te(t,"walletAddressLabel",ud,Q(t)),te(t,"referralCodeLabel",ld,Q(t)),te(t,"playerIdLabel",cd,Q(t)),te(t,"zipcodeLabel",pd,Q(t)),te(t,"emailLabel",hd,Q(t)),te(t,"PhoneNumber",dd,Q(t)),te(t,"usernameLabel",fd,Q(t)),te(t,"walletBalanceLabel",gd,Q(t)),te(t,"updateProfileKYC",bd,Q(t)),te(t,"avatarIconsManager",md,Q(t)),te(t,"profileImage",yd,Q(t)),t.isEditProfileClicked=!1,t.isBuyMorePxClicked=!1,t}Z(t,e);var n=t.prototype;return n.start=function(){this.UiNode.active=!1;var e=we.getDispatcher();e.on(ae.CLS_AUCTION_CURRENT_PLAY,this.onAuctionCurrentPlay,this),e.on(oe.PROFILE_UPDATE,this.showProfile,this)},n.onDestroy=function(){we.getDispatcher().off(ae.CLS_AUCTION_CURRENT_PLAY,this.onAuctionCurrentPlay,this)},n.showProfile=function(){var e,t,n,i=ie.loginDataResponse.data.avatar?ie.loginDataResponse.data.avatar:"assets/avatar/1.png",r=ue.apiBaseURL+i;this.avatarIconsManager.setAvatarIcon(r,this.profileImage),this.UiNode.active=!0;var o=null==(e=ie.loginDataResponse)?void 0:e.data,a=null==(t=ie.playerBalancesResponse)||null==(n=t.data)?void 0:n.play_balance;Ye(this.usernameLabel,((o.first_name||"")+" "+(o.last_name||"")).trim()||"-"),Ye(this.walletAddressLabel,o.wallet_address||"-"),Ye(this.referralCodeLabel,o.referral_code||"-"),Ye(this.playerIdLabel,o.id||"-"),Ye(this.zipcodeLabel,o.zipcode||"-"),Ye(this.emailLabel,o.email||"-"),Ye(this.PhoneNumber,o.mobile_no||"-",15),Ye(this.walletBalanceLabel,a||"-")},n.shortenString=function(e){return""+e},n.closeProfile=function(){this.UiNode.active=!1},n.onAuctionCurrentPlay=function(e){ie.auctionCurrentPlay=e,null!=e&&e.play_balance&&(this.walletBalanceLabel.string=e.play_balance+"")},n.onEditProfile=function(){var e=this;this.isEditProfileClicked||(this.isEditProfileClicked=!0,console.log("Edit Profile clicked"),this.updateProfileKYC.onClick(),this.scheduleOnce((function(){e.isEditProfileClicked=!1}),1))},n.onBuyMorePx=function(){var e=this;this.isBuyMorePxClicked||(this.isBuyMorePxClicked=!0,console.log("Buy More PX clicked"),this.scheduleOnce((function(){e.isBuyMorePxClicked=!1}),1))},t}(f)).prototype,"UiNode",[Vh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ud=ne(ad.prototype,"walletAddressLabel",[Kh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ld=ne(ad.prototype,"referralCodeLabel",[Xh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cd=ne(ad.prototype,"playerIdLabel",[Zh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pd=ne(ad.prototype,"zipcodeLabel",[Jh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hd=ne(ad.prototype,"emailLabel",[Qh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dd=ne(ad.prototype,"PhoneNumber",[$h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fd=ne(ad.prototype,"usernameLabel",[ed],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gd=ne(ad.prototype,"walletBalanceLabel",[td],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bd=ne(ad.prototype,"updateProfileKYC",[nd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),md=ne(ad.prototype,"avatarIconsManager",[id],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yd=ne(ad.prototype,"profileImage",[rd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),od=ad))||od);n._RF.pop(),n._RF.push({},"d9528q65zdNOLNOOwr74qZW","XPHistoryManager",void 0);var rf,of,af,sf,uf,lf,cf,pf,hf,df,ff,gf,bf,mf,yf,vf,wf,_f,Pf,Cf,kf,Nf,Sf,Bf,Rf,xf,Ef,Of,Af,Lf,Tf,If,Mf,Df,zf,Uf,Hf,Ff,qf,jf,Wf,Gf,Yf,Vf=i.ccclass,Kf=i.property,Xf=(_d=Vf("XPHistoryManager"),Pd=Kf(a),Cd=Kf(u),kd=Kf(u),Nd=Kf(u),Sd=Kf(a),Bd=Kf(a),Rd=Kf(a),xd=Kf(a),Ed=Kf(a),Od=Kf(a),Ad=Kf(m),Ld=Kf(m),Td=Kf(m),Id=Kf(a),Md=Kf(a),_d((Ud=ne((zd=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"uiNode",Ud,Q(e)),te(e,"buyPrefab",Hd,Q(e)),te(e,"spendPrefab",Fd,Q(e)),te(e,"transferPrefab",qd,Q(e)),te(e,"buyParent",jd,Q(e)),te(e,"spendParent",Wd,Q(e)),te(e,"transferParent",Gd,Q(e)),te(e,"buyPanel",Yd,Q(e)),te(e,"spendPanel",Vd,Q(e)),te(e,"transferPanel",Kd,Q(e)),te(e,"buyScroll",Xd,Q(e)),te(e,"spendScroll",Zd,Q(e)),te(e,"transferScroll",Jd,Q(e)),te(e,"loadingNode",Qd,Q(e)),te(e,"noDataFound",$d,Q(e)),e.buyHistoryNodes=[],e.spendHistoryNodes=[],e.transferHistoryNodes=[],e.transactionSpendResponse=null,e.transactionBuyResponse=null,e}Z(n,t);var i=n.prototype;return i.openUI=function(){this.uiNode.active=!0,this.onBuyClicked()},i.closeUI=function(){this.loadingNode.active=!1,this.uiNode.active=!1},i.setPanelActive=function(e,t,n){this.buyPanel.active=e,this.spendPanel.active=t,this.transferPanel.active=n,this.buyScroll.scrollToTop(.1),this.spendScroll.scrollToTop(.1),this.transferScroll.scrollToTop(.1)},i.onBuyClicked=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPanelActive(!0,!1,!1),this.buyParent.children.length<1&&(this.loadingNode.active=!0),n=ie.loginDataResponse.data.id,e.prev=3,e.next=6,this.getUserBuyTransactions(n);case 6:for(i=e.sent,this.loadingNode.active=!1,i.data.length<=0?this.noDataFound.active=!0:this.noDataFound.active=!1,r=0;r<this.buyHistoryNodes.length;r++)o=i.data[r],a=this.buyHistoryNodes[this.buyHistoryNodes.length-(r+1)],this.upDateBuyNode(a,{sno:(r+1).toString(),date:o.created_at||"-",xp:o.plays||"0",remarks:o.spend_on||"-"});if(i.data.length>this.buyHistoryNodes.length)for(s=this.buyHistoryNodes.length;s<i.data.length;s++)u=i.data[s],this.newBuyNode({sno:(s+1).toString(),date:u.created_at||"-",xp:u.plays||"0",remarks:u.spend_on||"-"});e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Error fetching user buy transactions:",e.t0);case 16:case"end":return e.stop()}}),t,this,[[3,13]])})));return function(){return t.apply(this,arguments)}}(),i.onSpendClicked=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPanelActive(!1,!0,!1),this.spendParent.children.length<1&&(this.loadingNode.active=!0),e.prev=2,n=ie.loginDataResponse.data.id,e.next=6,this.getUserSpendTransactions(n);case 6:for(i=e.sent,this.loadingNode.active=!1,i.data.length<=0?this.noDataFound.active=!0:this.noDataFound.active=!1,r=0;r<this.spendHistoryNodes.length;r++)o=i.data[r],a=this.spendHistoryNodes[this.spendHistoryNodes.length-(r+1)],this.upDateSpendNode(a,{sno:(r+1).toString(),auctionHouse:o.auction_house_name||"-",auctionId:o.auction_code||"-",xp:o.plays||"0"});if(i.data.length>this.spendHistoryNodes.length)for(s=this.spendHistoryNodes.length;s<i.data.length;s++)u=i.data[s],this.newSpendNode({sno:(s+1).toString(),auctionHouse:u.auction_house_name||"-",auctionId:u.auction_code||"-",xp:u.plays||"0"});e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Error fetching user spend transactions:",e.t0);case 16:case"end":return e.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),i.onTransferClicked=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPanelActive(!1,!1,!0),this.transferParent.children.length<1&&(this.loadingNode.active=!0),e.prev=2,n=ie.loginDataResponse.data.id,e.next=6,this.getUserTransferTransactions(n);case 6:for(i=e.sent,this.loadingNode.active=!1,i.data.length<=0?this.noDataFound.active=!0:this.noDataFound.active=!1,r=0;r<this.transferHistoryNodes.length;r++)o=i.data[r],a=this.transferHistoryNodes[this.transferHistoryNodes.length-(r+1)],this.upDateTransferNode(a,{sno:(r+1).toString(),date:o.created_at||"-",xp:o.plays||"0",address:o.user_name||"-",iscredited:o.is_credited});if(i.data.length>this.transferHistoryNodes.length)for(s=this.transferHistoryNodes.length;s<i.data.length;s++)u=i.data[s],this.newTransferNode({sno:(s+1).toString(),date:u.created_at||"-",xp:u.plays||"0",address:u.user_name||"-",iscredited:u.is_credited});e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Error fetching user transfer transactions:",e.t0);case 16:case"end":return e.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),i.newBuyNode=function(){var t=V(e().mark((function t(n){var i,r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=l(this.buyPrefab),this.buyParent.addChild(i),Ye(i.getChildByName("S. No.").getComponent(o),n.sno),r=Zf(n.date),Ye(i.getChildByName("Date").getComponent(o),r,15),Ye(i.getChildByName("XP").getComponent(o),n.xp),Ye(i.getChildByName("Remarks").getComponent(o),n.remarks),this.buyHistoryNodes.unshift(i)}catch(e){console.error("Error creating buy history node",e)}case 1:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.upDateBuyNode=function(){var t=V(e().mark((function t(n,i){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Ye(n.getChildByName("S. No.").getComponent(o),i.sno),r=Zf(i.date),Ye(n.getChildByName("Date").getComponent(o),r,15),Ye(n.getChildByName("XP").getComponent(o),i.xp),Ye(n.getChildByName("Remarks").getComponent(o),i.remarks)}catch(e){console.error("Error creating buy history node",e)}case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i.newSpendNode=function(){var t=V(e().mark((function t(n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=l(this.spendPrefab),this.spendParent.addChild(i),Ye(i.getChildByName("S. No.").getComponent(o),n.sno),Ye(i.getChildByName("auction House").getComponent(o),n.auctionHouse),Ye(i.getChildByName("Auction ID").getComponent(o),n.auctionId),Ye(i.getChildByName("XP").getComponent(o),n.xp),this.spendHistoryNodes.unshift(i)}catch(e){console.error("Error creating spend history node",e)}case 1:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.upDateSpendNode=function(){var t=V(e().mark((function t(n,i){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Ye(n.getChildByName("S. No.").getComponent(o),i.sno),Ye(n.getChildByName("auction House").getComponent(o),i.auctionHouse),Ye(n.getChildByName("Auction ID").getComponent(o),i.auctionId),Ye(n.getChildByName("XP").getComponent(o),i.xp)}catch(e){console.error("Error creating buy history node",e)}case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i.newTransferNode=function(){var t=V(e().mark((function t(n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=l(this.transferPrefab),this.transferParent.addChild(i),Ye(i.getChildByName("S. No.").getComponent(o),n.sno),Ye(i.getChildByName("Date").getComponent(o),Zf(n.date),15),Ye(i.getChildByName("XP").getComponent(o),n.iscredited?"+"+n.xp:"-"+n.xp),n.iscredited?i.getChildByName("XP").getComponent(o).color=y.GREEN:i.getChildByName("XP").getComponent(o).color=y.RED,Ye(i.getChildByName("Address").getComponent(o),n.address),this.transferHistoryNodes.unshift(i)}catch(e){console.error("Error creating transfer history node",e)}case 1:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.upDateTransferNode=function(){var t=V(e().mark((function t(n,i){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Ye(n.getChildByName("S. No.").getComponent(o),i.sno),Ye(n.getChildByName("Date").getComponent(o),Zf(i.date),15),Ye(n.getChildByName("XP").getComponent(o),(i.iscredited,""+i.xp)),i.iscredited?n.getChildByName("XP").getComponent(o).color=y.GREEN:n.getChildByName("XP").getComponent(o).color=y.RED,Ye(n.getChildByName("Address").getComponent(o),i.address)}catch(e){console.error("Error creating buy history node",e)}case 1:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i.init=function(){this.setPanelActive(!0,!1,!1),this.onBuyClicked()},i.getBuyHistory=function(){return this.buyHistoryNodes},i.getSpendHistory=function(){return this.spendHistoryNodes},i.getTransferHistory=function(){return this.transferHistoryNodes},i.getUserSpendTransactions=function(){var t=V(e().mark((function t(n){var i,r=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Xe.TRANSACTION_HISTORY(n,"debit"),t.abrupt("return",new Promise(V(e().mark((function t(n,o){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(i,rt,null,!0);case 3:a=e.sent,console.log("Spend Transactions:",a),r.transactionSpendResponse=a,n(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch spend transactions:",e.t0),o(e.t0);case 13:case"end":return e.stop()}}),t,null,[[0,9]])})))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.getUserBuyTransactions=function(){var t=V(e().mark((function t(n){var i,r=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Xe.TRANSACTION_HISTORY(n,"credit"),t.abrupt("return",new Promise(V(e().mark((function t(n,o){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(i,rt,null,!0);case 3:a=e.sent,console.log("Buy Transactions:",a),r.transactionBuyResponse=a,n(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch buy transactions:",e.t0),o(e.t0);case 13:case"end":return e.stop()}}),t,null,[[0,9]])})))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.getUserTransferTransactions=function(){var t=V(e().mark((function t(n){var i,r=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Xe.TRANSACTION_HISTORY(n,"transfer"),t.abrupt("return",new Promise(V(e().mark((function t(n,o){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bn.request(i,rt,null,!0);case 3:a=e.sent,console.log("Buy Transactions:",a),r.transactionBuyResponse=a,n(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r.showError(e.t0.message||"Failed to update profile. Try again."),o(e.t0);case 13:case"end":return e.stop()}}),t,null,[[0,9]])})))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.showError=function(e){we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,e||"")},n}(f)).prototype,"uiNode",[Pd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hd=ne(zd.prototype,"buyPrefab",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fd=ne(zd.prototype,"spendPrefab",[kd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qd=ne(zd.prototype,"transferPrefab",[Nd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jd=ne(zd.prototype,"buyParent",[Sd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wd=ne(zd.prototype,"spendParent",[Bd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gd=ne(zd.prototype,"transferParent",[Rd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yd=ne(zd.prototype,"buyPanel",[xd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vd=ne(zd.prototype,"spendPanel",[Ed],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kd=ne(zd.prototype,"transferPanel",[Od],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xd=ne(zd.prototype,"buyScroll",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zd=ne(zd.prototype,"spendScroll",[Ld],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jd=ne(zd.prototype,"transferScroll",[Td],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qd=ne(zd.prototype,"loadingNode",[Id],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$d=ne(zd.prototype,"noDataFound",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dd=zd))||Dd);function Zf(e){var t=new Date(e);return String(t.getDate()).padStart(2,"0")+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+" "+(t.getFullYear()-2e3)}n._RF.pop(),n._RF.push({},"043fcGYY5tKEaYZeH5LQD52","TransferXPManager",void 0);var Jf,Qf,$f,eg,tg,ng,ig,rg,og,ag,sg,ug,lg,cg,pg,hg,dg,fg=i.ccclass,gg=i.property,bg=(rf=fg("TransferXPManager"),of=gg(a),af=gg(a),sf=gg(o),uf=gg(I),lf=gg(I),cf=gg(I),pf=gg(a),hf=gg(a),df=gg(o),ff=gg(o),gf=gg([I]),bf=gg(u),mf=gg(So),yf=gg(S),vf=gg(S),wf=gg(S),_f=gg(D),Pf=gg(a),Cf=gg(a),kf=gg(S),rf((Bf=ne((Sf=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"bgNode",Bf,Q(e)),te(e,"uiNode",Rf,Q(e)),te(e,"countryCode",xf,Q(e)),te(e,"phoneNumber",Ef,Q(e)),te(e,"emailEditBox",Of,Q(e)),te(e,"TransferXP",Af,Q(e)),te(e,"popUp1",Lf,Q(e)),te(e,"popUp2",Tf,Q(e)),te(e,"balanceLabel",If,Q(e)),te(e,"updateWalletBalance",Mf,Q(e)),te(e,"isOTPBox",Df,Q(e)),te(e,"customPopUp",zf,Q(e)),te(e,"timerBase",Uf,Q(e)),te(e,"sendOtpButton",Hf,Q(e)),te(e,"resendOTP",Ff,Q(e)),te(e,"VerifyOtp",qf,Q(e)),te(e,"codeSentWith",jf,Q(e)),te(e,"emailBox",Wf,Q(e)),te(e,"phoneBox",Gf,Q(e)),te(e,"countryCodeBox",Yf,Q(e)),e.SenOtpRes=null,e.isSendOtp=!1,e.isOtpClicked=!1,e.currentIndex=0,e.isButtonLocked=!1,e.balance=0,e.isTextChange=!0,e}Z(n,t);var i=n.prototype;return i.start=function(){var e=this;this.bgNode.getComponent(h).opacity=0,this.uiNode.active=!1,this.timerBase.node.on("TimerFinished",this.otpTimeUp,this),this.phoneNumber.node.on("editing-did-began",(function(){return e.phoneEditingDidBegan()}),this),this.phoneNumber.node.on("text-changed",(function(){return e.phoneNumberChanged()}),this),this.phoneNumber.node.on("editing-did-ended",(function(){return e.phoneEditingDidEnd()}),this),this.emailEditBox.node.on("editing-did-began",(function(){return e.emailEditingDidBegan()}),this),this.emailEditBox.node.on("text-changed",(function(){return e.emailChanged()}),this),this.emailEditBox.node.on("editing-did-ended",(function(){return e.emailEditingDidEnd()}),this),this.isOTPBox.forEach((function(t,n){t.node.on("editing-did-began",(function(){return e.onEditBoxBegan(n)}),e),t.node.on("text-changed",(function(){return e.onTextChanged(n)}),e),t.node.on("editing-did-ended",e.onEditEnd,e)}))},i.phoneEditingDidBegan=function(){this.emailBox.getComponent(R).color=E(158,158,158),this.emailEditBox.enabled=!1},i.emailEditingDidBegan=function(){this.phoneBox.getComponent(R).color=E(158,158,158),this.phoneNumber.enabled=!1,this.countryCodeBox.interactable=!1},i.phoneEditingDidEnd=function(){this.isTextChange&&(this.emailBox.getComponent(R).color=y.WHITE,this.emailEditBox.enabled=!0)},i.emailEditingDidEnd=function(){this.isTextChange&&(this.phoneBox.getComponent(R).color=y.WHITE,this.phoneNumber.enabled=!0,this.countryCodeBox.interactable=!0)},i.phoneNumberChanged=function(){this.phoneNumber.string.length>1?this.isTextChange=!1:this.isTextChange=!0},i.emailChanged=function(){this.emailEditBox.string.length>1?this.isTextChange=!1:this.isTextChange=!0},i.showBuyXPPanel=function(){this.uiNode.active=!0,this.bgNode.active=!0,d(this.bgNode.getComponent(h)).to(.2,{opacity:255}).start(),d(this.uiNode).to(.2,{position:new p(0,0,0)}).start(),this.init()},i.init=function(){var e,t;this.popUp1.active=!0,this.popUp2.active=!1,this.phoneNumber.string="",this.emailEditBox.string="",this.TransferXP.string="",this.isOTPBox.forEach((function(e){e.string="",e.getComponentInChildren(o).string=""})),this.timerBase.stopTimer(),this.sendOtpButton.interactable=!0,this.isSendOtp=!1,this.balance=Number(null==(e=ie.playerBalancesResponse)||null==(t=e.data)?void 0:t.play_balance)||0;var n=this.balance||0;this.balanceLabel.string=$r.instance.t("balance",{amount:n}),this.isTextChange=!0,this.isTextChange&&(this.emailBox.getComponent(R).color=y.WHITE,this.emailEditBox.enabled=!0,this.phoneBox.getComponent(R).color=y.WHITE,this.phoneNumber.enabled=!0,this.countryCodeBox.interactable=!0)},i.hideBuyXPPanel=function(){var e=this;d(this.bgNode.getComponent(h)).to(.2,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.uiNode).to(.2,{position:new p(0,-1500,0)}).call((function(){e.uiNode.active=!1})).start()},i.onTransferXPClick=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u,l=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isButtonLocked){e.next=2;break}return e.abrupt("return");case 2:if(this.isButtonLocked=!0,n=this.countryCode.string,i=this.phoneNumber.string,r=this.emailEditBox.string,o=this.TransferXP.string,a=this.createOtpRequest(n,i,r,o),console.log("validations",a),console.log("cc, phone, email, transferXP",n,i,r,o),a){e.next=17;break}return this.getLoginAlertMessage(n,i,r,o),this.sendOtpButton.interactable=!0,this.isButtonLocked=!1,e.abrupt("return");case 17:this.sendOtpButton.interactable=!1;case 18:return e.prev=18,this.offResend(),e.next=22,bn.request(Xe.SEND_OTP_XP_TRANSFER,ot,a,!0);case 22:this.SenOtpRes=e.sent,s=$r.instance.t("enter_code_sent_to"),u=this.SenOtpRes.data.identifier||"",this.codeSentWith.string="<color=#ffffff>"+s+" </color><color=#00FFA3>"+u+"</color>",this.timerBase.stopTimer(),this.timerBase.initializeTime(20),this.isSendOtp=!0,this.isOtpClicked=!1,this.isOTPBox[0].focus(),this.popUp1.active=!1,this.popUp2.active=!0,e.next=40;break;case 35:e.prev=35,e.t0=e.catch(18),this.sendOtpButton.interactable=!0,this.otpTimeUp(),console.error("Send OTP Error:",e.t0);case 40:this.scheduleOnce((function(){l.isButtonLocked=!1}),1);case 41:case"end":return e.stop()}}),t,this,[[18,35]])})));return function(){return t.apply(this,arguments)}}(),i.resendOtp=function(){this.offResend(),this.isSendOtp=!1,this.onTransferXPClick(),this.isOTPBox.forEach((function(e){return e.string=""})),this.resetOTPLabel()},i.createOtpRequest=function(e,t,n,i){return!i||isNaN(Number(i))||Number(i)<=0?null:e&&this.isRealCountryCode(e)&&t&&this.isValidPhoneNumber(t)?{xp:Number(i),mobile_no:""+e+t}:n&&this.isValidEmail(n)?{xp:Number(i),email:n}:null},i.onClickOtp=function(){var t=V(e().mark((function t(){var n,i,r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isOtpClicked){e.next=2;break}return e.abrupt("return");case 2:if(this.isOtpClicked=!0,this.VerifyOtp.interactable=!1,4===(n=this.getOTPCode()).length){e.next=10;break}return this.getOtpAlertMessage(n),this.isOtpClicked=!1,this.VerifyOtp.interactable=!0,e.abrupt("return");case 10:return i={otpRequestId:""+this.SenOtpRes.data.otpRequestId,otp:""+n},e.prev=11,e.next=14,bn.request(Xe.VERIFY_OTP_XP_TRANSFER,ot,i,!0);case 14:a=e.sent,this.hideBuyXPPanel(),console.log("OTP Verification Response:",a),this.timerBase.stopTimer(),this.showPopup("Success","Your XP transfer was completed successfully!"),null!=(r=ie.playerBalancesResponse)&&null!=(o=r.data)&&o.play_balance&&(ie.playerBalancesResponse.data.play_balance=(this.balance-a.data.plays||0).toString(),this.updateWalletBalance.string=""+ie.playerBalancesResponse.data.play_balance),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(11),console.error("OTP Verification Error:",e.t0),this.isOtpClicked=!1,this.VerifyOtp.interactable=!0;case 27:case"end":return e.stop()}}),t,this,[[11,22]])})));return function(){return t.apply(this,arguments)}}(),i.otpTimeUp=function(){this.resendOTP.interactable=!0;var e=$r.instance.t("didnt_receive_code"),t=$r.instance.t("resend");this.resendOTP.node.getComponent(D).string="<color=#000000>"+e+" </color><color=#0000ff><u>"+t+"</u></color>"},i.offResend=function(){this.resendOTP.interactable=!1;var e=$r.instance.t("didnt_receive_code"),t=$r.instance.t("resend");this.resendOTP.node.getComponent(D).string="<color=#969696>"+e+" </color><color=#969696><u>"+t+"</u></color>"},i.iInvalidOTP=function(e){this.isOTPBox.forEach((function(e){e.node.getComponentInChildren(o).color=y.RED}))},i.resetOTPLabel=function(){this.isOTPBox.forEach((function(e){e.node.getComponentInChildren(o).color=y.WHITE}))},i.getOtpAlertMessage=function(e){var t="Something went wrong.";e?4!==e.length&&(t="OTP must be 4 digits."):t="OTP cannot be empty.",we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,t||"")},i.getLoginAlertMessage=function(e,t,n,i){var r="Something went wrong.";(!i||isNaN(Number(i))||Number(i)<=0)&&(r="Please enter a valid amount to transfer."),""!=n?n&&""!==n.trim()?this.isValidEmail(n)||(r="Please enter a valid email address."):r="Please enter your email address.":""!=t?t&&""!==t.trim()?this.isValidPhoneNumber(t)?e&&this.isRealCountryCode(e)||(r="Invalid country code format."):r="Please enter a valid phone number.":r="Please enter your phone number.":t||n?e&&this.isRealCountryCode(e)||(r="Invalid country code format."):r="Phone Number OR Email required!",we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,r||"")},i.showPopup=function(e,t){var n=this,i=l(this.customPopUp);i.setPosition(0,0),i.setScale(p.ZERO),this.node.addChild(i);i.getComponent(ir).setCallback((function(){return n.setZoomOut(i)}),null),i.getComponent(ir).Msg.string=t,i.getComponent(ir).title.string=e,this.setZoom(i)},i.setZoom=function(e){d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.setZoomOut=function(e){d(e).to(.2,{scale:p.ZERO}).destroySelf().start()},i.onEditboxEditingBegan=function(){ce.emit(pe,!0)},i.onEditboxEditingEnd=function(){ce.emit(pe,!1)},i.onEditBoxBegan=function(e){this.onEditboxEditingBegan(),this.currentIndex=e,this.resetOTPLabel()},i.onTextChanged=function(e){var t=this.isOTPBox[e].string;3===e&&0!=t.length?(this.isOTPBox[e].string=t.charAt(0),this.focusPrevEditBox(e+1)):2===t.length?(this.isOTPBox[e].string=t.charAt(0),this.focusNextEditBox(e,t.charAt(1))):0===t.length?this.focusPrevEditBox(e):t.length>1&&this.focusPrevEditBox(e+1)},i.showError=function(e){we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,e||"")},i.focusNextEditBox=function(e,t){e<this.isOTPBox.length-1&&(this.isOTPBox[e+1].string=t,this.isOTPBox[e+1].focus())},i.focusPrevEditBox=function(e){e>0&&this.isOTPBox[e-1].focus()},i.isValidPhoneNumber=function(e){return/^\d{10}$/.test(e)},i.isValidEmail=function(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)},i.isRealCountryCode=function(e){return mg.has(e)},i.getOTPCode=function(){return this.isOTPBox.map((function(e){return e.string.trim()})).join("")},i.onEditEnd=function(){this.onEditboxEditingEnd()},n}(f)).prototype,"bgNode",[of],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rf=ne(Sf.prototype,"uiNode",[af],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xf=ne(Sf.prototype,"countryCode",[sf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ef=ne(Sf.prototype,"phoneNumber",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Of=ne(Sf.prototype,"emailEditBox",[lf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Af=ne(Sf.prototype,"TransferXP",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lf=ne(Sf.prototype,"popUp1",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tf=ne(Sf.prototype,"popUp2",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),If=ne(Sf.prototype,"balanceLabel",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mf=ne(Sf.prototype,"updateWalletBalance",[ff],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Df=ne(Sf.prototype,"isOTPBox",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zf=ne(Sf.prototype,"customPopUp",[bf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Uf=ne(Sf.prototype,"timerBase",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hf=ne(Sf.prototype,"sendOtpButton",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ff=ne(Sf.prototype,"resendOTP",[vf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qf=ne(Sf.prototype,"VerifyOtp",[wf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jf=ne(Sf.prototype,"codeSentWith",[_f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wf=ne(Sf.prototype,"emailBox",[Pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gf=ne(Sf.prototype,"phoneBox",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yf=ne(Sf.prototype,"countryCodeBox",[kf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nf=Sf))||Nf),mg=new Set(["+1","+44","+91","+81","+61","+49","+33","+971","+86","+7"]);n._RF.pop(),n._RF.push({},"fec95D35PtNCqvQjJmfcYqm","MyAuctionManager",void 0);var yg,vg,wg,_g,Pg,Cg,kg,Ng,Sg,Bg,Rg,xg,Eg,Og,Ag,Lg,Tg,Ig,Mg,Dg,zg,Ug,Hg,Fg,qg,jg=i.ccclass,Wg=i.property,Gg=(Jf=jg("MyAuctionManager"),Qf=Wg(a),$f=Wg(a),eg=Wg(u),tg=Wg(a),ng=Wg(m),ig=Wg(a),rg=Wg(a),Jf((sg=ne((ag=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"uiNode",sg,Q(e)),te(e,"auctionParent",ug,Q(e)),te(e,"auctionPrefab",lg,Q(e)),te(e,"loadingNode",cg,Q(e)),te(e,"scroll2",pg,Q(e)),te(e,"hading",hg,Q(e)),te(e,"noDataFound",dg,Q(e)),e.auctionNodes=[],e}Z(n,t);var i=n.prototype;return i.start=function(){we.getDispatcher().on(oe.AUCTION_Claim,this.onAuctionClicked,this)},i.onAuctionClicked=function(){var t=V(e().mark((function t(){var n,i,r,o,a,s,u,l,c,p,h,d,f,g;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPanelActive(),this.auctionParent.children.length<1&&(this.loadingNode.active=!0),e.prev=2,s=null==(n=ie.loginDataResponse)||null==(i=n.data)?void 0:i.id,u=null==(r=ie.auctionHouseResponse)||null==(o=r.data)||null==(a=o.currentAuctionHouse)?void 0:a.id,l="v1/auction/player-auction/"+s+"?limit=50&page=0&auction_house_id="+u+"&state=completed",e.next=8,bn.request(l,rt,null,!0);case 8:for(c=e.sent,ie.myAuctionResponse=c,this.loadingNode.active=!1,c.data.length<=0?this.noDataFound.active=!0:this.noDataFound.active=!1,p=0;p<this.auctionNodes.length&&p<c.data.length;p++)h=c.data[p],d=this.auctionNodes[this.auctionNodes.length-(p+1)],this.updateAuctionNode(d,h);if(c.data.length>this.auctionNodes.length)for(f=this.auctionNodes.length;f<c.data.length;f++)g=c.data[f],this.newAuctionNode(g);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),this.loadingNode.active=!1,console.error("Auction fetch error:",e.t0);case 20:case"end":return e.stop()}}),t,this,[[2,16]])})));return function(){return t.apply(this,arguments)}}(),i.setPanelActive=function(){this.scroll2.scrollToTopLeft(0,!0),this.uiNode.active=!0,this.ScrollUpdate()},i.setPanelOff=function(){this.uiNode.active=!1},i.updateAuctionNode=function(e,t){e.getComponent(Pr).setData(t.auction_id,t.title,t.total_bids,t.total_bid_consumed,t.total_player,t.total_auction_bids,t.winner_player_name,t.winner_bid_value||"",t.auction_type,t.product_name,t.status,t.delivery_status)},i.newAuctionNode=function(){var t=V(e().mark((function t(n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i=l(this.auctionPrefab),this.auctionParent.addChild(i),i.getComponent(Pr).setData(n.auction_id,n.title,n.total_bids,n.total_bid_consumed,n.total_player,n.total_auction_bids,n.winner_player_name,n.winner_bid_value||"",n.auction_type,n.product_name,n.status,n.delivery_status),this.auctionNodes.unshift(i)}catch(e){console.error("Error creating auction node",e)}case 1:case"end":return e.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.ScrollUpdate=function(){var e=this.auctionParent.getPosition();this.hading.setPosition(e.x,0)},n}(f)).prototype,"uiNode",[Qf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ug=ne(ag.prototype,"auctionParent",[$f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lg=ne(ag.prototype,"auctionPrefab",[eg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cg=ne(ag.prototype,"loadingNode",[tg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pg=ne(ag.prototype,"scroll2",[ng],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hg=ne(ag.prototype,"hading",[ig],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dg=ne(ag.prototype,"noDataFound",[rg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),og=ag))||og);n._RF.pop(),n._RF.push({},"31aeezV0YRDOLpn1URmNB5F","MenuPanel",void 0);var Yg,Vg,Kg,Xg,Zg,Jg,Qg,$g,eb,tb,nb,ib=i.ccclass,rb=i.property,ob=(yg=ib("MenuPanel"),vg=rb(a),wg=rb(a),_g=rb(a),Pg=rb(o),Cg=rb(nf),kg=rb(R),Ng=rb(Ou),Sg=rb(Xf),Bg=rb(yp),Rg=rb(bg),xg=rb(Gg),yg((Ag=ne((Og=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"uiNode",Ag,Q(e)),te(e,"bgNode",Lg,Q(e)),te(e,"soundToggleNode",Tg,Q(e)),te(e,"userNameleLabel",Ig,Q(e)),te(e,"showProfile",Mg,Q(e)),te(e,"gameLogo",Dg,Q(e)),te(e,"loginPopupManager",zg,Q(e)),te(e,"xPHistoryManager",Ug,Q(e)),te(e,"buyXPManager",Hg,Q(e)),te(e,"transferXPManager",Fg,Q(e)),te(e,"myAuctionManager",qg,Q(e)),e.isMenuOpen=!1,e.buttonClicked=!1,e.isSoundOn=!0,e}Z(n,t);var i=n.prototype;return i.start=function(){this.bgNode.getComponent(h).opacity=0,this.uiNode.setPosition(new p(810,0,0)),this.bgNode.active=!1,this.uiNode.active=!1,this.loadSoundState(),this.updateSoundToggleUI(),we.getDispatcher().on("openMenu",this.openMenu,this),we.getDispatcher().on("closeMenu",this.closeMenu,this)},i.openMenu=function(){var t=V(e().mark((function t(){var n,i,r,o,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=null==(n=ie.auctionHouseResponse)?void 0:n.data.currentAuctionHouse.medias.local_path)){e.next=4;break}return e.next=4,dc(""+ue.apiBaseURL+o,this.gameLogo);case 4:if(a=(null==(i=ie.loginDataResponse)||null==(r=i.data)?void 0:r.first_name)||"Guest",this.userNameleLabel.string=$r.instance.t("logged_in_as",{name:a}),t=new F(325,130),s=this.gameLogo.node,u=void 0,l=void 0,f=void 0,g=void 0,u=s.getComponent(c).contentSize,l=t.height/u.height,f=t.width/u.width,g=Math.min(l,f),s.getComponent(c).setContentSize(new F(u.width*g,u.height*g)),ue.isLogin){e.next=10;break}return this.loginPopupManager.init(),e.abrupt("return");case 10:if(!this.isMenuOpen){e.next=12;break}return e.abrupt("return");case 12:this.isMenuOpen=!0,this.buttonClicked=!1,this.bgNode.active=!0,this.uiNode.active=!0,d(this.bgNode.getComponent(h)).to(.2,{opacity:150}).start(),d(this.uiNode).to(.2,{position:new p(0,0,0)}).start();case 18:case"end":return e.stop()}var t,s,u,l,f,g}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.closeMenu=function(){var e=this;this.isMenuOpen&&(this.isMenuOpen=!1,d(this.bgNode.getComponent(h)).to(.2,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.uiNode).to(.2,{position:new p(810,0,0)}).call((function(){e.uiNode.active=!1})).start())},i.handleButtonClick=function(e){this.buttonClicked||(this.buttonClicked=!0,e())},i.onClickProfile=function(){var e=this;this.handleButtonClick((function(){we.getDispatcher().emit(oe.CLOSE_ALL_POPUPS),console.log("Open My Profile"),e.showProfile.showProfile(),e.closeMenu()}))},i.onClickBuyXP=function(){var e=this;this.handleButtonClick((function(){we.getDispatcher().emit(oe.CLOSE_ALL_POPUPS),console.log("Open Buy XP"),e.buyXPManager.showBuyXPPanel(),e.closeMenu()}))},i.onClickTransactions=function(){var e=this;this.handleButtonClick((function(){we.getDispatcher().emit(oe.CLOSE_ALL_POPUPS),console.log("Open Transactions"),e.xPHistoryManager.openUI(),e.closeMenu()}))},i.onClickMyAuction=function(){var e=this;this.handleButtonClick((function(){we.getDispatcher().emit(oe.CLOSE_ALL_POPUPS),console.log("Open Transactions"),e.myAuctionManager.onAuctionClicked(),e.closeMenu()}))},i.onClickTransferXP=function(){var e=this;this.handleButtonClick((function(){we.getDispatcher().emit(oe.CLOSE_ALL_POPUPS),console.log("Open Transfer XP"),e.transferXPManager.showBuyXPPanel(),e.closeMenu()}))},i.onClickLogout=function(){var e=this;this.handleButtonClick((function(){console.log("Logging Out..."),e.closeMenu(),e.userLogUot()}))},i.toggleSound=function(){this.isSoundOn=!this.isSoundOn,localStorage.setItem("soundOn",this.isSoundOn+""),Ke.inst.toggleSound(),this.updateSoundToggleUI()},i.updateSoundToggleUI=function(){this.soundToggleNode&&(this.soundToggleNode.getChildByName("SoundOff").active=!this.isSoundOn,this.soundToggleNode.getChildByName("SoundOn").active=this.isSoundOn),console.log("Sound is now",this.isSoundOn?"ON":"OFF")},i.loadSoundState=function(){"false"===localStorage.getItem("soundOn")&&(this.isSoundOn=!1)},i.userLogUot=function(){var t=V(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(V(e().mark((function t(n,i){var r,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,we.getDispatcher().emit(oe.IS_LOADER_ON),r=!1,!lt()){e.next=9;break}return e.next=6,bn.request(Xe.LOGOUT,at,null,!0,!1);case 6:o=e.sent,console.log("userLogUot",o),r=!0;case 9:return localStorage.clear(),e.next=12,Je.clearAllCookies();case 12:return mn(),C.stopAll(),e.next=16,it.clearInstance();case 16:ve.inst.clear(),ie.setallData(),r&&_.loadScene("MultipleAuction"),n(),e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(0),console.error("userLogUot",e.t0),e.abrupt("return",i(e.t0));case 26:case"end":return e.stop()}}),t,null,[[0,22]])})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n}(f)).prototype,"uiNode",[vg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lg=ne(Og.prototype,"bgNode",[wg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tg=ne(Og.prototype,"soundToggleNode",[_g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ig=ne(Og.prototype,"userNameleLabel",[Pg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mg=ne(Og.prototype,"showProfile",[Cg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dg=ne(Og.prototype,"gameLogo",[kg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zg=ne(Og.prototype,"loginPopupManager",[Ng],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ug=ne(Og.prototype,"xPHistoryManager",[Sg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hg=ne(Og.prototype,"buyXPManager",[Bg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fg=ne(Og.prototype,"transferXPManager",[Rg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qg=ne(Og.prototype,"myAuctionManager",[xg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Eg=Og))||Eg);n._RF.pop(),n._RF.push({},"22193xSThNLQYsS/kdF8U3D","HowToPlayPanelManager",void 0);var ab,sb,ub,lb,cb,pb,hb,db,fb,gb,bb,mb,yb,vb,wb,_b,Pb,Cb,kb,Nb,Sb,Bb=i.ccclass,Rb=i.property,xb=(Yg=Bb("HowToPlayPanelManager"),Vg=Rb(a),Kg=Rb(a),Xg=Rb(D),Zg=Rb(m),Yg(($g=ne((Qg=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"mainPanel",$g,Q(t)),te(t,"bgNode",eb,Q(t)),te(t,"richText",tb,Q(t)),te(t,"bidScroll",nb,Q(t)),t.isAnimating=!1,t.isOpen=!1,t}Z(t,e);var n=t.prototype;return n.init=function(){var e,t;if(!this.isAnimating&&!this.isOpen){this.isOpen=!0;var n=Mc((null==(e=ie.auctionHouseListResponse)||null==(t=e.data[ue.auctionIndex])?void 0:t.description)||"No Description");this.richText.string=n,this.mainPanel.active=!1,this.bgNode.active=!1;var i=this.bgNode.getComponent(h);i&&(i.opacity=0),this.inPopUp()}},n.inPopUp=function(){var e=this;if(this.bgNode.active=!0,!this.isAnimating&&this.mainPanel&&this.bgNode&&this.bidScroll){this.isAnimating=!0,this.mainPanel.active=!0,this.bidScroll.scrollToTop(.1);var t=this.bgNode.getComponent(h);t&&(t.opacity=0,d(t).to(.3,{opacity:180}).start()),d(this.mainPanel).to(.3,{position:new p(0,0,0)}).call((function(){e.isAnimating=!1})).start()}},n.out=function(){var e=this;if(this.mainPanel&&this.bgNode){var t=this.bgNode.getComponent(h);t&&d(t).to(.3,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.mainPanel).to(.3,{position:new p(0,-2e3,0)}).call((function(){e.mainPanel.active=!1,e.isAnimating=!1,e.isOpen=!1})).start()}},t}(f)).prototype,"mainPanel",[Vg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),eb=ne(Qg.prototype,"bgNode",[Kg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tb=ne(Qg.prototype,"richText",[Xg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nb=ne(Qg.prototype,"bidScroll",[Zg],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jg=Qg))||Jg);n._RF.pop(),n._RF.push({},"b6599R11LVOirslmfsrqYe9","ShippingStatus",void 0);var Eb,Ob,Ab,Lb,Tb,Ib,Mb,Db,zb,Ub,Hb,Fb,qb,jb,Wb,Gb,Yb,Vb,Kb,Xb,Zb,Jb,Qb,$b,em,tm,nm,im,rm,om,am,sm,um,lm=i.ccclass,cm=i.property,pm=(ab=lm("ShippingStatus"),sb=cm(a),ub=cm(a),lb=cm(o),cb=cm(o),pb=cm(o),hb=cm(o),db=cm(o),fb=cm(a),gb=cm(Gg),ab((yb=ne((mb=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"mainPanel",yb,Q(e)),te(e,"bgNode",vb,Q(e)),te(e,"claimLabel",wb,Q(e)),te(e,"inProgressLabel",_b,Q(e)),te(e,"orderPlacedLabel",Pb,Q(e)),te(e,"deliveredLabel",Cb,Q(e)),te(e,"confirmButton",kb,Q(e)),te(e,"declined",Nb,Q(e)),te(e,"myAuctionManager",Sb,Q(e)),e.isAnimating=!1,e.auction_id="",e}Z(n,t);var i=n.prototype;return i.onLoad=function(){we.getDispatcher().on(rr.Winging_Price_Status,this.init,this)},i.onDestroy=function(){we.getDispatcher().off(rr.Winging_Price_Status,this.init,this)},i.setShippingStep=function(e){switch(this.resetAll(),e){case"claim":this.markGreen(this.claimLabel);break;case"inProcess":this.markGreen(this.claimLabel),this.markGreen(this.inProgressLabel);break;case"orderPlaced":this.markGreen(this.claimLabel),this.markGreen(this.inProgressLabel),this.markGreen(this.orderPlacedLabel);break;case"delivered":this.markGreen(this.claimLabel),this.markGreen(this.inProgressLabel),this.markGreen(this.orderPlacedLabel),this.markGreen(this.deliveredLabel);break;case"confirmed":this.markGreen(this.claimLabel),this.markGreen(this.inProgressLabel),this.markGreen(this.orderPlacedLabel),this.markGreen(this.deliveredLabel),this.markGreen(this.confirmButton);break;case"declined":this.markGreen(this.claimLabel),this.markGreen(this.inProgressLabel),this.markGreen(this.orderPlacedLabel),this.markGreen(this.deliveredLabel),this.confirmButton.node.active=!1,this.declined.active=!0;break;default:console.warn("Invalid step:",e)}},i.isConfirmed=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.out(),this.myAuctionManager.onAuctionClicked();case 3:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.getAuctionHouse=function(){var t=V(e().mark((function t(){var n=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(V(e().mark((function t(i,r){var o,a,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.auction_id){e.next=4;break}return o="Auction ID not available. Please try again.",we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,o),e.abrupt("return",r(new Error(o)));case 4:return a={auction_id:n.auction_id,delivery_status:"confirmed"},e.prev=5,e.next=8,bn.request(Xe.DELIVERY_STATUS,ot,a,!0);case 8:s=e.sent,console.log(" Delivery status response:",s),i(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(" API Error:",e.t0),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"Please try again, something went wrong."),r(e.t0);case 18:case"end":return e.stop()}}),t,null,[[5,13]])})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.markGreen=function(e){e&&(e.color=new y(0,200,0),e.node&&e.node.getChildByName("Done")&&(e.node.getChildByName("Done").active=!0))},i.resetAll=function(){var e=new y(255,255,255);this.claimLabel&&(this.claimLabel.color=e,this.claimLabel.node&&this.claimLabel.node.getChildByName("Done")&&(this.claimLabel.node.getChildByName("Done").active=!1)),this.inProgressLabel&&(this.inProgressLabel.color=e,this.inProgressLabel.node&&this.inProgressLabel.node.getChildByName("Done")&&(this.inProgressLabel.node.getChildByName("Done").active=!1)),this.orderPlacedLabel&&(this.orderPlacedLabel.color=e,this.orderPlacedLabel.node&&this.orderPlacedLabel.node.getChildByName("Done")&&(this.orderPlacedLabel.node.getChildByName("Done").active=!1)),this.deliveredLabel&&(this.deliveredLabel.color=e,this.deliveredLabel.node&&this.deliveredLabel.node.getChildByName("Done")&&(this.deliveredLabel.node.getChildByName("Done").active=!1)),this.confirmButton&&(this.deliveredLabel.color=e,this.confirmButton.node&&this.confirmButton.node.getChildByName("Done")&&(this.confirmButton.node.getChildByName("Done").active=!1)),this.declined&&(this.confirmButton.node.active=!0,this.declined.active=!1)},i.init=function(e,t){this.mainPanel.active=!1,this.auction_id=t,this.bgNode.active=!1,this.setShippingStep(e);var n=this.bgNode.getComponent(h);n&&(n.opacity=0),this.inPopUp()},i.inPopUp=function(){var e=this;if(this.bgNode.active=!0,!this.isAnimating&&this.mainPanel&&this.bgNode){this.isAnimating=!0,this.mainPanel.active=!0;var t=this.bgNode.getComponent(h);t&&(t.opacity=0,d(t).to(.3,{opacity:180}).start()),d(this.mainPanel).to(.3,{position:new p(0,0,0)}).call((function(){e.isAnimating=!1})).start()}},i.out=function(){var e=this;if(this.mainPanel&&this.bgNode){var t=this.bgNode.getComponent(h);t&&d(t).to(.3,{opacity:0}).call((function(){e.bgNode.active=!1})).start(),d(this.mainPanel).to(.3,{position:new p(0,-2e3,0)}).call((function(){e.mainPanel.active=!1,e.isAnimating=!1})).start()}},n}(f)).prototype,"mainPanel",[sb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vb=ne(mb.prototype,"bgNode",[ub],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wb=ne(mb.prototype,"claimLabel",[lb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_b=ne(mb.prototype,"inProgressLabel",[cb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pb=ne(mb.prototype,"orderPlacedLabel",[pb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cb=ne(mb.prototype,"deliveredLabel",[hb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kb=ne(mb.prototype,"confirmButton",[db],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nb=ne(mb.prototype,"declined",[fb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sb=ne(mb.prototype,"myAuctionManager",[gb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bb=mb))||bb);n._RF.pop(),n._RF.push({},"92647OvhXZNp56ivlu+7/3z","GameFotterManager",void 0);var hm,dm=i.ccclass,fm=i.property;Eb=dm("GameFooterManager"),Ob=fm(S),Ab=fm(S),Lb=fm(S),Tb=fm(S),Ib=fm(Ou),Mb=fm(ob),Db=fm(Xf),zb=fm(nf),Ub=fm(hc),Hb=fm(Ge),Fb=fm(Gg),qb=fm(Ic),jb=fm(xb),Wb=fm(pm),Gb=fm(a),Eb((Kb=ne((Vb=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"homeButton",Kb,Q(e)),te(e,"myBidsButton",Xb,Q(e)),te(e,"redeemButton",Zb,Q(e)),te(e,"howToButton",Jb,Q(e)),te(e,"loginPopupManager",Qb,Q(e)),te(e,"menu",$b,Q(e)),te(e,"transferxp",em,Q(e)),te(e,"showProfile",tm,Q(e)),te(e,"gamePlay",nm,Q(e)),te(e,"allBidHistoryManager",im,Q(e)),te(e,"myAuctionManager",rm,Q(e)),te(e,"detailsPanelManager",om,Q(e)),te(e,"howToPlayPanelManager",am,Q(e)),te(e,"shippingStatus",sm,Q(e)),te(e,"showWining",um,Q(e)),e.isClickLocked=!1,e}Z(n,t);var i=n.prototype;return i.start=function(){this.homeButton.node.on(S.EventType.CLICK,this.onHomeClicked,this),this.myBidsButton.node.on(S.EventType.CLICK,this.onMyBidsClicked,this),this.redeemButton.node.on(S.EventType.CLICK,this.onRedeemClicked,this),this.howToButton.node.on(S.EventType.CLICK,this.onHowToClicked,this),we.getDispatcher().on(oe.CLOSE_ALL_POPUPS,this.closeAllPopups,this),we.getDispatcher().on(oe.REDIRECT_TO_HOME,this.onHomeClicked,this)},i.lockClicksTemporarily=function(){var e=this;this.isClickLocked=!0,setTimeout((function(){return e.isClickLocked=!1}),300)},i.closeAllPopups=function(){var e,t,n,i,r,o;null==(e=this.loginPopupManager)||e.onClose(),null==(t=this.menu)||t.closeMenu(),null==(n=this.transferxp)||n.closeUI(),null==(i=this.showProfile)||i.closeProfile(),null==(r=this.myAuctionManager)||r.setPanelOff(),null==(o=this.shippingStatus)||o.out()},i.onHomeClicked=function(){var t=V(e().mark((function t(){var n,i,r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClickLocked){e.next=2;break}return e.abrupt("return");case 2:this.lockClicksTemporarily(),this.closeAllPopups(),null==(n=this.allBidHistoryManager)||n.out(),null==(i=this.detailsPanelManager)||i.out(),null==(r=this.howToPlayPanelManager)||r.out(),this.showWining.active=!1,console.log("Home button clicked"),this.gamePlay.isOnHome();case 10:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onMyBidsClicked=function(){var e,t;this.isClickLocked||(this.lockClicksTemporarily(),this.closeAllPopups(),null==(e=this.detailsPanelManager)||e.out(),null==(t=this.howToPlayPanelManager)||t.out(),console.log("My Bids button clicked"),this.allBidHistoryManager.init())},i.onRedeemClicked=function(){var e,t,n;this.isClickLocked||(this.lockClicksTemporarily(),null==(e=this.allBidHistoryManager)||e.out(),this.closeAllPopups(),console.log("Redeem button clicked"),null==(t=this.detailsPanelManager)||t.init(),null==(n=this.howToPlayPanelManager)||n.out())},i.onHowToClicked=function(){var e,t,n;this.isClickLocked||(this.lockClicksTemporarily(),this.closeAllPopups(),null==(e=this.allBidHistoryManager)||e.out(),null==(t=this.detailsPanelManager)||t.out(),null==(n=this.howToPlayPanelManager)||n.init(),console.log("How To button clicked - currently blank"))},n}(f)).prototype,"homeButton",[Ob],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xb=ne(Vb.prototype,"myBidsButton",[Ab],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zb=ne(Vb.prototype,"redeemButton",[Lb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jb=ne(Vb.prototype,"howToButton",[Tb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qb=ne(Vb.prototype,"loginPopupManager",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$b=ne(Vb.prototype,"menu",[Mb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),em=ne(Vb.prototype,"transferxp",[Db],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tm=ne(Vb.prototype,"showProfile",[zb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nm=ne(Vb.prototype,"gamePlay",[Ub],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),im=ne(Vb.prototype,"allBidHistoryManager",[Hb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rm=ne(Vb.prototype,"myAuctionManager",[Fb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),om=ne(Vb.prototype,"detailsPanelManager",[qb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),am=ne(Vb.prototype,"howToPlayPanelManager",[jb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sm=ne(Vb.prototype,"shippingStatus",[Wb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),um=ne(Vb.prototype,"showWining",[Gb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yb=Vb));n._RF.pop(),n._RF.push({},"dfa58GzlVFDFZcjjY39EuxU","NodeNameHighlightManager",void 0);var gm,bm,mm,ym,vm,wm,_m,Pm=i.ccclass;i.property,Pm("NodeNameHighlightManager")(hm=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).popupNode=null,t.showingPopup=!1,t.isEventOn=!1,t.canvas=null,t.nodeName="",t}Z(t,e);var n=t.prototype;return n.onLoad=function(){this.canvas=r("Canvas/TextHighlight")},n.start=function(){var e=this;this.nodeName=this.node.name,this.isEventOn||(this.isEventOn=!0,this.node.on(a.EventType.TOUCH_START,this.onHoverEnter,this),this.node.on(a.EventType.TOUCH_END,this.onHoverLeave,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onHoverLeave,this)),s.load("PopupAvatar",u,(function(t,n){if(t||!n)return console.error("Failed to load Popup prefab:",t),void(e.showingPopup=!1)}))},n.onHoverEnter=function(e){var t=this;!this.showingPopup&&this.canvas&&(this.showingPopup=!0,s.load("PopupAvatar",u,(function(e,n){if(e||!n)return console.error("Failed to load Popup prefab:",e),void(t.showingPopup=!1);t.popupNode=l(n);var i=t.popupNode.getComponentInChildren(o);i&&(i.string=t.nodeName),t.canvas.addChild(t.popupNode);var r=t.node.getWorldPosition(),a=t.canvas.getComponent(c).convertToNodeSpaceAR(new p(r.x,r.y+50,0));t.popupNode.setPosition(z(0,a.y,1)),t.popupNode.getChildByName("AvatarPrefab").getChildByName("Avatar").getComponent(R).spriteFrame=t.node.getChildByName("Avatar").getComponent(R).spriteFrame;var s=t.popupNode.getComponent(h);s||(s=t.popupNode.addComponent(h)),s.opacity=0,d(s).to(.3,{opacity:255}).start()})))},n.onHoverLeave=function(){var e=this;if(this.popupNode&&this.popupNode.isValid){var t=this.popupNode.getComponent(h);t?d(t).to(.2,{opacity:0}).call((function(){var t;null==(t=e.popupNode)||t.destroy(),e.canvas.destroyAllChildren(),e.popupNode=null,e.showingPopup=!1})).start():(this.popupNode.destroy(),this.popupNode=null,this.showingPopup=!1)}else this.showingPopup=!1},t}(f));n._RF.pop(),n._RF.push({},"9e70axMdh1GjpH7RczxEXAh","UniqueBidStorageManager",void 0),n._RF.pop(),n._RF.push({},"1746fCa3uBG8YPMUPEcBlqZ","WinAuctionStatusConfirm",void 0);var Cm,km,Nm,Sm,Bm,Rm,xm,Em,Om,Am,Lm,Tm,Im,Mm,Dm,zm,Um,Hm,Fm,qm,jm,Wm,Gm,Ym,Vm,Km=i.ccclass,Xm=i.property;gm=Km("WinAuctionStatusConfirm"),bm=Xm(a),mm=Xm(a),gm((wm=ne((vm=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"UiNode",wm,Q(e)),te(e,"BlockBg",_m,Q(e)),e.isClicked=!1,e.auction_id="",e}Z(n,t);var i=n.prototype;return i.onLoad=function(){we.getDispatcher().on(rr.WIN_AUCTION_STATUS_CONFIRM,this.init,this)},i.init=function(e){e&&(this.auction_id=e,this.setZoom(this.UiNode))},i.onclickYes=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClicked){e.next=2;break}return e.abrupt("return");case 2:this.isClicked=!0;try{n=new URL(window.parent.location.href),i=""+n.origin,window.parent.location.href=i}catch(e){console.error("Please try again.")}this.setZoomOut(this.UiNode);case 5:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.onclickNo=function(){var t=V(e().mark((function t(){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClicked){e.next=2;break}return e.abrupt("return");case 2:this.isClicked=!0;try{n=new URL(window.parent.location.href),i=""+n.origin,window.parent.location.href=i}catch(e){console.error("Please try again.")}this.setZoomOut(this.UiNode);case 5:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.getAuctionHouse=function(){var t=V(e().mark((function t(n){var i=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(V(e().mark((function t(r,o){var a,s,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.auction_id){e.next=4;break}return a="Auction ID not available. Please try again.",we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,a),e.abrupt("return",o(new Error(a)));case 4:return s={auction_id:i.auction_id,delivery_status:n},e.prev=5,e.next=8,bn.request(Xe.DELIVERY_STATUS,ot,s,!0);case 8:u=e.sent,console.log(" Delivery status response:",u),r(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(" API Error:",e.t0),we.getDispatcher().emit(oe.ERROR_MSG_NOTIFY,"Please try again, something went wrong."),o(e.t0);case 18:case"end":return e.stop()}}),t,null,[[5,13]])})))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.setZoom=function(e){this.BlockBg.active=!0,e.setScale(0,0,0),e.active=!0,d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.setZoomOut=function(e){var t=this;d(e).to(.2,{scale:p.ZERO}).call((function(){t.BlockBg.active=!1,e.active=!1})).start()},i.chatOnTelegram=function(){var e=(screen.width-550)/2,t=(screen.height-600)/2;window.open("https://t.me/auctionx_support_bot","Chat on Telegram","width=550,height=600,top="+t+",left="+e)},i.update=function(e){},n}(f)).prototype,"UiNode",[bm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_m=ne(vm.prototype,"BlockBg",[mm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ym=vm));n._RF.pop(),n._RF.push({},"24b1bQ8/QpJXqWDpT/LhO5r","BigDealLayoutManager",void 0);var Zm,Jm,Qm,$m,ey,ty,ny,iy,ry,oy,ay,sy,uy,ly,cy,py,hy,dy,fy,gy,by,my,yy,vy,wy,_y=i.ccclass,Py=i.property;Cm=_y("BigDealLayoutManager"),km=Py(a),Nm=Py(a),Sm=Py(a),Bm=Py(a),Rm=Py(a),xm=Py(a),Em=Py(a),Om=Py(a),Am=Py(a),Lm=Py(a),Tm=Py(a),Cm((Dm=ne((Mm=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"homePageContent",Dm,Q(t)),te(t,"homePagelogo",zm,Q(t)),te(t,"homeButton",Um,Q(t)),te(t,"gameHeader",Hm,Q(t)),te(t,"midelUi",Fm,Q(t)),te(t,"keypadHistory",qm,Q(t)),te(t,"winingMidelUi",jm,Q(t)),te(t,"winingHistory",Wm,Q(t)),te(t,"RewardScreenMidelUi",Gm,Q(t)),te(t,"myWalletmidUi",Ym,Q(t)),te(t,"myWalletUpiPopUP",Vm,Q(t)),t}Z(t,e);var n=t.prototype;return n.start=function(){var e=T.getVisibleSize();e.width/e.height>.7&&(console.log("ipad"),this.HomeScreen(),this.GamePlay(),this.WiningPage(),this.MyWallet())},n.HomeScreen=function(){this.homePageContent.setScale(.8,.8,.8),this.homePagelogo.setScale(.8,.8,.8),this.homeButton.setScale(.8,.8,.8)},n.GamePlay=function(){this.gameHeader.setScale(.8,.8,.8),this.keypadHistory.setScale(.7,.7,.8)},n.WiningPage=function(){this.winingHistory.setScale(.7,.7,.8),this.winingMidelUi.setScale(.7,.7,.8),this.winingMidelUi.setPosition(0,200,0)},n.RewardPage=function(){},n.MyWallet=function(){this.myWalletmidUi.setScale(.7,.7,.8),this.myWalletUpiPopUP.setScale(.8,.8,.8)},t}(f)).prototype,"homePageContent",[km],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zm=ne(Mm.prototype,"homePagelogo",[Nm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Um=ne(Mm.prototype,"homeButton",[Sm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hm=ne(Mm.prototype,"gameHeader",[Bm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fm=ne(Mm.prototype,"midelUi",[Rm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qm=ne(Mm.prototype,"keypadHistory",[xm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jm=ne(Mm.prototype,"winingMidelUi",[Em],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wm=ne(Mm.prototype,"winingHistory",[Om],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gm=ne(Mm.prototype,"RewardScreenMidelUi",[Am],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ym=ne(Mm.prototype,"myWalletmidUi",[Lm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vm=ne(Mm.prototype,"myWalletUpiPopUP",[Tm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Im=Mm));n._RF.pop(),n._RF.push({},"b1af7aT0jNOj4GHjrgM4qDV","Dropdown",void 0);var Cy,ky,Ny,Sy,By,Ry,xy,Ey,Oy,Ay,Ly,Ty=i.ccclass,Iy=i.property;Zm=Ty("Dropdown"),Jm=Iy(a),Qm=Iy(o),$m=Iy(a),ey=Iy(a),ty=Iy(a),ny=Iy(I),iy=Iy(m),ry=Iy({type:u}),oy=Iy({type:a}),ay=Iy({type:Boolean}),sy=Iy({type:Boolean}),Zm((cy=ne((ly=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"uiNode",cy,Q(e)),te(e,"selectItem",py,Q(e)),te(e,"posNode",hy,Q(e)),te(e,"block",dy,Q(e)),te(e,"buttonNode",fy,Q(e)),te(e,"searchBox",gy,Q(e)),te(e,"scrollView",by,Q(e)),te(e,"codePrefab",my,Q(e)),te(e,"codeParent",yy,Q(e)),te(e,"iscountryCode",vy,Q(e)),te(e,"iscountryselection",wy,Q(e)),e.allItems=[],e.validCountryCodes=["+1","+44","+91","+81","+61","+49","+33","+971","+86","+7"],e.validCountrys=["+1","+44","+91","+81","+61","+49","+33","+971","+86","+7"],e}Z(n,t);var i=n.prototype;return i.onLoad=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validCountryCodes=[],this.validCountrys=[],this.scrollView&&this.searchBox&&(this.allItems=this.scrollView.content.children.slice(),this.searchBox.node.on("text-changed",this.onSearchChanged,this));case 3:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){if(we.getDispatcher().on(oe.COUNTRY_CODE_INDEX,this.isSetConttryCode,this),this.iscountryCode&&this.validCountryCodes.includes(this.selectItem.string)){var e=this.validCountryCodes.indexOf(this.selectItem.string);ue.countryCodeIndex=e>-1?e:0,we.getDispatcher().emit(oe.COUNTRY_CODE_INDEX)}ie.countryApiResponse?this.onCountryDetailsFetched():we.getDispatcher().on(oe.COUNTRY_DETAILS_FETCHED,this.onCountryDetailsFetched,this)},i.onEnable=function(){if(we.getDispatcher().on(oe.COUNTRY_CODE_INDEX,this.isSetConttryCode,this),this.iscountryCode&&this.validCountryCodes.includes(this.selectItem.string)){var e=this.validCountryCodes.indexOf(this.selectItem.string);ue.countryCodeIndex=e>-1?e:0,we.getDispatcher().emit(oe.COUNTRY_CODE_INDEX)}ie.countryApiResponse?this.onCountryDetailsFetched():we.getDispatcher().on(oe.COUNTRY_DETAILS_FETCHED,this.onCountryDetailsFetched,this)},i.isSetConttryCode=function(){this.iscountryCode&&(this.selectItem.string=this.validCountryCodes[ue.countryCodeIndex]||ie.countryApiResponse.data[ue.countryCodeIndex].dial_code),this.iscountryselection&&(this.selectItem.string=this.validCountrys[ue.countryCodeIndex]||ie.countryApiResponse.data[ue.countryCodeIndex].name)},i.onCountryDetailsFetched=function(){var t=V(e().mark((function t(){var n=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie.countryApiResponse){e.next=2;break}return e.abrupt("return");case 2:ie.countryApiResponse.data.forEach((function(e){n.iscountryCode?(n.validCountryCodes.push(e.dial_code),n.instantiateCodePrefab(e.dial_code)):(n.validCountrys.push(e.name),n.instantiateCodePrefab(e.name))})),this.scrollView&&this.searchBox&&(this.allItems=this.scrollView.content.children.slice(),this.searchBox.node.on("text-changed",this.onSearchChanged,this));case 4:case"end":return e.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.instantiateCodePrefab=function(e){if(this.codePrefab&&this.codeParent){var t=l(this.codePrefab);this.codeParent.addChild(t);var n=t.getChildByName("CodeText");if(n){var i=n.getComponent(o);i&&(i.string=e)}var r=t.getComponent(S);if(r){var a=new G;a.target=this.node,a.component="Dropdown",a.handler="onCountSelection",a.customEventData=e,r.clickEvents=[a]}}},i.onSearchChanged=function(e){var t=e.string.toLowerCase();this.allItems.forEach((function(e){var n=e.getComponentInChildren(o);if(n){var i=n.string.toLowerCase().includes(t);e.active=i}})),this.scrollToTop()},i.scrollToTop=function(){this.scrollView.scrollToTop(.2)},i.onCountSelection=function(e,t){if(this.selectItem.string=t,this.validCountryCodes.includes(t)){var n=this.validCountryCodes.indexOf(t);ue.countryCodeIndex=n,we.getDispatcher().emit(oe.COUNTRY_CODE_INDEX)}else if(this.validCountrys.includes(t)){var i=this.validCountrys.indexOf(t);ue.countryCodeIndex=i,we.getDispatcher().emit(oe.COUNTRY_CODE_INDEX)}this.onPlayButton()},i.onPlayButton=function(){var e=this;d(this.uiNode).to(.1,{scale:new p(1,0,1)},{easing:"smooth"}).call((function(){e.selectItem.node.active=!0,e.block.active=!1,e.uiNode.active=!1,e.buttonNode.setScale(1,1,1)})).start()},i.onOutsideArea=function(){this.onPlayButton()},i.onOpenDropDown=function(){this.block.active=!0,this.uiNode.active=!0,this.selectItem.node.active=!1,this.searchBox&&this.searchBox.focus(),this.node.setWorldPosition(this.posNode.getWorldPosition()),this.buttonNode.setScale(1,-1,1),d(this.uiNode).to(.1,{scale:new p(1,1,1)},{easing:"smooth"}).start()},n}(f)).prototype,"uiNode",[Jm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),py=ne(ly.prototype,"selectItem",[Qm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hy=ne(ly.prototype,"posNode",[$m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dy=ne(ly.prototype,"block",[ey],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fy=ne(ly.prototype,"buttonNode",[ty],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gy=ne(ly.prototype,"searchBox",[ny],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),by=ne(ly.prototype,"scrollView",[iy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),my=ne(ly.prototype,"codePrefab",[ry],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yy=ne(ly.prototype,"codeParent",[oy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vy=ne(ly.prototype,"iscountryCode",[ay],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wy=ne(ly.prototype,"iscountryselection",[sy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),uy=ly));n._RF.pop(),n._RF.push({},"7029aySWWlAsJwyxxPFH4nd","ErrorCustomPopUp",void 0);var My,Dy=i.ccclass,zy=i.property;Cy=Dy("ErrorCustomPopUp"),ky=zy(o),Ny=zy(S),Sy=zy(a),By=zy(h),Cy((Ey=ne((xy=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"errorMsgLabel",Ey,Q(t)),te(t,"ExitBtn",Oy,Q(t)),te(t,"UiNode",Ay,Q(t)),te(t,"BlackBg",Ly,Q(t)),t}Z(t,e);var n=t.prototype;return n.start=function(){we.getDispatcher().on(oe.ERROR_MSG_POPUP,this.openPopup,this),we.getDispatcher().on(oe.ERROR_MSG_NOTIFY,this.openPopupInOut,this)},n.onDestroy=function(){we.getDispatcher().off(oe.ERROR_MSG_POPUP,this.openPopup,this),we.getDispatcher().off(oe.ERROR_MSG_NOTIFY,this.openPopupInOut,this)},n.openPopup=function(e){this.errorMsgLabel.string=e,this.BlackBg.node.active=!0,this.UiNode.active=!0,d(this.BlackBg).to(.1,{opacity:255}).start(),d(this.UiNode).to(.1,{position:new p(0,0,0)}).start()},n.onExitLayer=function(){var e=this;d(this.BlackBg).to(.1,{opacity:0}).call((function(){e.BlackBg.node.active=!1,e.errorMsgLabel.string=""})).start(),d(this.UiNode).to(.1,{position:new p(0,500,0)}).call((function(){e.UiNode.active=!1})).start()},n.openPopupInOut=function(e){var t=this;this.errorMsgLabel.string=e,this.UiNode.active=!0,this.BlackBg.opacity=0,this.UiNode.setPosition(0,500,0),C.stopAllByTarget(this.BlackBg),C.stopAllByTarget(this.UiNode),d(this.BlackBg).to(.1,{opacity:255}).start(),d(this.UiNode).to(.1,{position:new p(0,0,0)}).delay(2).to(.1,{position:new p(0,500,0)}).call((function(){t.UiNode.active=!1})).start(),d(this.BlackBg).delay(2).to(.1,{opacity:0}).call((function(){t.BlackBg.node.active=!1,t.errorMsgLabel.string=""})).start()},n.update=function(e){},t}(f)).prototype,"errorMsgLabel",[ky],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oy=ne(xy.prototype,"ExitBtn",[Ny],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ay=ne(xy.prototype,"UiNode",[Sy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ly=ne(xy.prototype,"BlackBg",[By],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ry=xy));n._RF.pop(),n._RF.push({},"244cc2CJRJBPbNXMAicvLl8","NotificationManager",void 0);var Uy,Hy,Fy,qy,jy;(0,i.ccclass)("NotificationManager")(My=function(t){function n(){return t.apply(this,arguments)||this}return Z(n,t),n.prototype.start=function(){var t=V(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n}(f));n._RF.pop(),n._RF.push({},"b3f94qdAeZEyoNYrKENpLbv","UserInterface",void 0),n._RF.pop(),n._RF.push({},"d919f8Zoh1CiqjugjhL18rp","LocalizedLabel",void 0);var Wy,Gy,Yy,Vy,Ky,Xy,Zy,Jy,Qy,$y,ev,tv,nv,iv=i.ccclass,rv=i.property;Uy=iv("LocalizedLabel"),Hy=rv({tooltip:"The key in language JSON"}),Uy((jy=ne((qy=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"languageKey",jy,Q(t)),t.label=null,t}Z(t,e);var n=t.prototype;return n.start=function(){this.label=this.getComponent(o),this.updateText(),console.log("language-changed test "),we.getDispatcher().on("language-changed",this.updateText,this)},n.onDestroy=function(){we.getDispatcher().off("language-changed",this.updateText,this)},n.updateText=function(){console.log("evet ont set inthis"),this.label&&this.languageKey&&(this.label.string=$r.instance.t(this.languageKey))},t}(f)).prototype,"languageKey",[Hy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fy=qy));n._RF.pop(),n._RF.push({},"a1501ZOtWdGyIIYVf7snTCg","MyWalletScreen",void 0);var ov,av,sv,uv,lv,cv,pv,hv,dv,fv,gv,bv,mv,yv,vv,wv,_v,Pv,Cv,kv,Nv,Sv=i.ccclass,Bv=i.property;Wy=Sv("MyWalletScreen"),Gy=Bv(o),Yy=Bv(a),Vy=Bv(a),Ky=Bv(I),Xy=Bv(o),Wy((Qy=ne((Jy=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"referralCode",Qy,Q(e)),te(e,"gameWallet",$y,Q(e)),te(e,"winningWallet",ev,Q(e)),te(e,"UpiIdEditBox",tv,Q(e)),te(e,"walletUpiIdMessege",nv,Q(e)),e}Z(n,t);var i=n.prototype;return i.init=function(){we.getDispatcher().on("USER_LOGOUT",this.userLogUot,this)},i.start=function(){},i.onDestroy=function(){we.getDispatcher().off("USER_LOGOUT",this.userLogUot,this)},i.onClickBack=function(){this.node.active=!1},i.userLogUot=function(){var t=V(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(V(e().mark((function t(n,i){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,we.getDispatcher().emit(oe.IS_LOADER_ON),!ge()){e.next=7;break}return e.next=5,bn.request(Xe.LOGOUT,at,null,!0,!1);case 5:r=e.sent,console.log("userLogUot",r);case 7:return localStorage.clear(),e.next=10,Je.clearAllCookies();case 10:return mn(),C.stopAll(),e.next=14,it.clearInstance();case 14:ve.inst.clear(),ie.setallData(),_.loadScene("MultipleAuction"),n(),e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(0),console.error("userLogUot",e.t0),e.abrupt("return",i(e.t0));case 24:case"end":return e.stop()}}),t,null,[[0,20]])})))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n}(f)).prototype,"referralCode",[Gy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$y=ne(Jy.prototype,"gameWallet",[Yy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ev=ne(Jy.prototype,"winningWallet",[Vy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tv=ne(Jy.prototype,"UpiIdEditBox",[Ky],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nv=ne(Jy.prototype,"walletUpiIdMessege",[Xy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zy=Jy));n._RF.pop(),n._RF.push({},"394d2L+xttIv5YZGLiAw9uG","ProfileUpdated",void 0);var Rv,xv,Ev,Ov,Av,Lv,Tv,Iv,Mv,Dv,zv,Uv,Hv,Fv,qv,jv,Wv,Gv,Yv,Vv,Kv,Xv,Zv,Jv,Qv,$v,ew,tw=i.ccclass,nw=i.property;ov=tw("ProfileUpdated"),av=nw(I),sv=nw(I),uv=nw(I),lv=nw(o),cv=nw(u),pv=nw(a),hv=nw(a),dv=nw(a),fv=nw(Go),ov((mv=ne((bv=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"userName",mv,Q(e)),te(e,"referralCode",yv,Q(e)),te(e,"pinCode",vv,Q(e)),te(e,"gender",wv,Q(e)),te(e,"customPopUp",_v,Q(e)),te(e,"gamePlayScreen",Pv,Q(e)),te(e,"rewordPage",Cv,Q(e)),te(e,"loginScreen",kv,Q(e)),te(e,"editProfilePicture",Nv,Q(e)),e.isSendOtp=!1,e.isRewordPageActivate=!1,e}Z(n,t);var i=n.prototype;return i.onEnable=function(){this.userName.string="",this.referralCode.string="",this.pinCode.string="",this.gender.string="MALE",ie.loginDataResponse.data.first_name&&(this.userName.string=ie.loginDataResponse.data.first_name),ie.loginDataResponse.data.referral_code&&(this.referralCode.string=ie.loginDataResponse.data.referral_code),ie.loginDataResponse.data.gender&&(this.gender.string=ie.loginDataResponse.data.gender),this.editProfilePicture.init()},i.onRegistrationClick=function(){var t=V(e().mark((function t(n,i){var r,o,a,s,u,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.userName.string,o=this.referralCode.string,a=this.pinCode.string,s=this.gender.string,!(""!=r&&r.length>5&&""!=a&&""!=s)){e.next=21;break}return e.prev=5,u={first_name:""+r,zipcode:""+a,gender:""+s,referral_code:""+o,avatar:""+this.editProfilePicture.selectAvatar},e.next=9,bn.request(Xe.REGISTRATION+""+ie.loginDataResponse.data.id,at,u,!0);case 9:l=e.sent,ie.upDateProfileResponse=l,this.setData(),console.log("ProfileUpdated Res",l),this.isRewordPageActivate?(this.rewordPage.active=!0,this.node.active=!1):(it.clearInstance(),_.loadScene("MultipleAuction")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.error("get ProfileUpdated Error",e.t0);case 19:e.next=22;break;case 21:this.getRegistrationAlertMessage(r,a);case 22:case"end":return e.stop()}}),t,this,[[5,16]])})));return function(e,n){return t.apply(this,arguments)}}(),i.setData=function(){ie.loginDataResponse.data.email=ie.upDateProfileResponse.data.email,ie.loginDataResponse.data.first_name=ie.upDateProfileResponse.data.first_name,ie.loginDataResponse.data.last_name=ie.upDateProfileResponse.data.last_name,ie.loginDataResponse.data.mobile_no=ie.upDateProfileResponse.data.mobile_no,ie.loginDataResponse.data.avatar=ie.upDateProfileResponse.data.avatar,ie.loginDataResponse.data.referral_code=ie.upDateProfileResponse.data.referral_code,ie.loginDataResponse.data.wallet_address=ie.upDateProfileResponse.data.wallet_address,ie.loginDataResponse.data.gender=ie.upDateProfileResponse.data.gender,ie.loginDataResponse.data.country=ie.upDateProfileResponse.data.country,ie.loginDataResponse.data.city=ie.upDateProfileResponse.data.city,ie.loginDataResponse.data.is_verified=ie.upDateProfileResponse.data.is_verified;var e=new Object(ie.loginDataResponse),t=JSON.stringify(e,null);ie.loginDataResponse.data.is_verified&&(localStorage.setItem("PlayerLoginObj",t),ve.inst.setItem("PlayerLoginObj",t))},i.getRegistrationAlertMessage=function(e,t){var n=this,i=l(this.customPopUp);i.setPosition(0,0),this.node.addChild(i);i.setScale(z(0)),i.getComponent(ir).setCallback((function(e){n.setZoomOut(i)}),null);var r="";r=""==e?"User Name should not be empty.":""!=e&&e.length<=5?"UserName should be minimum 6 characters.":""!=t&&this.isValidPincode(t)?"Invalid PinCode.":"Something went wrong.",i.getComponent(ir).Msg.string=r,i.getComponent(ir).title.string="ALERT!!",this.setZoom(i)},i.onClickConfirm=function(e,t){},i.setZoomOut=function(e){d(e).to(.2,{scale:new p(0,0,1)}).call((function(){return e.destroy()})).start()},i.setZoom=function(e){e.setScale(p.ZERO),d(e).to(.2,{scale:new p(1.2,1.2,1.2)}).to(.1,{scale:new p(1,1,1)}).start()},i.isValidPincode=function(e){return/^[1-9][0-9]{5}$/.test(e)},i.onClickBack=function(){this.node.active=!1,this.loginScreen.active=!0},n}(f)).prototype,"userName",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yv=ne(bv.prototype,"referralCode",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vv=ne(bv.prototype,"pinCode",[uv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wv=ne(bv.prototype,"gender",[lv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_v=ne(bv.prototype,"customPopUp",[cv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pv=ne(bv.prototype,"gamePlayScreen",[pv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cv=ne(bv.prototype,"rewordPage",[hv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kv=ne(bv.prototype,"loginScreen",[dv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nv=ne(bv.prototype,"editProfilePicture",[fv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gv=bv));n._RF.pop(),n._RF.push({},"0f3a1fDecJGCL9Rl+o259w3","RewardScene",void 0);var iw,rw,ow,aw,sw,uw,lw,cw,pw,hw,dw,fw,gw,bw=i.ccclass,mw=i.property;Rv=bw("RewardScene"),xv=mw(o),Ev=mw(o),Ov=mw(S),Av=mw(o),Lv=mw(S),Tv=mw(S),Iv=mw(S),Mv=mw(o),Dv=mw(o),zv=mw(R),Uv=mw(o),Hv=mw(u),Rv((jv=ne((qv=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(e=t.call.apply(t,[this].concat(i))||this,"rewardTitleText",jv,Q(e)),te(e,"twitterTitleText",Wv,Q(e)),te(e,"twitterButton",Gv,Q(e)),te(e,"telegramTitleText",Yv,Q(e)),te(e,"telegramButton",Vv,Q(e)),te(e,"uploadProof",Kv,Q(e)),te(e,"isDoItLater",Xv,Q(e)),te(e,"creditMessege",Zv,Q(e)),te(e,"walletBalance",Jv,Q(e)),te(e,"uplodeImage",Qv,Q(e)),te(e,"tempLabel",$v,Q(e)),te(e,"customPopUp",ew,Q(e)),e.formDataArr=[],e.formdata=null,e}Z(n,t);var i=n.prototype;return i.onEnable=function(){var e,t;null!=(e=ie.playerBalancesResponse)&&null!=(t=e.data)&&t.play_balance&&(this.walletBalance.string=ie.playerBalancesResponse.data.play_balance)},i.uploadImageButtonTo=function(){var t=V(e().mark((function t(){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.createElement("input")).type="file",n.accept="image/*",n.multiple=!0,n.style.display="none",n.addEventListener("change",V(e().mark((function t(i){var r,o,a,s,u,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=i.target.files)&&0!==r.length){e.next=4;break}return console.warn("No file selected."),e.abrupt("return");case 4:return o=new FormData,Array.from(r).forEach((function(e){o.append("media",e,e.name)})),e.prev=6,e.next=9,fetch(ue.apiBaseURL+"v1/media/multiple",{method:"POST",headers:{Authorization:"Bearer "+ge()},body:o});case 9:if((s=e.sent).ok){e.next=12;break}throw new Error("Upload failed: "+s.statusText);case 12:return e.next=14,s.json();case 14:u=e.sent,console.log("Uploaded successfully:",u),l=null==(a=u.data)?void 0:a.map((function(e){return e.uuid})),console.log("Uploaded UUIDs:",l),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.error("Upload failed:",e.t0);case 23:n.remove();case 24:case"end":return e.stop()}}),t,null,[[6,20]])})))),document.body.appendChild(n),n.click();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.followTwitter=function(){var e=(screen.width-550)/2,t=(screen.height-420)/2;window.open("https://twitter.com/intent/follow?screen_name=auctionx_live","Follow @auctionx_live","width=550,height=420,top="+t+",left="+e)},n}(f)).prototype,"rewardTitleText",[xv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wv=ne(qv.prototype,"twitterTitleText",[Ev],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gv=ne(qv.prototype,"twitterButton",[Ov],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yv=ne(qv.prototype,"telegramTitleText",[Av],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vv=ne(qv.prototype,"telegramButton",[Lv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kv=ne(qv.prototype,"uploadProof",[Tv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xv=ne(qv.prototype,"isDoItLater",[Iv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zv=ne(qv.prototype,"creditMessege",[Mv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jv=ne(qv.prototype,"walletBalance",[Dv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qv=ne(qv.prototype,"uplodeImage",[zv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$v=ne(qv.prototype,"tempLabel",[Uv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ew=ne(qv.prototype,"customPopUp",[Hv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fv=qv));n._RF.pop(),n._RF.push({},"26a255aCFlGA629drfrahZE","SpinningGradientNode",void 0);var yw=i.ccclass,vw=i.property;iw=yw("SpinningGradientNode"),rw=vw({type:y}),ow=vw({type:y}),iw((uw=ne((sw=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return te(t=e.call.apply(e,[this].concat(i))||this,"width",uw,Q(t)),te(t,"height",lw,Q(t)),te(t,"borderRadius",cw,Q(t)),te(t,"animationDuration",pw,Q(t)),te(t,"startColor",hw,Q(t)),te(t,"endColor",dw,Q(t)),te(t,"gradientPercentage",fw,Q(t)),te(t,"glowOffset",gw,Q(t)),t}Z(t,e);var n=t.prototype;return n.start=function(){var e,t;(null!=(e=this.node.getComponent(c))?e:this.node.addComponent(c)).setContentSize(this.width,this.height);var n=null!=(t=this.node.getComponent(Y))?t:this.node.addComponent(Y);this.drawGradientRoundedBox(n);var i=new a("GlowLayer");this.node.addChild(i),i.setSiblingIndex(0),i.addComponent(c).setContentSize(this.width+10,this.height+10),i.setPosition(0,-this.glowOffset);var r=i.addComponent(Y);this.drawGlowBox(r);var s=new a("SpinnerText");s.setPosition(0,0),this.node.addChild(s);var u=s.addComponent(o);u.string="Spinning!",u.fontSize=24,u.color=y.WHITE,this.startSpinningAnimation()},n.drawGradientRoundedBox=function(e){e.clear();for(var t=this.height,n=this.width,i=n/2,r=t/2,o=t*this.gradientPercentage,a=0;a<t;a++){var s=a<o?0:(a-o)/(t-o),u=new y;y.lerp(u,this.startColor,this.endColor,s),e.fillColor=u,e.rect(-i,r-a-1,n,1),e.fill()}e.strokeColor=y.TRANSPARENT,e.lineWidth=0,e.roundRect(-i,-r,n,t,this.borderRadius),e.stroke()},n.drawGlowBox=function(e){e.clear(),e.fillColor=new y(this.startColor.r,this.startColor.g,this.startColor.b,80),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.borderRadius),e.fill()},n.startSpinningAnimation=function(){d(this.node).by(this.animationDuration,{angle:360}).repeatForever().start()},t}(f)).prototype,"width",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),lw=ne(sw.prototype,"height",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),cw=ne(sw.prototype,"borderRadius",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 24}}),pw=ne(sw.prototype,"animationDuration",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.7}}),hw=ne(sw.prototype,"startColor",[rw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(186,66,255)}}),dw=ne(sw.prototype,"endColor",[ow],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(0,225,255)}}),fw=ne(sw.prototype,"gradientPercentage",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.35}}),gw=ne(sw.prototype,"glowOffset",[vw],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),aw=sw));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});